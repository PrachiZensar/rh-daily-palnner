function dtmlXMLLoaderObject(t,e,i,n){return this.xmlDoc="",this.async=void 0===i||i,this.onloadAction=t||null,this.mainObject=e||null,this.waitCall=null,this.rSeed=n||!1,this}function convertStringToBoolean(t){switch("string"==typeof t&&(t=t.toLowerCase()),t){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(t){return-1!=t.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function _dhtmlxError(t,e,i){return this.catches||(this.catches=[]),this}function dhtmlXHeir(t,e){for(var i in e)"function"==typeof e[i]&&(t[i]=e[i]);return t}window.dhtmlXScheduler=window.scheduler={version:"5.0.0"},window.dhtmlx||(dhtmlx=function(t){for(var e in t)dhtmlx[e]=t[e];return dhtmlx}),dhtmlx.extend_api=function(t,e,i){var n=window[t];n&&(window[t]=function(t){var i;if(t&&"object"==typeof t&&!t.tagName){for(var r in i=n.apply(this,e._init?e._init(t):arguments),dhtmlx)e[r]&&this[e[r]](dhtmlx[r]);for(var r in t)e[r]?this[e[r]](t[r]):0===r.indexOf("on")&&this.attachEvent(r,t[r])}else i=n.apply(this,arguments);return e._patch&&e._patch(this),i||this},window[t].prototype=n.prototype,i&&dhtmlXHeir(window[t].prototype,i))},dhtmlxAjax={get:function(t,e){var i=new dtmlXMLLoaderObject(!0);return i.async=arguments.length<3,i.waitCall=e,i.loadXML(t),i},post:function(t,e,i){var n=new dtmlXMLLoaderObject(!0);return n.async=arguments.length<4,n.waitCall=i,n.loadXML(t,!0,e),n},getSync:function(t){return this.get(t,null,!0)},postSync:function(t,e){return this.post(t,e,null,!0)}},window.dtmlXMLLoaderObject=dtmlXMLLoaderObject,dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(t){var e=!0;return this.check=function(){if(t&&t.onloadAction&&(!t.xmlDoc.readyState||4==t.xmlDoc.readyState)){if(!e)return;e=!1,dtmlXMLLoaderObject.count++,"function"==typeof t.onloadAction&&t.onloadAction(t.mainObject,null,null,null,t),t.waitCall&&(t.waitCall.call(this,t),t.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(t,e){var i;if(this.xmlDoc.responseXML){if(0===(n=this.xmlDoc.responseXML.getElementsByTagName(t)).length&&-1!=t.indexOf(":"))var n=this.xmlDoc.responseXML.getElementsByTagName(t.split(":")[1]);i=n[0]}else i=this.xmlDoc.documentElement;return i?(this._retry=!1,i):!this._retry&&_isIE?(this._retry=!0,e=this.xmlDoc,this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(t,e)):(dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),document.createElement("div"))},dtmlXMLLoaderObject.prototype.loadXMLString=function(t,e){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(t);else{var i=new DOMParser;this.xmlDoc=i.parseFromString(t,"text/xml")}e||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(t,e,i,n){this.rSeed&&(t+=(-1!=t.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=t,this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open("string"==typeof e?e:e?"POST":"GET",t,this.async),n?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):e&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(i),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this._filterXPath=null,this._getAllNamedChilds=null,this._retry=null,this.async=null,this.rSeed=null,this.filePath=null,this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,this.doXPath=null,this.doXPathOpera=null,this.doXSLTransToObject=null,this.doXSLTransToString=null,this.loadXML=null,this.loadXMLString=null,this.doSerialization=null,this.xmlNodeToJSON=null,this.getXMLTopNode=null,this.setXSLParamValue=null,null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;for(e._tagvalue=t.firstChild?t.firstChild.nodeValue:"",i=0;i<t.childNodes.length;i++){var n=t.childNodes[i].tagName;n&&(e[n]||(e[n]=[]),e[n].push(this.xmlNodeToJSON(t.childNodes[i])))}return e},window.dhtmlDragAndDropObject=dhtmlDragAndDropObject,dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){return!t&&!window.event||2!=(t||event).button?window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!t||!t.preventDefault||(t.preventDefault(),1))):void 0},dhtmlDragAndDropObject.prototype.callDrag=function(t){t||(t=window.event);var e=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-e.downtime<100)){if(!e.dragNode){if(!e.waitDrag)return e.stopDrag(t,!0);if(e.dragNode=e.dragStartObject._createDragNode(e.dragStartNode,t),!e.dragNode)return e.stopDrag();e.dragNode.onselectstart=function(){return!1},e.gldragNode=e.dragNode,document.body.appendChild(e.dragNode),document.body.onmouseup=e.stopDrag,e.waitDrag=0,e.dragNode.pWindow=window,e.initFrameRoute()}if(e.dragNode.parentNode!=window.document.body&&e.gldragNode){var i=e.gldragNode;e.gldragNode.old&&(i=e.gldragNode.old),i.parentNode.removeChild(i);var n=e.dragNode.pWindow;if(i.pWindow&&i.pWindow.dhtmlDragAndDrop.lastLanding&&i.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(i.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var r=document.createElement("div");r.innerHTML=e.dragNode.outerHTML,e.dragNode=r.childNodes[0]}else e.dragNode=e.dragNode.cloneNode(!0);e.dragNode.pWindow=window,e.gldragNode.old=e.dragNode,document.body.appendChild(e.dragNode),n.dhtmlDragAndDrop.dragNode=e.dragNode}e.dragNode.style.left=t.clientX+15+(e.fx?-1*e.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",e.dragNode.style.top=t.clientY+3+(e.fy?-1*e.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",e.checkLanding(t.srcElement?t.srcElement:t.target,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,n=0;e;)i+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var r=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*r.split("_")[0],n+=1*r.split("_")[1]}if(t)return i+"_"+n;this.fx=i,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){var i=window.dhtmlDragAndDrop;if(!e){i.stopFrameRoute();var n=i.lastLanding;i.lastLanding=null,n&&n.dragLanding._drag(i.dragStartNode,i.dragStartObject,n,_isIE?event.srcElement:t.target)}i.lastLanding=null,i.dragNode&&i.dragNode.parentNode==document.body&&i.dragNode.parentNode.removeChild(i.dragNode),i.dragNode=0,i.gldragNode=0,i.fx=0,i.fy=0,i.dragStartNode=0,i.dragStartObject=0,document.body.onmouseup=i.tempDOMU,document.body.onmousemove=i.tempDOMM,i.tempDOMU=null,i.tempDOMM=null,i.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(t){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(t){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=t&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(t){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,-1==navigator.appVersion.indexOf("MSIE 8.0")&&-1==navigator.appVersion.indexOf("MSIE 9.0")&&-1==navigator.appVersion.indexOf("MSIE 10.0")||"BackCompat"==document.compatMode||(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(t,e,i,n){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(t,e);if(_isIE)return e||(e=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),e||dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),i&&e.setProperty("SelectionNamespaces","xmlns:xsl='"+i+"'"),"single"==n?e.selectSingleNode(t):e.selectNodes(t)||new Array(0);var r=e;e||(e=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),e||dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),-1!=e.nodeName.indexOf("document")?r=e:(r=e,e=e.ownerDocument);var a=XPathResult.ANY_TYPE;"single"==n&&(a=XPathResult.FIRST_ORDERED_NODE_TYPE);var s=[],o=e.evaluate(t,r,function(t){return i},a,null);if(a==XPathResult.FIRST_ORDERED_NODE_TYPE)return o.singleNodeValue;for(var l=o.iterateNext();l;)s[s.length]=l,l=o.iterateNext();return s},_dhtmlxError.prototype.catchError=function(t,e){this.catches[t]=e},_dhtmlxError.prototype.throwError=function(t,e,i){return this.catches[t]?this.catches[t](t,e,i):this.catches.ALL?this.catches.ALL(t,e,i):(window.alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]),null)},window.dhtmlxError=new _dhtmlxError,dtmlXMLLoaderObject.prototype.doXPathOpera=function(t,e){var i=t.replace(/[\/]+/gi,"/").split("/"),n=null,r=1;if(!i.length)return[];if("."==i[0])n=[e];else{if(""!==i[0])return[];n=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(i[r].replace(/\[[^\]]*\]/g,"")),r++}for(;r<i.length;r++)n=this._getAllNamedChilds(n,i[r]);return-1!=i[r-1].indexOf("[")&&(n=this._filterXPath(n,i[r-1])),n},dtmlXMLLoaderObject.prototype._filterXPath=function(t,e){for(var i=[],n=(e=e.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),0);n<t.length;n++)t[n].getAttribute(e)&&(i[i.length]=t[n]);return i},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(t,e){var i=[];_isKHTML&&(e=e.toUpperCase());for(var n=0;n<t.length;n++)for(var r=0;r<t[n].childNodes.length;r++)_isKHTML?t[n].childNodes[r].tagName&&t[n].childNodes[r].tagName.toUpperCase()==e&&(i[i.length]=t[n].childNodes[r]):t[n].childNodes[r].tagName==e&&(i[i.length]=t[n].childNodes[r]);return i},void 0===window.dhtmlxEvent&&(window.dhtmlxEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}),dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(t,e,i){i||(i=this.xslDoc),i.responseXML&&(i=i.responseXML);var n=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+t+"']",i,"http://www.w3.org/1999/XSL/Transform","single");n&&(n.firstChild.nodeValue=e)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(t,e){var i;if(t||(t=this.xslDoc),t.responseXML&&(t=t.responseXML),e||(e=this.xmlDoc),e.responseXML&&(e=e.responseXML),_isIE){i=new ActiveXObject("Msxml2.DOMDocument.3.0");try{e.transformNodeToObject(t,i)}catch(n){i=e.transformNode(t)}}else this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(t)),i=this.XSLProcessor.transformToDocument(e);return i},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(t,e){var i=this.doXSLTransToObject(t,e);return"string"==typeof i?i:this.doSerialization(i)},dtmlXMLLoaderObject.prototype.doSerialization=function(t){return t||(t=this.xmlDoc),t.responseXML&&(t=t.responseXML),_isIE?t.xml:(new XMLSerializer).serializeToString(t)},dhtmlxEventable=function(obj){obj.attachEvent=function(t,e,i){return this[t="ev_"+t.toLowerCase()]||(this[t]=new this.eventCatcher(i||this)),t+":"+this[t].addEvent(e)},obj.callEvent=function(t,e){return!this[t="ev_"+t.toLowerCase()]||this[t].apply(this,e)},obj.checkEvent=function(t){return!!this["ev_"+t.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var t=!0,e=0;e<dhx_catch.length;e++)if(dhx_catch[e]){var i=dhx_catch[e].apply(obj,arguments);t=t&&i}return t};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),!!ev&&dhx_catch.push(ev)-1},z.removeEvent=function(t){dhx_catch[t]=null},z},obj.detachEvent=function(t){if(t){var e=t.split(":");this[e[0]].removeEvent(e[1])}},obj.detachAllEvents=function(){for(var t in this)0===t.indexOf("ev_")&&(this.detachEvent(t),this[t]=null)},obj=null},window.dhtmlx||(window.dhtmlx={}),function(){function t(t,e){setTimeout(function(){if(t.box){var n=t.callback;i(!1),t.box.parentNode.removeChild(t.box),dhtmlx.callEvent("onAfterMessagePopup",[t.box]),c=t.box=null,n&&n(e)}},1)}function e(e){if(c){var i=(e=e||event).which||event.keyCode,n=!1;if(dhtmlx.message.keyboard){if(13==i||32==i){var r=e.target||e.srcElement;scheduler._getClassName(r).indexOf("dhtmlx_popup_button")>-1&&r.click?r.click():(t(c,!0),n=!0)}27==i&&(t(c,!1),n=!0)}if(n)return e.preventDefault&&e.preventDefault(),!(e.cancelBubble=!0)}}function i(t){i.cover||((i.cover=document.createElement("div")).onkeydown=e,i.cover.className="dhx_modal_cover",document.body.appendChild(i.cover)),document,i.cover.style.display=t?"inline-block":"none"}function n(t,e,i){return"<div "+scheduler._waiAria.messageButtonAttrString(t)+"class='dhtmlx_popup_button dhtmlx_"+(i||t||"").toLowerCase().replace(/ /g,"_")+"_button' result='"+e+"' ><div>"+t+"</div></div>"}function r(e,i,r){var a=document.createElement("div");a.className=" dhtmlx_modal_box dhtmlx-"+e.type,a.setAttribute("dhxbox",1);var s=scheduler.uid();scheduler._waiAria.messageModalAttr(a,s);var o="",l=!1;if(e.width&&(a.style.width=e.width),e.height&&(a.style.height=e.height),e.title&&(o+='<div class="dhtmlx_popup_title" id="'+s+'">'+e.title+"</div>",l=!0),o+='<div class="dhtmlx_popup_text" '+(l?"":' id="'+s+'" ')+"><span>"+(e.content?"":e.text)+'</span></div><div  class="dhtmlx_popup_controls">',i){var d=e.ok||scheduler.locale.labels.message_ok;void 0===d&&(d="OK"),o+=n(d,!0,"ok")}if(r){var h=e.cancel||scheduler.locale.labels.message_cancel;void 0===h&&(h="Cancel"),o+=n(h,!1,"cancel")}if(e.buttons)for(var u=0;u<e.buttons.length;u++)o+=n(e.buttons[u],u);if(a.innerHTML=o+="</div>",e.content){var _=e.content;"string"==typeof _&&(_=document.getElementById(_)),"none"==_.style.display&&(_.style.display=""),a.childNodes[e.title?1:0].appendChild(_)}return a.onclick=function(i){var n=(i=i||event).target||i.srcElement,r=scheduler._getClassName(n);if(r||(n=n.parentNode),"dhtmlx_popup_button"==(r=scheduler._getClassName(n)).split(" ")[0]){var a=n.getAttribute("result");t(e,a="true"==a||"false"!=a&&a)}},e.box=a,c=e,a}function a(t,n,a){var s=t.tagName?t:r(t,n,a);t.hidden||i(!0),document.body.appendChild(s);var o=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-s.offsetWidth)/2)),l=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-s.offsetHeight)/2));return s.style.top="top"==t.position?"-3px":l+"px",s.style.left=o+"px",s.onkeydown=e,dhtmlx.modalbox.focus(s),t.hidden&&dhtmlx.modalbox.hide(s),dhtmlx.callEvent("onMessagePopup",[s]),s}function s(t){return a(t,!0,!1)}function o(t){return a(t,!0,!0)}function l(t){return a(t)}function d(t,e,i){return"object"!=typeof t&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}var c=null;document.attachEvent?document.attachEvent("onkeydown",e):document.addEventListener("keydown",e,!0),dhtmlx.alert=function(){var t=d.apply(this,arguments);return t.type=t.type||"confirm",s(t)},dhtmlx.confirm=function(){var t=d.apply(this,arguments);return t.type=t.type||"alert",o(t)},dhtmlx.modalbox=function(){var t=d.apply(this,arguments);return t.type=t.type||"alert",l(t)},dhtmlx.modalbox.hide=function(t){for(;t&&t.getAttribute&&!t.getAttribute("dhxbox");)t=t.parentNode;t&&(t.parentNode.removeChild(t),i(!1))},dhtmlx.modalbox.focus=function(t){setTimeout(function(){var e=scheduler._getFocusableNodes(t);e.length&&e[0].focus&&e[0].focus()},1)};var h=dhtmlx.message=function(t,e,i,n){switch((t=(function(t,e,i,n){return"object"!=typeof t&&(t={text:t,type:e,expire:i,id:n}),t.id=t.id||h.uid(),t.expire=t.expire||h.expire,t}).apply(this,arguments)).type=t.type||"info",t.type.split("-")[0]){case"alert":return s(t);case"confirm":return o(t);case"modalbox":return l(t);default:return function(t){h.area||(h.area=document.createElement("div"),h.area.className="dhtmlx_message_area",h.area.style[h.position]="5px",document.body.appendChild(h.area)),h.hide(t.id);var e=document.createElement("div");return e.innerHTML="<div>"+t.text+"</div>",e.className="dhtmlx-info dhtmlx-"+t.type,e.onclick=function(){h.hide(t.id),t=null},scheduler._waiAria.messageInfoAttr(e),"bottom"==h.position&&h.area.firstChild?h.area.insertBefore(e,h.area.firstChild):h.area.appendChild(e),t.expire>0&&(h.timers[t.id]=window.setTimeout(function(){h.hide(t.id)},t.expire)),h.pull[t.id]=e,e=null,t.id}(t)}};h.seed=(new Date).valueOf(),h.uid=function(){return h.seed++},h.expire=4e3,h.keyboard=!0,h.position="top",h.pull={},h.timers={},h.hideAll=function(){for(var t in h.pull)h.hide(t)},h.hide=function(t){var e=h.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.className+=" hidden",h.timers[t]&&window.clearTimeout(h.timers[t]),delete h.pull[t])}}(),dhtmlx.attachEvent||dhtmlxEventable(dhtmlx);var dataProcessor=window.dataProcessor=function(t){return this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this};dataProcessor.prototype={setTransactionMode:function(t,e){"object"==typeof t?(this._tMode=t.mode||this._tMode,void 0!==t.headers&&(this._headers=t.headers),void 0!==t.payload&&(this._payload=t.payload)):(this._tMode=t,this._tSend=e),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"==this._tMode&&(this._tSend=!1,this._endnm=!0,this._headers=this._headers||{},this._headers["Content-type"]="application/json")},escape:function(t){return this._utf?encodeURIComponent(t):escape(t)},enableUTFencoding:function(t){this._utf=!!t},setDataColumns:function(t){this._columns="string"==typeof t?t.split(","):t},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(t){this._endnm=!!t},enablePartialDataSend:function(t){this._changed=!!t},setUpdateMode:function(t,e){this.autoUpdate="cell"==t,this.updateMode=t,this.dnd=e},ignore:function(t,e){this._silent_mode=!0,t.call(e||window),this._silent_mode=!1},setUpdated:function(t,e,i){if(!this._silent_mode){var n=this.findRow(t);i=i||"updated";var r=this.obj.getUserData(t,this.action_param);r&&"updated"==i&&(i=r),e?(this.set_invalid(t,!1),this.updatedRows[n]=t,this.obj.setUserData(t,this.action_param,i),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(n,1),this.obj.setUserData(t,this.action_param,"")),e||this._clearUpdateFlag(t),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}},_clearUpdateFlag:function(t){},markRow:function(t,e,i){var n="",r=this.is_invalid(t);if(r&&(n=this.styles[r],e=!0),this.callEvent("onRowMark",[t,e,i,r])&&(this.obj[this._methods[0]](t,n=this.styles[e?i:"clear"]+n),r&&r.details)){n+=this.styles[r+"_cell"];for(var a=0;a<r.details.length;a++)r.details[a]&&this.obj[this._methods[1]](t,a,n)}},getState:function(t){return this.obj.getUserData(t,this.action_param)},is_invalid:function(t){return this._invalid[t]},set_invalid:function(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e},checkBeforeUpdate:function(t){return!0},sendData:function(t){return!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2?(this.obj.editStop&&this.obj.editStop(),void 0===t||this._tSend?this.sendAllData():!this._in_progress[t]&&(this.messages=[],!(!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))&&void this._beforeSendData(this._getRowData(t),t))):void 0},_beforeSendData:function(t,e){return!!this.callEvent("onBeforeUpdate",[e,this.getState(e),t])&&void this._sendData(t,e)},serialize:function(t,e){if("string"==typeof t)return t;if(void 0!==e)return this.serialize_one(t,"");var i=[],n=[];for(var r in t)t.hasOwnProperty(r)&&(i.push(this.serialize_one(t[r],r+this.post_delim)),n.push(r));return i.push("ids="+this.escape(n.join(","))),dhtmlx.security_key&&i.push("dhx_security="+dhtmlx.security_key),i.join("&")},serialize_one:function(t,e){if("string"==typeof t)return t;var i=[];for(var n in t)if(t.hasOwnProperty(n)){if(("id"==n||n==this.action_param)&&"REST"==this._tMode)continue;i.push(this.escape((e||"")+n)+"="+this.escape(t[n]))}return i.join("&")},_applyPayload:function(t){var e=this.obj.$ajax;if(this._payload)for(var i in this._payload)t=t+e.urlSeparator(t)+this.escape(i)+"="+this.escape(this._payload[i]);return t},_sendData:function(t,e){if(t){if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(new Date).valueOf());var i=this,n=function(n){var r=[];if(e)r.push(e);else if(t)for(var a in t)r.push(a);return i.afterUpdate(i,n,r)},r=this.obj.$ajax,a=this.serverProcessor+(this._user?r.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),s=this._applyPayload(a);if("GET"==this._tMode)r.query({url:s+r.urlSeparator(s)+this.serialize(t,e),method:"GET",callback:n,headers:this._headers});else if("POST"==this._tMode)r.query({url:s,method:"POST",headers:this._headers,data:this.serialize(t,e),callback:n});else if("JSON"==this._tMode){var o=t[this.action_param],l={};for(var d in t)l[d]=t[d];delete l[this.action_param],delete l.id,delete l.gr_id,r.query({url:s,method:"POST",headers:this._headers,callback:n,data:JSON.stringify({id:e,action:o,data:l})})}else if("REST"==this._tMode){var c=this.getState(e),h=a.replace(/(\&|\?)editing\=true/,""),u=(l="","post");"inserted"==c?l=this.serialize(t,e):"deleted"==c?(u="DELETE",h=h+("/"==h.slice(-1)?"":"/")+e):(u="PUT",l=this.serialize(t,e),h=h+("/"==h.slice(-1)?"":"/")+e),h=this._applyPayload(h),r.query({url:h,method:u,headers:this._headers,data:l,callback:n})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var t=!0,e=0;e<this.updatedRows.length;e++)t&=this.checkBeforeUpdate(this.updatedRows[e]);if(!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(e=0;e<this.updatedRows.length;e++)if(!this._in_progress[this.updatedRows[e]]){if(this.is_invalid(this.updatedRows[e]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[e]),this.updatedRows[e]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(t){for(var e={},i=!1,n=0;n<this.updatedRows.length;n++){var r=this.updatedRows[n];if(!this._in_progress[r]&&!this.is_invalid(r)){var a=this._getRowData(r);this.callEvent("onBeforeUpdate",[r,this.getState(r),a])&&(e[r]=a,i=!0,this._in_progress[r]=(new Date).valueOf())}}return i?e:null},setVerificator:function(t,e){this.mandatoryFields[t]=e||function(t){return""!==t}},clearVerificator:function(t){this.mandatoryFields[t]=!1},findRow:function(t){var e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e},defineAction:function(t,e){this._uActions||(this._uActions=[]),this._uActions[t]=e},afterUpdateCallback:function(t,e,i,n){var r=t,a="error"!=i&&"invalid"!=i;if(a||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](n))return delete this._in_progress[r];"wait"!=this._in_progress[r]&&this.setUpdated(t,!1);var s=t;switch(i){case"inserted":case"insert":e!=t&&(this.setUpdated(t,!1),this.obj[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":return this.obj.setUserData(t,this.action_param,"true_deleted"),this.obj[this._methods[3]](t),delete this._in_progress[r],this.callEvent("onAfterUpdate",[t,i,e,n])}"wait"!=this._in_progress[r]?(a&&this.obj.setUserData(t,this.action_param,""),delete this._in_progress[r]):(delete this._in_progress[r],this.setUpdated(e,!0,this.obj.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[s,i,e,n])},afterUpdate:function(t,e,i){var n=this.obj.$ajax;if(window.JSON){var r;try{r=JSON.parse(e.xmlDoc.responseText)}catch(t){e.xmlDoc.responseText.length||(r={})}if(r){var a=r.action||this.getState(i)||"updated";return t.afterUpdateCallback(c=r.sid||i[0],h=r.tid||i[0],a,r),void t.finalizeUpdate()}}var s=n.xmltop("data",e.xmlDoc);if(!s)return this.cleanUpdate(i);var o=n.xpath("//data/action",s);if(!o.length)return this.cleanUpdate(i);for(var l=0;l<o.length;l++){var d=o[l],c=(a=d.getAttribute("type"),d.getAttribute("sid")),h=d.getAttribute("tid");t.afterUpdateCallback(c,h,a,d)}t.finalizeUpdate()},cleanUpdate:function(t){if(t)for(var e=0;e<t.length;e++)delete this._in_progress[t[e]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(t){this.obj=t,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(t){this.attachEvent("onAfterUpdate",t)},enableDebug:function(t){},setOnBeforeUpdateHandler:function(t){this.attachEvent("onBeforeDataSending",t)},setAutoUpdate:function(t,e){t=t||2e3,this._user=e||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(t,e,i,n){this.afterAutoUpdate(t,e,i,n)}),this.attachEvent("onFullSync",function(){this.fullSync()});var i=this;window.setInterval(function(){i.loadUpdate()},t)},afterAutoUpdate:function(t,e,i,n){return"collision"!=e||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(t,e){var i=this.obj.$ajax;return!this._update_busy&&(this._update_busy=!0,void i.get(t,e))},_v:function(t){return t.firstChild?t.firstChild.nodeValue:""},_a:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=this._v(t[i]);return e},loadUpdate:function(){var t=this.obj.$ajax,e=this,i=this.obj.getUserData(0,"version"),n=this.serverProcessor+t.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+i].join("&");n=n.replace("editing=true&",""),this.getUpdates(n,function(i){var n=t.xpath("//userdata",i);e.obj.setUserData(0,"version",e._v(n[0]));var r=t.xpath("//update",i);if(r.length){e._silent_mode=!0;for(var a=0;a<r.length;a++){var s=r[a].getAttribute("status"),o=r[a].getAttribute("id"),l=r[a].getAttribute("parent");switch(s){case"inserted":e.callEvent("insertCallback",[r[a],o,l]);break;case"updated":e.callEvent("updateCallback",[r[a],o,l]);break;case"deleted":e.callEvent("deleteCallback",[r[a],o,l])}}e._silent_mode=!1}e._update_busy=!1,e=null})}},window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.init_original=dataProcessor.prototype.init,dataProcessor.prototype.init=function(t){this.init_original(t),t._dataprocessor=this,this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"}),dhtmlxError.catchError("LoadXML",function(t,e,i){var n=i[0].responseText;switch(scheduler.config.ajax_error){case"alert":window.alert(n);break;case"console":window.console.log(n)}}),window.Scheduler={_seed:0},Scheduler.plugin=function(t){this._schedulerPlugins.push(t),t(window.scheduler)},Scheduler._schedulerPlugins=[],Scheduler.getSchedulerInstance=function(){var scheduler={version:"5.0.0"};dhtmlxEventable(scheduler),scheduler._detachDomEvent=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},scheduler._init_once=function(){function t(t){for(var e=document.body;t&&t!=e;)t=t.parentNode;return!(e!=t)}function e(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}}var i=e();dhtmlxEvent(window,"resize",function(){t(scheduler._obj)&&(window.clearTimeout(scheduler._resize_timer),scheduler._resize_timer=window.setTimeout(function(){var n=e();if(i.w!=n.w||i.h!=n.h){if(!t(scheduler._obj))return;scheduler.callEvent("onSchedulerResize",[])&&(scheduler.update_view(),scheduler.callEvent("onAfterSchedulerResize",[]))}i=n},20))}),scheduler._init_once=function(){}},scheduler.init=function(t,e,i){e=e||scheduler._currentDate(),i=i||"week",this._obj&&this.unset_actions(),this._obj="string"==typeof t?document.getElementById(t):t,this.$container=this._obj,this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&this.$container.setAttribute("role","application"),this._skin_init&&scheduler._skin_init(),scheduler.date.init(),this._els=[],this._scroll=!0,this._quirks=_isIE&&"BackCompat"==document.compatMode,this._quirks7=_isIE&&-1==navigator.appVersion.indexOf("MSIE 8"),this.get_elements(),this.init_templates(),this.set_actions(),this._init_once(),this._init_touch_events(),this.set_sizes(),scheduler.callEvent("onSchedulerReady",[]),this.setCurrentView(e,i)},scheduler.xy={min_event_height:40,scale_width:50,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140,month_head_height:22,event_header_height:14},scheduler.keys={edit_save:13,edit_cancel:27},scheduler.set_sizes=function(){var t=this._x=this._obj.clientWidth-this.xy.margin_left,e=this._y=this._obj.clientHeight-this.xy.margin_top,i=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,n=this._table_view?-1:this.xy.scale_width,r=this.$container.querySelector(".dhx_cal_scale_placeholder");scheduler._is_material_skin()?(r||((r=document.createElement("div")).className="dhx_cal_scale_placeholder",this.$container.insertBefore(r,this._els.dhx_cal_header[0])),r.style.display="block",this.set_xy(r,t,this.xy.scale_height+1,0,this.xy.nav_height+(this._quirks?-1:1))):r&&r.parentNode.removeChild(r),this.set_xy(this._els.dhx_cal_navline[0],t,this.xy.nav_height,0,0),this.set_xy(this._els.dhx_cal_header[0],t-i,this.xy.scale_height,n,this.xy.nav_height+(this._quirks?-1:1));var a=this._els.dhx_cal_navline[0].offsetHeight;a>0&&(this.xy.nav_height=a);var s=this.xy.scale_height+this.xy.nav_height+(this._quirks?-2:0);this.set_xy(this._els.dhx_cal_data[0],t,e-(s+2),0,s+2)},scheduler.set_xy=function(t,e,i,n,r){t.style.width=Math.max(0,e)+"px",t.style.height=Math.max(0,i)+"px",arguments.length>3&&(t.style.left=n+"px",t.style.top=r+"px")},scheduler.get_elements=function(){for(var t=this._obj.getElementsByTagName("DIV"),e=0;e<t.length;e++){var i=scheduler._getClassName(t[e]),n=t[e].getAttribute("name")||"";i&&(i=i.split(" ")[0]),this._els[i]||(this._els[i]=[]),this._els[i].push(t[e]);var r=scheduler.locale.labels[n||i];"string"!=typeof r&&n&&!t[e].innerHTML&&(r=n.split("_")[0]),r&&(this._waiAria.labelAttr(t[e],r),t[e].innerHTML=r)}},scheduler.unset_actions=function(){for(var t in this._els)if(this._click[t])for(var e=0;e<this._els[t].length;e++)this._els[t][e].onclick=null;this._obj.onselectstart=null,this._obj.onmousemove=null,this._obj.onmousedown=null,this._obj.onmouseup=null,this._obj.ondblclick=null,this._obj.oncontextmenu=null},scheduler.set_actions=function(){for(var t in this._els)if(this._click[t])for(var e=0;e<this._els[t].length;e++)this._els[t][e].onclick=scheduler._click[t];this._obj.onselectstart=function(t){return!1},this._obj.onmousemove=function(t){scheduler._temp_touch_block||scheduler._on_mouse_move(t||event)},this._obj.onmousedown=function(t){scheduler._ignore_next_click||scheduler._on_mouse_down(t||event)},this._obj.onmouseup=function(t){scheduler._ignore_next_click||scheduler._on_mouse_up(t||event)},this._obj.ondblclick=function(t){scheduler._on_dbl_click(t||event)},this._obj.oncontextmenu=function(t){var e=t||event;return scheduler.callEvent("onContextMenu",[scheduler._locate_event(e.target||e.srcElement),e])}},scheduler.select=function(t){this._select_id!=t&&(scheduler._close_not_saved(),this.editStop(!1),this.unselect(),this._select_id=t,this.updateEvent(t))},scheduler.unselect=function(t){if(!t||t==this._select_id){var e=this._select_id;this._select_id=null,e&&this.getEvent(e)&&this.updateEvent(e)}},scheduler.getState=function(){return{mode:this._mode,date:new Date(this._date),min_date:new Date(this._min_date),max_date:new Date(this._max_date),editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event,select_id:this._select_id,expanded:this.expanded,drag_id:this._drag_id,drag_mode:this._drag_mode}},scheduler._click={dhx_cal_data:function(t){if(scheduler._ignore_next_click)return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,scheduler._ignore_next_click=!1,!1;var e=t?t.target:event.srcElement,i=scheduler._locate_event(e);if(t=t||event,i){if(!scheduler.callEvent("onClick",[i,t])||scheduler.config.readonly)return}else scheduler.callEvent("onEmptyClick",[scheduler.getActionData(t).date,t]);if(i&&scheduler.config.select){scheduler.select(i);var n=scheduler._getClassName(e);-1!=n.indexOf("_icon")&&scheduler._click.buttons[n.split(" ")[1].replace("icon_","")](i)}else scheduler._close_not_saved(),(new Date).valueOf()-(scheduler._new_event||0)>500&&scheduler.unselect()},dhx_cal_prev_button:function(){scheduler._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(t,e){scheduler.setCurrentView(scheduler.date.add(scheduler.date[scheduler._mode+"_start"](scheduler._date),e||1,scheduler._mode))},dhx_cal_today_button:function(){scheduler.callEvent("onBeforeTodayDisplayed",[])&&scheduler.setCurrentView(scheduler._currentDate())},dhx_cal_tab:function(){var t=this.getAttribute("name"),e=t.substring(0,t.search("_tab"));scheduler.setCurrentView(scheduler._date,e)},buttons:{delete:function(t){scheduler._dhtmlx_confirm(scheduler.locale.labels.confirm_deleting,scheduler.locale.labels.title_confirm_deleting,function(){scheduler.deleteEvent(t)})},edit:function(t){scheduler.edit(t)},save:function(t){scheduler.editStop(!0)},details:function(t){scheduler.showLightbox(t)},cancel:function(t){scheduler.editStop(!1)}}},scheduler._dhtmlx_confirm=function(t,e,i){if(!t)return i();var n={text:t};e&&(n.title=e),i&&(n.callback=function(t){t&&i()}),dhtmlx.confirm(n)},scheduler.addEventNow=function(t,e,i){var n={};scheduler._isObject(t)&&!scheduler._isDate(t)&&(n=t,t=null);var r=6e4*(this.config.event_duration||this.config.time_step);t||(t=n.start_date||Math.round(scheduler._currentDate().valueOf()/r)*r);var a=new Date(t);if(!e){var s=this.config.first_hour;s>a.getHours()&&(a.setHours(s),t=a.valueOf()),e=t.valueOf()+r}var o=new Date(e);a.valueOf()==o.valueOf()&&o.setTime(o.valueOf()+r),n.start_date=n.start_date||a,n.end_date=n.end_date||o,n.text=n.text||this.locale.labels.new_event,n.id=this._drag_id=n.id||this.uid(),this._drag_mode="new-size",this._loading=!0;var l=this.addEvent(n);return this.callEvent("onEventCreated",[this._drag_id,i]),this._loading=!1,this._drag_event={},this._on_mouse_up(i),l},scheduler._on_dbl_click=function(t,e){if(e=e||t.target||t.srcElement,!this.config.readonly){var i=scheduler._getClassName(e).split(" ")[0];switch(i){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!scheduler.config.dblclick_create)break;this.addEventNow(this.getActionData(t).date,null,t);break;case"dhx_cal_event":case"dhx_wa_ev_body":case"dhx_agenda_line":case"dhx_grid_event":case"dhx_cal_event_line":case"dhx_cal_event_clear":var n=this._locate_event(e);if(!this.callEvent("onDblClick",[n,t]))return;this.config.details_on_dblclick||this._table_view||!this.getEvent(n)._timed||!this.config.select?this.showLightbox(n):this.edit(n);break;case"dhx_time_block":case"dhx_cal_container":return;default:var r=this["dblclick_"+i];if(r)r.call(this,t);else if(e.parentNode&&e!=this)return scheduler._on_dbl_click(t,e.parentNode)}}},scheduler._get_column_index=function(t){var e=0;if(this._cols){for(var i=0,n=0;i+this._cols[n]<t&&n<this._cols.length;)i+=this._cols[n],n++;if(e=n+(this._cols[n]?(t-i)/this._cols[n]:0),this._ignores&&e>=this._cols.length)for(;e>=1&&this._ignores[Math.floor(e)];)e--}return e},scheduler._week_indexes_from_pos=function(t){if(this._cols){var e=this._get_column_index(t.x);return t.x=Math.min(this._cols.length-1,Math.max(0,Math.ceil(e)-1)),t.y=Math.max(0,Math.ceil(60*t.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step),t}return t},scheduler._mouse_coords=function(t){var e,i=document.body,n=document.documentElement;(e=_isIE||!t.pageX&&!t.pageY?{x:t.clientX+(i.scrollLeft||n.scrollLeft||0)-i.clientLeft,y:t.clientY+(i.scrollTop||n.scrollTop||0)-i.clientTop}:{x:t.pageX,y:t.pageY}).x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width),e.y-=this.$domHelpers.getAbsoluteTop(this._obj)+this.xy.nav_height+(this._dy_shift||0)+this.xy.scale_height-this._els.dhx_cal_data[0].scrollTop,e.ev=t;var r=this["mouse_"+this._mode];if(r)e=r.call(this,e);else if(this._table_view){var a=this._get_column_index(e.x);if(!this._cols||!this._colsS)return e;var s=0;for(s=1;s<this._colsS.heights.length&&!(this._colsS.heights[s]>e.y);s++);e.y=Math.ceil(24*(Math.max(0,a)+7*Math.max(0,s-1))*60/this.config.time_step),(scheduler._drag_mode||"month"==this._mode)&&(e.y=24*(Math.max(0,Math.ceil(a)-1)+7*Math.max(0,s-1))*60/this.config.time_step),"move"==this._drag_mode&&scheduler._ignores_detected&&scheduler.config.preserve_length&&(e._ignores=!0,this._drag_event._event_length||(this._drag_event._event_length=this._get_real_event_length(this._drag_event.start_date,this._drag_event.end_date,{x_step:1,x_unit:"day"}))),e.x=0}else e=this._week_indexes_from_pos(e);return e.timestamp=+new Date,e},scheduler._close_not_saved=function(){if((new Date).valueOf()-(scheduler._new_event||0)>500&&scheduler._edit_id){var t=scheduler.locale.labels.confirm_closing;scheduler._dhtmlx_confirm(t,scheduler.locale.labels.title_confirm_closing,function(){scheduler.editStop(scheduler.config.positive_closing)}),t&&(this._drag_id=this._drag_pos=this._drag_mode=null)}},scheduler._correct_shift=function(t,e){return t-6e4*(new Date(scheduler._min_date).getTimezoneOffset()-new Date(t).getTimezoneOffset())*(e?-1:1)},scheduler._is_pos_changed=function(t,e){function i(t,e,i){return!!(Math.abs(t-e)>i)}return!t||!this._drag_pos||!!(this._drag_pos.has_moved||!this._drag_pos.timestamp||e.timestamp-this._drag_pos.timestamp>100||i(t.ev.clientX,e.ev.clientX,5)||i(t.ev.clientY,e.ev.clientY,5))},scheduler._correct_drag_start_date=function(t){var e;scheduler.matrix&&(e=scheduler.matrix[scheduler._mode]),e=e||{x_step:1,x_unit:"day"},t=new Date(t);var i=1;return(e._start_correction||e._end_correction)&&(i=60*(e.last_hour||0)-(60*t.getHours()+t.getMinutes())||1),1*t+(scheduler._get_fictional_event_length(t,i,e)-i)},scheduler._correct_drag_end_date=function(t,e){var i;scheduler.matrix&&(i=scheduler.matrix[scheduler._mode]);var n=1*t+scheduler._get_fictional_event_length(t,e,i=i||{x_step:1,x_unit:"day"});return new Date(1*n-(scheduler._get_fictional_event_length(n,-1,i,-1)+1))},scheduler._on_mouse_move=function(t){if(this._drag_mode){var e=this._mouse_coords(t);if(this._is_pos_changed(this._drag_pos,e)){var i,n;if(this._edit_id!=this._drag_id&&this._close_not_saved(),!this._drag_mode)return;var r=null;if(this._drag_pos&&!this._drag_pos.has_moved&&((r=this._drag_pos).has_moved=!0),this._drag_pos=e,this._drag_pos.has_moved=!0,"create"==this._drag_mode){if(r&&(e=r),this._close_not_saved(),this.unselect(this._select_id),this._loading=!0,i=this._get_date_from_pos(e).valueOf(),!this._drag_start)return this.callEvent("onBeforeEventCreated",[t,this._drag_id])?(this._loading=!1,void(this._drag_start=i)):void(this._loading=!1);n=i;var a=new Date(this._drag_start),s=new Date(n);"day"!=this._mode&&"week"!=this._mode||a.getHours()!=s.getHours()||a.getMinutes()!=s.getMinutes()||(s=new Date(this._drag_start+1e3)),this._drag_id=this.uid(),this.addEvent(a,s,this.locale.labels.new_event,this._drag_id,e.fields),this.callEvent("onEventCreated",[this._drag_id,t]),this._loading=!1,this._drag_mode="new-size"}var o,l=this.getEvent(this._drag_id);if(scheduler.matrix&&(o=scheduler.matrix[scheduler._mode]),o=o||{x_step:1,x_unit:"day"},"move"==this._drag_mode)i=this._min_date.valueOf()+6e4*(e.y*this.config.time_step+24*e.x*60-(scheduler._move_pos_shift||0)),!e.custom&&this._table_view&&(i+=1e3*this.date.time_part(l.start_date)),i=this._correct_shift(i),e._ignores&&this.config.preserve_length&&this._table_view?(i=scheduler._correct_drag_start_date(i),n=scheduler._correct_drag_end_date(i,this._drag_event._event_length)):n=l.end_date.valueOf()-(l.start_date.valueOf()-i);else{if(i=l.start_date.valueOf(),n=l.end_date.valueOf(),this._table_view){var d=this._min_date.valueOf()+e.y*this.config.time_step*6e4+(e.custom?0:864e5);if("month"==this._mode)if(d=this._correct_shift(d,!1),this._drag_from_start){var c=864e5;d<=scheduler.date.date_part(new Date(n+c-1)).valueOf()&&(i=d-c)}else n=d;else this.config.preserve_length?e.resize_from_start?i=scheduler._correct_drag_start_date(d):n=scheduler._correct_drag_end_date(d,0):e.resize_from_start?i=d:n=d}else{var h=this.date.date_part(new Date(l.end_date.valueOf()-1)).valueOf(),u=new Date(h);n=h+e.y*this.config.time_step*6e4,n+=6e4*(new Date(n).getTimezoneOffset()-u.getTimezoneOffset()),this._els.dhx_cal_data[0].style.cursor="s-resize",("week"==this._mode||"day"==this._mode)&&(n=this._correct_shift(n))}if("new-size"==this._drag_mode)if(n<=this._drag_start){var _=e.shift||(this._table_view&&!e.custom?864e5:0);i=n-(e.shift?0:_),n=this._drag_start+(_||6e4*this.config.time_step)}else i=this._drag_start;else i>=n&&(n=i+6e4*this.config.time_step)}var f=new Date(n-1),g=new Date(i);if("move"==this._drag_mode&&scheduler.config.limit_drag_out&&(+g<+scheduler._min_date||+n>+scheduler._max_date)){if(+l.start_date<+scheduler._min_date||+l.end_date>+scheduler._max_date)g=new Date(l.start_date),n=new Date(l.end_date);else{var p=n-g;+g<+scheduler._min_date?(g=new Date(scheduler._min_date),e._ignores&&this.config.preserve_length&&this._table_view?(g=new Date(scheduler._correct_drag_start_date(g)),o._start_correction&&(g=new Date(g.valueOf()+o._start_correction)),n=new Date(1*g+this._get_fictional_event_length(g,this._drag_event._event_length,o))):n=new Date(+g+p)):(n=new Date(scheduler._max_date),e._ignores&&this.config.preserve_length&&this._table_view?(o._end_correction&&(n=new Date(n.valueOf()-o._end_correction)),n=new Date(1*n-this._get_fictional_event_length(n,0,o,!0)),g=new Date(1*n-this._get_fictional_event_length(n,this._drag_event._event_length,o,!0)),this._ignores_detected&&(g=scheduler.date.add(g,o.x_step,o.x_unit),n=new Date(1*n-this._get_fictional_event_length(n,0,o,!0)),n=scheduler.date.add(n,o.x_step,o.x_unit))):g=new Date(+n-p))}f=new Date(n-1)}if(this._table_view||scheduler.config.all_timed||!(!scheduler._get_section_view()&&e.x!=this._get_event_sday({start_date:new Date(n),end_date:new Date(n)})||new Date(n).getHours()>=this.config.last_hour)||(p=n-g,c=this._min_date.valueOf()+24*e.x*60*6e4,(n=scheduler.date.date_part(new Date(c))).setHours(this.config.last_hour),f=new Date(n-1),"move"==this._drag_mode&&(g=new Date(+n-p))),this._table_view||f.getDate()==g.getDate()&&f.getHours()<this.config.last_hour||scheduler._allow_dnd)if(l.start_date=g,l.end_date=new Date(n),this.config.update_render){var v=scheduler._els.dhx_cal_data[0].scrollTop;this.update_view(),scheduler._els.dhx_cal_data[0].scrollTop=v}else this.updateEvent(this._drag_id);this._table_view&&this.for_rendered(this._drag_id,function(t){t.className+=" dhx_in_move dhx_cal_event_drag"}),this.callEvent("onEventDrag",[this._drag_id,this._drag_mode,t])}}else if(scheduler.checkEvent("onMouseMove")){var m=this._locate_event(t.target||t.srcElement);this.callEvent("onMouseMove",[m,t])}},scheduler._on_mouse_down=function(t,e){if(2!=t.button&&!this.config.readonly&&!this._drag_mode){var i=scheduler._getClassName(e=e||t.target||t.srcElement).split(" ")[0];switch(i){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_event_move":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_event_resize":this._drag_mode="resize";var n=scheduler._getClassName(e);scheduler._drag_from_start=n.indexOf("dhx_event_resize_end")<0;break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":case"dhx_marked_timespan":this._drag_mode="create";break;case"":if(e.parentNode)return scheduler._on_mouse_down(t,e.parentNode);break;default:if((!scheduler.checkEvent("onMouseDown")||scheduler.callEvent("onMouseDown",[i,t]))&&e.parentNode&&e!=this&&"dhx_body"!=i)return scheduler._on_mouse_down(t,e.parentNode);this._drag_mode=null,this._drag_id=null}if(this._drag_mode){var r=this._locate_event(e);if(this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[r,this._drag_mode,t])){if(this._drag_id=r,(this._edit_id!=this._drag_id||this._edit_id&&"create"==this._drag_mode)&&this._close_not_saved(),!this._drag_mode)return;this._drag_event=scheduler._lame_clone(this.getEvent(this._drag_id)||{}),this._drag_pos=this._mouse_coords(t)}else this._drag_mode=this._drag_id=0}this._drag_start=null}},scheduler._get_private_properties=function(t){var e={};for(var i in t)0===i.indexOf("_")&&(e[i]=!0);return e},scheduler._clear_temporary_properties=function(t,e){var i=this._get_private_properties(t),n=this._get_private_properties(e);for(var r in n)i[r]||delete e[r]},scheduler._on_mouse_up=function(t){if(!t||2!=t.button||!this._mobile){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var e=this._drag_id,i=this._drag_mode,n=!this._drag_pos||this._drag_pos.has_moved,r=this.getEvent(this._drag_id);if(n&&(this._drag_event._dhx_changed||!this._drag_event.start_date||r.start_date.valueOf()!=this._drag_event.start_date.valueOf()||r.end_date.valueOf()!=this._drag_event.end_date.valueOf())){var a="new-size"==this._drag_mode;if(this.callEvent("onBeforeEventChanged",[r,t,a,this._drag_event]))if(this._drag_id=this._drag_mode=null,a&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create||!this.config.select||!this.isOneDayEvent(this.getEvent(e)))return scheduler.callEvent("onDragEnd",[e,i,t]),this.showLightbox(e);this._drag_pos=!0,this._select_id=this._edit_id=e}else this._new_event||this.callEvent(a?"onEventAdded":"onEventChanged",[e,this.getEvent(e)]);else a?this.deleteEvent(r.id,!0):(this._drag_event._dhx_changed=!1,this._clear_temporary_properties(r,this._drag_event),scheduler._lame_copy(r,this._drag_event),this.updateEvent(r.id))}this._drag_pos&&(this._drag_pos.has_moved||!0===this._drag_pos)&&(this._drag_id=this._drag_mode=null,this.render_view_data()),scheduler.callEvent("onDragEnd",[e,i,t])}this._drag_id=null,this._drag_mode=null,this._drag_pos=null}},scheduler._trigger_dyn_loading=function(){return!(!this._load_mode||!this._load()||(this._render_wait=!0,0))},scheduler.update_view=function(){this._reset_ignores();var t=this[this._mode+"_view"];return t?t(!0):this._reset_scale(),!!this._trigger_dyn_loading()||void this.render_view_data()},scheduler.isViewExists=function(t){return!!(scheduler[t+"_view"]||scheduler.date[t+"_start"]&&scheduler.templates[t+"_date"]&&scheduler.templates[t+"_scale_date"])},scheduler._set_aria_buttons_attrs=function(){for(var t=["dhx_cal_next_button","dhx_cal_prev_button","dhx_cal_tab","dhx_cal_today_button"],e=0;e<t.length;e++)for(var i=this._els[t[e]],n=0;i&&n<i.length;n++){var r=i[n].getAttribute("name"),a=this.locale.labels[t[e]];r&&(a=this.locale.labels[r]||a),"dhx_cal_next_button"==t[e]?a=this.locale.labels.next:"dhx_cal_prev_button"==t[e]&&(a=this.locale.labels.prev),this._waiAria.headerButtonsAttributes(i[n],a||"")}},scheduler.updateView=function(t,e){t=t||this._date;var i="dhx_cal_data",n=this._obj,r="dhx_scheduler_"+this._mode,a="dhx_scheduler_"+(e=e||this._mode);this._mode&&-1!=n.className.indexOf(r)?n.className=n.className.replace(r,a):n.className+=" "+a;var s,o="dhx_multi_day",l=!(this._mode!=e||!this.config.preserve_scroll)&&this._els[i][0].scrollTop;this._els[o]&&this._els[o][0]&&(s=this._els[o][0].scrollTop),this[this._mode+"_view"]&&e&&this._mode!=e&&this[this._mode+"_view"](!1),this._close_not_saved(),this._els[o]&&(this._els[o][0].parentNode.removeChild(this._els[o][0]),this._els[o]=null),this._mode=e,this._date=t,this._table_view="month"==this._mode,this._dy_shift=0,this._set_aria_buttons_attrs();var d=this._els.dhx_cal_tab;if(d)for(var c=0;c<d.length;c++){var h=d[c],u=h.className;u=u.replace(/ active/g,""),h.getAttribute("name")==this._mode+"_tab"?(u+=" active",this._waiAria.headerToggleState(h,!0)):this._waiAria.headerToggleState(h,!1),h.className=u}this.update_view(),"number"==typeof l&&(this._els[i][0].scrollTop=l),"number"==typeof s&&this._els[o]&&this._els[o][0]&&(this._els[o][0].scrollTop=s)},scheduler.setCurrentView=function(t,e){this.callEvent("onBeforeViewChange",[this._mode,this._date,e||this._mode,t||this._date])&&(this.updateView(t,e),this.callEvent("onViewChange",[this._mode,this._date]))},scheduler._render_x_header=function(t,e,i,n,r){r=r||0;var a=document.createElement("div");a.className="dhx_scale_bar",this.templates[this._mode+"_scalex_class"]&&(a.className+=" "+this.templates[this._mode+"_scalex_class"](i));var s=this._cols[t]-1;"month"==this._mode&&0===t&&this.config.left_border&&(a.className+=" dhx_scale_bar_border",e+=1),this.set_xy(a,s,this.xy.scale_height-2,e,r);var o=this.templates[this._mode+"_scale_date"](i,this._mode);a.innerHTML=o,this._waiAria.dayHeaderAttr(a,o),n.appendChild(a)},scheduler._get_columns_num=function(t,e){var i=7;if(!scheduler._table_view){var n=scheduler.date["get_"+scheduler._mode+"_end"];n&&(e=n(t)),i=Math.round((e.valueOf()-t.valueOf())/864e5)}return i},scheduler._get_timeunit_start=function(){return this.date[this._mode+"_start"](new Date(this._date.valueOf()))},scheduler._get_view_end=function(){var t=this._get_timeunit_start(),e=scheduler.date.add(t,1,this._mode);if(!scheduler._table_view){var i=scheduler.date["get_"+scheduler._mode+"_end"];i&&(e=i(t))}return e},scheduler._calc_scale_sizes=function(t,e,i){var n=t,r=this._get_columns_num(e,i);this._process_ignores(e,r,"day",1);for(var a=r-this._ignores_detected,s=0;r>s;s++)this._ignores[s]?(this._cols[s]=0,a++):this._cols[s]=Math.floor(n/(a-s)),n-=this._cols[s],this._colsS[s]=(this._cols[s-1]||0)+(this._colsS[s-1]||(this._table_view?0:this.xy.scale_width+2));this._colsS.col_length=r,this._colsS[r]=this._cols[r-1]+this._colsS[r-1]||0},scheduler._set_scale_col_size=function(t,e,i){var n=this.config;this.set_xy(t,e-1,n.hour_size_px*(n.last_hour-n.first_hour),i+this.xy.scale_width+1,0)},scheduler._render_scales=function(t,e){var i=new Date(scheduler._min_date),n=new Date(scheduler._max_date),r=this.date.date_part(scheduler._currentDate()),a=parseInt(t.style.width,10),s=new Date(this._min_date),o=this._get_columns_num(i,n);this._calc_scale_sizes(a,i,n);var l=0;t.innerHTML="";for(var d=0;o>d;d++){if(this._ignores[d]||this._render_x_header(d,l,s,t),!this._table_view){var c=document.createElement("div"),h="dhx_scale_holder";s.valueOf()==r.valueOf()&&(h="dhx_scale_holder_now"),this._ignores_detected&&this._ignores[d]&&(h+=" dhx_scale_ignore"),c.className=h+" "+this.templates.week_date_class(s,r),this._waiAria.dayColumnAttr(c,s),this._set_scale_col_size(c,this._cols[d],l),e.appendChild(c),this.callEvent("onScaleAdd",[c,s])}l+=this._cols[d],s=this.date.add(s,1,"day"),s=this.date.day_start(s)}},scheduler._reset_scale=function(){if(this.templates[this._mode+"_date"]){var t=this._els.dhx_cal_header[0],e=this._els.dhx_cal_data[0],i=this.config;t.innerHTML="",e.innerHTML="",e.className="dhx_cal_data"+(i.readonly||!i.drag_resize?" dhx_resize_denied":"")+(i.readonly||!i.drag_move?" dhx_move_denied":""),this._scales={},this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var n,r,a=this._get_timeunit_start(),s=scheduler._get_view_end();n=r=this._table_view?scheduler.date.week_start(a):a,this._min_date=n;var o=this.templates[this._mode+"_date"](a,s,this._mode);if(this._els.dhx_cal_date[0].innerHTML=o,this._waiAria.navBarDateAttr(this._els.dhx_cal_date[0],o),this._max_date=s,scheduler._render_scales(t,e),this._table_view)this._reset_month_scale(e,a,r);else if(this._reset_hours_scale(e,a,r),i.multi_day){var l="dhx_multi_day";this._els[l]&&(this._els[l][0].parentNode.removeChild(this._els[l][0]),this._els[l]=null);var d=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+1,c=document.createElement("div");c.className=l,c.style.visibility="hidden",this.set_xy(c,Math.max(this._colsS[this._colsS.col_length]+this.xy.scroll_width-2,0),0,0,d),e.parentNode.insertBefore(c,e);var h=c.cloneNode(!0);h.className=l+"_icon",h.style.visibility="hidden",this.set_xy(h,this.xy.scale_width,0,0,d),c.appendChild(h),this._els[l]=[c,h],this._els[l][0].onclick=this._click.dhx_cal_data}}},scheduler._reset_hours_scale=function(t,e,i){var n=document.createElement("div");n.className="dhx_scale_holder";for(var r=new Date(1980,1,1,this.config.first_hour,0,0),a=1*this.config.first_hour;a<this.config.last_hour;a++){var s=document.createElement("div");s.className="dhx_scale_hour",s.style.height=this.config.hour_size_px+"px";var o=this.xy.scale_width;this.config.left_border&&(s.className+=" dhx_scale_hour_border"),s.style.width=o+"px";var l=scheduler.templates.hour_scale(r);s.innerHTML=l,this._waiAria.hourScaleAttr(s,l),n.appendChild(s),r=this.date.add(r,1,"hour")}t.appendChild(n),this.config.scroll_hour&&(t.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},scheduler._currentDate=function(){return scheduler.config.now_date?new Date(scheduler.config.now_date):new Date},scheduler._reset_ignores=function(){this._ignores={},this._ignores_detected=0},scheduler._process_ignores=function(t,e,i,n,r){this._reset_ignores();var a=scheduler["ignore_"+this._mode];if(a)for(var s=new Date(t),o=0;e>o;o++)a(s)&&(this._ignores_detected+=1,this._ignores[o]=!0,r&&e++),s=scheduler.date.add(s,n,i),scheduler.date[i+"_start"]&&(s=scheduler.date[i+"_start"](s))},scheduler._render_month_scale=function(t,e,i,n){function r(t){var e=scheduler._colsS.height;return void 0!==scheduler._colsS.heights[t+1]&&(e=scheduler._colsS.heights[t+1]-(scheduler._colsS.heights[t]||0)),e}var a=scheduler.date.add(e,1,"month"),s=new Date(i),o=scheduler._currentDate();this.date.date_part(o),this.date.date_part(i),n=n||Math.ceil(Math.round((a.valueOf()-i.valueOf())/864e5)/7);for(var l=[],d=0;7>=d;d++){var c=(this._cols[d]||0)-1;0===d&&this.config.left_border&&(c-=1),l[d]=c+"px"}var h=0,u=document.createElement("table");u.setAttribute("cellpadding","0"),u.setAttribute("cellspacing","0");var _=document.createElement("tbody");u.appendChild(_);var f=[];for(d=0;n>d;d++){var g=document.createElement("tr");_.appendChild(g);for(var p=Math.max(r(d)-scheduler.xy.month_head_height,0),v=0;7>v;v++){var m=document.createElement("td");g.appendChild(m);var y="";e>i?y="dhx_before":i>=a?y="dhx_after":i.valueOf()==o.valueOf()&&(y="dhx_now"),this._ignores_detected&&this._ignores[v]&&(y+=" dhx_scale_ignore"),m.className=y+" "+this.templates.month_date_class(i,o);var x="dhx_month_body",b="dhx_month_head";if(0===v&&this.config.left_border&&(x+=" dhx_month_body_border",b+=" dhx_month_head_border"),this._ignores_detected&&this._ignores[v])m.appendChild(document.createElement("div")),m.appendChild(document.createElement("div"));else{this._waiAria.monthCellAttr(m,i);var w=document.createElement("div");w.className=b,w.innerHTML=this.templates.month_day(i),m.appendChild(w);var k=document.createElement("div");k.className=x,k.style.height=p+"px",k.style.width=l[v],m.appendChild(k)}f.push(i);var $=i.getDate();(i=this.date.add(i,1,"day")).getDate()-$>1&&(i=new Date(i.getFullYear(),i.getMonth(),$+1,12,0))}scheduler._colsS.heights[d]=h,h+=r(d)}this._min_date=s,this._max_date=i,t.innerHTML="",t.appendChild(u),this._scales={};var S=t.getElementsByTagName("div");for(d=0;d<f.length;d++)this._scales[+(E=f[d])]=t=S[2*d+1];for(d=0;d<f.length;d++){var E;this.callEvent("onScaleAdd",[this._scales[+(E=f[d])],E])}return this._max_date},scheduler._reset_month_scale=function(t,e,i,n){var r=scheduler.date.add(e,1,"month"),a=scheduler._currentDate();this.date.date_part(a),this.date.date_part(i),n=n||Math.ceil(Math.round((r.valueOf()-i.valueOf())/864e5)/7);var s=Math.floor(t.clientHeight/n)-this.xy.month_head_height;return this._colsS.height=s+this.xy.month_head_height,this._colsS.heights=[],scheduler._render_month_scale(t,e,i,n)},scheduler.getLabel=function(t,e){for(var i=this.config.lightbox.sections,n=0;n<i.length;n++)if(i[n].map_to==t)for(var r=i[n].options,a=0;a<r.length;a++)if(r[a].key==e)return r[a].label;return""},scheduler.updateCollection=function(t,e){var i=scheduler.serverList(t);return!!i&&(i.splice(0,i.length),i.push.apply(i,e||[]),scheduler.callEvent("onOptionsLoad",[]),scheduler.resetLightbox(),!0)},scheduler._lame_clone=function(t,e){var i,n,r;for(e=e||[],i=0;i<e.length;i+=2)if(t===e[i])return e[i+1];if(t&&"object"==typeof t){for(r={},n=[Array,Date,Number,String,Boolean],i=0;i<n.length;i++)t instanceof n[i]&&(r=i?new n[i](t):new n[i]);for(i in e.push(t,r),t)Object.prototype.hasOwnProperty.apply(t,[i])&&(r[i]=scheduler._lame_clone(t[i],e))}return r||t},scheduler._lame_copy=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},scheduler._get_date_from_pos=function(t){var e=this._min_date.valueOf()+6e4*(t.y*this.config.time_step+24*(this._table_view?0:t.x)*60);return new Date(this._correct_shift(e))},scheduler.getActionData=function(t){var e=this._mouse_coords(t);return{date:this._get_date_from_pos(e),section:e.section}},scheduler._focus=function(t,e){if(t&&t.focus)if(this._mobile)window.setTimeout(function(){t.focus()},10);else try{e&&t.select&&t.offsetWidth&&t.select(),t.focus()}catch(t){}},scheduler._get_real_event_length=function(t,e,i){var n,r=e-t,a=i._start_correction+i._end_correction||0,s=this["ignore_"+this._mode],o=0;i.render?(o=this._get_date_index(i,t),n=this._get_date_index(i,e)):n=Math.round(r/60/60/1e3/24);for(var l=!0;n>o;){var d=scheduler.date.add(e,-i.x_step,i.x_unit);s&&s(e)&&(!l||l&&s(d))?r-=e-d:(l=!1,r-=a),e=d,n--}return r},scheduler._get_fictional_event_length=function(t,e,i,n){var r=new Date(t),a=n?-1:1;if(i._start_correction||i._end_correction){var s;s=n?60*r.getHours()+r.getMinutes()-60*(i.first_hour||0):60*(i.last_hour||0)-(60*r.getHours()+r.getMinutes());var o=60*(i.last_hour-i.first_hour),l=Math.ceil((e/6e4-s)/o);0>l&&(l=0),e+=l*(1440-o)*60*1e3}var d,c=new Date(1*t+e*a),h=this["ignore_"+this._mode],u=0;for(i.render?(u=this._get_date_index(i,r),d=this._get_date_index(i,c)):d=Math.round(e/60/60/1e3/24);d*a>=u*a;){var _=scheduler.date.add(r,i.x_step*a,i.x_unit);h&&h(r)&&(e+=(_-r)*a,d+=a),r=_,u+=a}return e},scheduler._get_section_view=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode]:this._props&&this._props[this._mode]?this._props[this._mode]:null},scheduler._get_section_property=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode].y_property:this._props&&this._props[this._mode]?this._props[this._mode].map_to:null},scheduler._is_initialized=function(){var t=this.getState();return this._obj&&t.date&&t.mode},scheduler._is_lightbox_open=function(){var t=this.getState();return null!==t.lightbox_id&&void 0!==t.lightbox_id},scheduler._getClassName=function(t){if(!t)return"";var e=t.className||"";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=""),e||""},scheduler.event=window.dhtmlxEvent,scheduler.eventRemove=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent&&t.detachEvent("on"+e,i)},function(){function t(t){var e=!1,i=!1;if(window.getComputedStyle){var n=window.getComputedStyle(t,null);e=n.display,i=n.visibility}else t.currentStyle&&(e=t.currentStyle.display,i=t.currentStyle.visibility);var r=!1,a=scheduler._locate_css({target:t},"dhx_form_repeat",!1);return a&&(r=!("0px"!=a.style.height)),r=r||!t.offsetHeight,"none"!=e&&"hidden"!=i&&!r}function e(t){return!isNaN(t.getAttribute("tabindex"))&&1*t.getAttribute("tabindex")>=0}function i(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function n(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}scheduler._getFocusableNodes=function(r){for(var a=r.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),s=Array.prototype.slice.call(a,0),o=0;o<s.length;o++){var l=s[o];(e(l)||n(l)||i(l))&&t(l)||(s.splice(o,1),o--)}return s}}(),scheduler._trim=function(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)},scheduler._isDate=function(t){return!(!t||"object"!=typeof t||!(t.getFullYear&&t.getMonth&&t.getDate))},scheduler._isObject=function(t){return t&&"object"==typeof t},function(){function t(t){return(t+"").replace(i," ").replace(n," ")}function e(t){return(t+"").replace(r,"&#39;")}var i=new RegExp("<(?:.|\n)*?>","gm"),n=new RegExp(" +","gm"),r=new RegExp("'","gm");for(var a in scheduler._waiAria={getAttributeString:function(i){var n=[" "];for(var r in i)if("function"!=typeof i[r]&&"object"!=typeof i[r]){var a=e(t(i[r]));n.push(r+"='"+a+"'")}return n.push(" "),n.join(" ")},setAttributes:function(e,i){for(var n in i)e.setAttribute(n,t(i[n]));return e},labelAttr:function(t,e){return this.setAttributes(t,{"aria-label":e})},label:function(t){return scheduler._waiAria.getAttributeString({"aria-label":t})},hourScaleAttr:function(t,e){this.labelAttr(t,e)},monthCellAttr:function(t,e){this.labelAttr(t,scheduler.templates.day_date(e))},navBarDateAttr:function(t,e){this.labelAttr(t,e)},dayHeaderAttr:function(t,e){this.labelAttr(t,e)},dayColumnAttr:function(t,e){this.dayHeaderAttr(t,scheduler.templates.day_date(e))},headerButtonsAttributes:function(t,e){return this.setAttributes(t,{role:"button","aria-label":e})},headerToggleState:function(t,e){return this.setAttributes(t,{"aria-pressed":e?"true":"false"})},getHeaderCellAttr:function(t){return scheduler._waiAria.getAttributeString({"aria-label":t})},eventAttr:function(t,e){this._eventCommonAttr(t,e)},_eventCommonAttr:function(e,i){i.setAttribute("aria-label",t(scheduler.templates.tooltip_text(e.start_date,e.end_date,e))),scheduler.config.readonly&&i.setAttribute("aria-readonly",!0),e.$dataprocessor_class&&i.setAttribute("aria-busy",!0),i.setAttribute("aria-selected",scheduler.getState().select_id==e.id?"true":"false")},setEventBarAttr:function(t,e){this._eventCommonAttr(t,e)},_getAttributes:function(t,e){var i={setAttribute:function(t,e){this[t]=e}};return t.apply(this,[e,i]),i},eventBarAttrString:function(t){return this.getAttributeString(this._getAttributes(this.setEventBarAttr,t))},agendaHeadAttrString:function(){return this.getAttributeString({role:"row"})},agendaHeadDateString:function(t){return this.getAttributeString({role:"columnheader","aria-label":t})},agendaHeadDescriptionString:function(t){return this.agendaHeadDateString(t)},agendaDataAttrString:function(){return this.getAttributeString({role:"grid"})},agendaEventAttrString:function(t){var e=this._getAttributes(this._eventCommonAttr,t);return e.role="row",this.getAttributeString(e)},agendaDetailsBtnString:function(){return this.getAttributeString({role:"button","aria-label":scheduler.locale.labels.icon_details})},gridAttrString:function(){return this.getAttributeString({role:"grid"})},gridRowAttrString:function(t){return this.agendaEventAttrString(t)},gridCellAttrString:function(t,e,i){return this.getAttributeString({role:"gridcell","aria-label":[void 0===e.label?e.id:e.label,": ",i]})},mapAttrString:function(){return this.gridAttrString()},mapRowAttrString:function(t){return this.gridRowAttrString(t)},mapDetailsBtnString:function(){return this.agendaDetailsBtnString()},minicalHeader:function(t,e){this.setAttributes(t,{id:e+"","aria-live":"assertice","aria-atomic":"true"})},minicalGrid:function(t,e){this.setAttributes(t,{"aria-labelledby":e+"",role:"grid"})},minicalRow:function(t){this.setAttributes(t,{role:"row"})},minicalDayCell:function(t,e){var i=e.valueOf()<scheduler._max_date.valueOf()&&e.valueOf()>=scheduler._min_date.valueOf();this.setAttributes(t,{role:"gridcell","aria-label":scheduler.templates.day_date(e),"aria-selected":i?"true":"false"})},minicalHeadCell:function(t){this.setAttributes(t,{role:"columnheader"})},weekAgendaDayCell:function(t,e){var i=t.querySelector(".dhx_wa_scale_bar"),n=t.querySelector(".dhx_wa_day_data"),r=scheduler.uid()+"";this.setAttributes(i,{id:r}),this.setAttributes(n,{"aria-labelledby":r})},weekAgendaEvent:function(t,e){this.eventAttr(e,t)},lightboxHiddenAttr:function(t){t.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},lightboxSectionButtonAttrString:function(t){return this.getAttributeString({role:"button","aria-label":t,tabindex:"0"})},yearHeader:function(t,e){this.setAttributes(t,{id:e+""})},yearGrid:function(t,e){this.minicalGrid(t,e)},yearHeadCell:function(t){return this.minicalHeadCell(t)},yearRow:function(t){return this.minicalRow(t)},yearDayCell:function(t){this.setAttributes(t,{role:"gridcell"})},lightboxAttr:function(t){t.setAttribute("role","dialog"),t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(t){return this.getAttributeString({role:"button","aria-label":scheduler.locale.labels[t],tabindex:"0"})},eventMenuAttrString:function(t){return this.getAttributeString({role:"button","aria-label":scheduler.locale.labels[t]})},lightboxHeader:function(t,e){t.setAttribute("aria-label",e)},lightboxSelectAttrString:function(t){var e="";switch(t){case"%Y":e=scheduler.locale.labels.year;break;case"%m":e=scheduler.locale.labels.month;break;case"%d":e=scheduler.locale.labels.day;break;case"%H:%i":e=scheduler.locale.labels.hour+" "+scheduler.locale.labels.minute}return scheduler._waiAria.getAttributeString({"aria-label":e})},messageButtonAttrString:function(t){return"tabindex='0' role='button' aria-label='"+t+"'"},messageInfoAttr:function(t){t.setAttribute("role","alert")},messageModalAttr:function(t,e){t.setAttribute("role","dialog"),e&&t.setAttribute("aria-labelledby",e)},quickInfoAttr:function(t){t.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(t,e){t.setAttribute("aria-label",e)},quickInfoButtonAttrString:function(t){return scheduler._waiAria.getAttributeString({role:"button","aria-label":t,tabindex:"0"})},tooltipAttr:function(t){t.setAttribute("role","tooltip")},tooltipVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(t){t.setAttribute("aria-hidden","true")}},scheduler._waiAria)scheduler._waiAria[a]=function(t){return function(){return scheduler.config.wai_aria_attributes?t.apply(this,arguments):" "}}(scheduler._waiAria[a])}(),scheduler.$domHelpers={getAbsoluteLeft:function(t){return this.getOffset(t).left},getAbsoluteTop:function(t){return this.getOffset(t).top},getOffsetSum:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},getOffsetRect:function(t){var e=t.getBoundingClientRect(),i=0,n=0;if(/Mobi/.test(navigator.userAgent)){var r=document.createElement("div");r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="1px",r.style.height="1px",document.body.appendChild(r);var a=r.getBoundingClientRect();i=e.top-a.top,n=e.left-a.left,r.parentNode.removeChild(r)}else{var s=document.body,o=document.documentElement,l=window.pageYOffset||o.scrollTop||s.scrollTop,d=window.pageXOffset||o.scrollLeft||s.scrollLeft;i=e.top+l-(o.clientTop||s.clientTop||0),n=e.left+d-(o.clientLeft||s.clientLeft||0)}return{top:Math.round(i),left:Math.round(n)}},getOffset:function(t){return t.getBoundingClientRect?this.getOffsetRect(t):this.getOffsetSum(t)}},scheduler.$env={isIE:navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,isIE6:!window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:navigator.userAgent.indexOf("Opera")>=0,isChrome:navigator.userAgent.indexOf("Chrome")>=0,isKHTML:navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0,isFF:navigator.userAgent.indexOf("Firefox")>=0,isIPad:navigator.userAgent.search(/iPad/gi)>=0,isEdge:-1!=navigator.userAgent.indexOf("Edge")},scheduler.$ajax={_obj:scheduler,cache:!0,method:"get",parse:function(t){return"string"!=typeof t?t:(t=t.replace(/^[\s]+/,""),window.DOMParser&&!scheduler.$env.isIE?e=(new window.DOMParser).parseFromString(t,"text/xml"):window.ActiveXObject!==window.undefined&&((e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)),e);var e},xmltop:function(t,e,i){if(void 0===e.status||e.status<400){var n=e.responseXML?e.responseXML||e:this.parse(e.responseText||e);if(n&&null!==n.documentElement&&!n.getElementsByTagName("parsererror").length)return n.getElementsByTagName(t)[0]}return-1!==i&&this._obj.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),scheduler.$env.isIE)return e.selectNodes(t)||[];for(var i,n=[],r=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=r.iterateNext();)n.push(i);return n},query:function(t){this._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){this._call("PUT",t,e,!0,i)},del:function(t,e,i){this._call("DELETE",t,e,!0,i)},post:function(t,e,i){1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null===e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2==arguments.length&&(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,n,r,a,s){var o=this._obj,l=window.XMLHttpRequest&&!o.$env.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),d=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(n&&(l.onreadystatechange=function(){if(4==l.readyState||d&&3==l.readyState){if((200!=l.status||""===l.responseText)&&!o.callEvent("onAjaxError",[l]))return;window.setTimeout(function(){"function"==typeof r&&r.apply(window,[{xmlDoc:l,filePath:e}]),a&&(void 0!==a.postData?this.postLong(a.url,a.postData,r):this.getLong(a.url,r)),r=null,l=null},1)}}),"GET"!=t||this.cache||(e+=(e.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),l.open(t,e,n),s)for(var c in s)l.setRequestHeader(c,s[c]);else"POST"==t.toUpperCase()||"PUT"==t||"DELETE"==t?l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==t&&(i=null);return l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(i),n?void 0:{xmlDoc:l,filePath:e}},urlSeparator:function(t){return-1!=t.indexOf("?")?"&":"?"}},scheduler.date={init:function(){for(var t=scheduler.locale.date.month_short,e=scheduler.locale.date.month_short_hash={},i=0;i<t.length;i++)e[t[i]]=i;for(t=scheduler.locale.date.month_full,e=scheduler.locale.date.month_full_hash={},i=0;i<t.length;i++)e[t[i]]=i},_bind_host_object:function(t){return t.bind?t.bind(scheduler):function(){return t.apply(scheduler,arguments)}},date_part:function(t){var e=new Date(t);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getHours()&&(t.getDate()<e.getDate()||t.getMonth()<e.getMonth()||t.getFullYear()<e.getFullYear())&&t.setTime(t.getTime()+36e5*(24-t.getHours())),t},time_part:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},week_start:function(t){var e=t.getDay();return scheduler.config.start_on_monday&&(0===e?e=6:e--),this.date_part(this.add(t,-1*e,"day"))},month_start:function(t){return t.setDate(1),this.date_part(t)},year_start:function(t){return t.setMonth(0),this.month_start(t)},day_start:function(t){return this.date_part(t)},_add_days:function(t,e){var i=new Date(t.valueOf());if(i.setDate(i.getDate()+e),e==Math.round(e)&&e>0){var n=(+i-+t)%864e5;if(n&&t.getTimezoneOffset()==i.getTimezoneOffset()){var r=n/36e5;i.setTime(i.getTime()+60*(24-r)*60*1e3)}}return e>=0&&!t.getHours()&&i.getHours()&&(i.getDate()<t.getDate()||i.getMonth()<t.getMonth()||i.getFullYear()<t.getFullYear())&&i.setTime(i.getTime()+36e5*(24-i.getHours())),i},add:function(t,e,i){var n=new Date(t.valueOf());switch(i){case"day":n=scheduler.date._add_days(n,e);break;case"week":n=scheduler.date._add_days(n,7*e);break;case"month":n.setMonth(n.getMonth()+e);break;case"year":n.setYear(n.getFullYear()+e);break;case"hour":n.setTime(n.getTime()+60*e*60*1e3);break;case"minute":n.setTime(n.getTime()+60*e*1e3);break;default:return scheduler.date["add_"+i](t,e,i)}return n},to_fixed:function(t){return 10>t?"0"+t:t},copy:function(t){return new Date(t.valueOf())},date_to_str:function(t,e){t=t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+this.date.to_fixed(date.getDate())+"';case"%m":return'"+this.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+this.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+this.locale.date.day_short[date.getDay()]+"';case"%l":return'"+this.locale.date.day_full[date.getDay()]+"';case"%M":return'"+this.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+this.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+this.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+this.date.to_fixed(date.getHours())+"';case"%i":return'"+this.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+this.date.to_fixed(date.getSeconds())+"';case"%W":return'"+this.date.to_fixed(this.date.getISOWeek(date))+"';default:return t}}),e&&(t=t.replace(/date\.get/g,"date.getUTC"));var i=new Function("date",'return "'+t+'";');return scheduler.date._bind_host_object(i)},str_to_date:function(t,e){for(var i="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",n=t.match(/%[a-zA-Z]/g),r=0;r<n.length;r++)switch(n[r]){case"%j":case"%d":i+="set[2]=temp["+r+"]||1;";break;case"%n":case"%m":i+="set[1]=(temp["+r+"]||1)-1;";break;case"%y":i+="set[0]=temp["+r+"]*1+(temp["+r+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":i+="set[3]=temp["+r+"]||0;";break;case"%i":i+="set[4]=temp["+r+"]||0;";break;case"%Y":i+="set[0]=temp["+r+"]||0;";break;case"%a":case"%A":i+="set[3]=set[3]%12+((temp["+r+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":i+="set[5]=temp["+r+"]||0;";break;case"%M":i+="set[1]=this.locale.date.month_short_hash[temp["+r+"]]||0;";break;case"%F":i+="set[1]=this.locale.date.month_full_hash[temp["+r+"]]||0;"}var a="set[0],set[1],set[2],set[3],set[4],set[5]";e&&(a=" Date.UTC("+a+")");var s=new Function("date","var set=[0,0,1,0,0,0]; "+i+" return new Date("+a+");");return scheduler.date._bind_host_object(s)},getISOWeek:function(t){if(!t)return!1;var e=(t=this.date_part(new Date(t))).getDay();0===e&&(e=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-e));var n=i.getFullYear(),r=Math.round((i.getTime()-new Date(n,0,1).getTime())/864e5);return 1+Math.floor(r/7)},getUTCISOWeek:function(t){return this.getISOWeek(this.convert_to_utc(t))},convert_to_utc:function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}},scheduler.locale={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},scheduler.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D, %F %j",hour_date:"%H:%i",month_day:"%d",xml_date:"%m/%d/%Y %H:%i",api_date:"%d-%m-%Y %H:%i",preserve_length:!0,time_step:5,start_on_monday:1,first_hour:0,last_hour:24,readonly:!1,drag_resize:1,drag_move:1,drag_create:1,dblclick_create:1,edit_on_create:1,details_on_create:0,resize_month_events:!1,resize_month_timed:!1,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,multi_day:!0,multi_day_height_limit:0,drag_lightbox:!0,preserve_scroll:!0,select:!0,server_utc:!1,touch:!0,touch_tip:!0,touch_drag:500,quick_info_detached:!0,positive_closing:!1,drag_highlight:!0,limit_drag_out:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_left:["dhx_save_btn","dhx_cancel_btn"],buttons_right:["dhx_delete_btn"],lightbox:{sections:[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},highlight_displayed_event:!0,left_border:!1,ajax_error:"alert",delay_render:0,timeline_swap_resize:!0,wai_aria_attributes:!0,wai_aria_application_role:!0},scheduler.config.buttons_left.$inital=scheduler.config.buttons_left.join(),scheduler.config.buttons_right.$inital=scheduler.config.buttons_right.join(),scheduler.templates={},scheduler.init_templates=function(){var t=scheduler.locale.labels;t.dhx_save_btn=t.icon_save,t.dhx_cancel_btn=t.icon_cancel,t.dhx_delete_btn=t.icon_delete;var e=scheduler.date.date_to_str,i=scheduler.config;(function(t,e){for(var i in e)t[i]||(t[i]=e[i])})(scheduler.templates,{day_date:e(i.default_date),month_date:e(i.month_date),week_date:function(t,e){return scheduler.templates.day_date(t)+" &ndash; "+scheduler.templates.day_date(scheduler.date.add(e,-1,"day"))},day_scale_date:e(i.default_date),month_scale_date:e(i.week_date),week_scale_date:e(i.day_date),hour_scale:e(i.hour_date),time_picker:e(i.hour_date),event_date:e(i.hour_date),month_day:e(i.month_day),xml_date:scheduler.date.str_to_date(i.xml_date,i.server_utc),load_format:e(i.load_date),xml_format:e(i.xml_date,i.server_utc),api_date:scheduler.date.str_to_date(i.api_date),event_header:function(t,e,i){return scheduler.templates.event_date(t)+" - "+scheduler.templates.event_date(e)},event_text:function(t,e,i){return i.text},event_class:function(t,e,i){return""},month_date_class:function(t){return""},week_date_class:function(t){return""},event_bar_date:function(t,e,i){return scheduler.templates.event_date(t)+" "},event_bar_text:function(t,e,i){return i.text},month_events_link:function(t,e){return"<a>View more("+e+" events)</a>"},drag_marker_class:function(t,e,i){return""},drag_marker_content:function(t,e,i){return""},tooltip_date_format:scheduler.date.date_to_str("%Y-%m-%d %H:%i"),tooltip_text:function(t,e,i){return"<b>Event:</b> "+i.text+"<br/><b>Start date:</b> "+scheduler.templates.tooltip_date_format(t)+"<br/><b>End date:</b> "+scheduler.templates.tooltip_date_format(e)}}),this.callEvent("onTemplatesReady",[])},scheduler.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++},scheduler._events={},scheduler.clearAll=function(){this._events={},this._loaded={},this._edit_id=null,this._select_id=null,this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this.clear_view(),this.callEvent("onClearAll",[])},scheduler.addEvent=function(t,e,i,n,r){if(!arguments.length)return this.addEventNow();var a=t;1!=arguments.length&&((a=r||{}).start_date=t,a.end_date=e,a.text=i,a.id=n),a.id=a.id||scheduler.uid(),a.text=a.text||"","string"==typeof a.start_date&&(a.start_date=this.templates.api_date(a.start_date)),"string"==typeof a.end_date&&(a.end_date=this.templates.api_date(a.end_date));var s=6e4*(this.config.event_duration||this.config.time_step);a.start_date.valueOf()==a.end_date.valueOf()&&a.end_date.setTime(a.end_date.valueOf()+s),a._timed=this.isOneDayEvent(a);var o=!this._events[a.id];return this._events[a.id]=a,this.event_updated(a),this._loading||this.callEvent(o?"onEventAdded":"onEventChanged",[a.id,a]),a.id},scheduler.deleteEvent=function(t,e){var i=this._events[t];(e||this.callEvent("onBeforeEventDelete",[t,i])&&this.callEvent("onConfirmedBeforeEventDelete",[t,i]))&&(i&&(this._select_id=null,delete this._events[t],this.event_updated(i),this._drag_id==i.id&&(this._drag_id=null,this._drag_mode=null,this._drag_pos=null)),this.callEvent("onEventDeleted",[t,i]))},scheduler.getEvent=function(t){return this._events[t]},scheduler.setEvent=function(t,e){e.id||(e.id=t),this._events[t]=e},scheduler.for_rendered=function(t,e){for(var i=this._rendered.length-1;i>=0;i--)this._rendered[i].getAttribute("event_id")==t&&e(this._rendered[i],i)},scheduler.changeEventId=function(t,e){if(t!=e){var i=this._events[t];i&&(i.id=e,this._events[e]=i,delete this._events[t]),this.for_rendered(t,function(t){t.setAttribute("event_id",e)}),this._select_id==t&&(this._select_id=e),this._edit_id==t&&(this._edit_id=e),this.callEvent("onEventIdChange",[t,e])}},function(){for(var t=["text","Text","start_date","StartDate","end_date","EndDate"],e=function(t){return function(e){return scheduler.getEvent(e)[t]}},i=function(t){return function(e,i){var n=scheduler.getEvent(e);n[t]=i,n._changed=!0,n._timed=this.isOneDayEvent(n),scheduler.event_updated(n,!0)}},n=0;n<t.length;n+=2)scheduler["getEvent"+t[n+1]]=e(t[n]),scheduler["setEvent"+t[n+1]]=i(t[n])}(),scheduler.event_updated=function(t,e){this.is_visible_events(t)?this.render_view_data():this.clear_event(t.id)},scheduler.is_visible_events=function(t){if(t.start_date.valueOf()<this._max_date.valueOf()&&this._min_date.valueOf()<t.end_date.valueOf()){var e=t.start_date.getHours(),i=t.end_date.getHours()+t.end_date.getMinutes()/60,n=this.config.last_hour,r=this.config.first_hour;return!(!this._table_view&&(i>n||r>i)&&(e>=n||r>e)&&!((t.end_date.valueOf()-t.start_date.valueOf())/36e5>24-(this.config.last_hour-this.config.first_hour)||n>e&&i>=r))}return!1},scheduler.isOneDayEvent=function(t){var e=t.end_date.getDate()-t.start_date.getDate();return e?(0>e&&(e=Math.ceil((t.end_date.valueOf()-t.start_date.valueOf())/864e5)),1==e&&!t.end_date.getHours()&&!t.end_date.getMinutes()&&(t.start_date.getHours()||t.start_date.getMinutes())):t.start_date.getMonth()==t.end_date.getMonth()&&t.start_date.getFullYear()==t.end_date.getFullYear()},scheduler.get_visible_events=function(t){var e=[];for(var i in this._events)this.is_visible_events(this._events[i])&&(!t||this._events[i]._timed)&&this.filter_event(i,this._events[i])&&e.push(this._events[i]);return e},scheduler.filter_event=function(t,e){var i=this["filter_"+this._mode];return!i||i(t,e)},scheduler._is_main_area_event=function(t){return!!t._timed},scheduler.render_view_data=function(t,e){var i=!1;if(!t){if(i=!0,this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),t=this.get_visible_events(!(this._table_view||this.config.multi_day))}for(var n=0,r=t.length;r>n;n++)this._recalculate_timed(t[n]);if(this.config.multi_day&&!this._table_view){var a=[],s=[];for(n=0;n<t.length;n++)this._is_main_area_event(t[n])?a.push(t[n]):s.push(t[n]);this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(s,e),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(a,e)}else this._rendered_location=this._els.dhx_cal_data[0],this.render_data(t,e);i&&this.callEvent("onDataRender",[])},scheduler._view_month_day=function(t){var e=scheduler.getActionData(t).date;scheduler.callEvent("onViewMoreClick",[e])&&scheduler.setCurrentView(e,"day")},scheduler._render_month_link=function(t){for(var e=this._rendered_location,i=this._lame_clone(t),n=t._sday;n<t._eday;n++){i._sday=n,i._eday=n+1;var r=scheduler.date,a=scheduler._min_date;a=r.add(a,i._sweek,"week"),a=r.add(a,i._sday,"day");var s=scheduler.getEvents(a,r.add(a,1,"day")).length,o=this._get_event_bar_pos(i),l=o.x2-o.x,d=document.createElement("div");d.onclick=function(t){scheduler._view_month_day(t||event)},d.className="dhx_month_link",d.style.top=o.y+"px",d.style.left=o.x+"px",d.style.width=l+"px",d.innerHTML=scheduler.templates.month_events_link(a,s),this._rendered.push(d),e.appendChild(d)}},scheduler._recalculate_timed=function(t){var e;t&&(e="object"!=typeof t?this._events[t]:t)&&(e._timed=scheduler.isOneDayEvent(e))},scheduler.attachEvent("onEventChanged",scheduler._recalculate_timed),scheduler.attachEvent("onEventAdded",scheduler._recalculate_timed),scheduler.render_data=function(t,e){t=this._pre_render_events(t,e);for(var i=0;i<t.length;i++)if(this._table_view)if("month"!=scheduler._mode)this.render_event_bar(t[i]);else{var n=scheduler.config.max_month_events;n!==1*n||t[i]._sorder<n?this.render_event_bar(t[i]):void 0!==n&&t[i]._sorder==n&&scheduler._render_month_link(t[i])}else this.render_event(t[i])},scheduler._get_first_visible_cell=function(t){for(var e=0;e<t.length;e++)if(-1==(t[e].className||"").indexOf("dhx_scale_ignore"))return t[e];return t[0]},scheduler._pre_render_events=function(t,e){var i=this.xy.bar_height,n=this._colsS.heights,r=this._colsS.heights=[0,0,0,0,0,0,0],a=this._els.dhx_cal_data[0];if(t=this._table_view?this._pre_render_events_table(t,e):this._pre_render_events_line(t,e),this._table_view)if(e)this._colsS.heights=n;else{var s=a.firstChild;if(s.rows){for(var o=0;o<s.rows.length;o++){r[o]++;var l=s.rows[o].cells,d=this._colsS.height-this.xy.month_head_height;if(r[o]*i>d){var c=d;1*this.config.max_month_events!==this.config.max_month_events||r[o]<=this.config.max_month_events?c=r[o]*i:(this.config.max_month_events+1)*i>d&&(c=(this.config.max_month_events+1)*i);for(var h=0;h<l.length;h++)l[h].childNodes[1].style.height=c+"px"}r[o]=(r[o-1]||0)+scheduler._get_first_visible_cell(l).offsetHeight}if(r.unshift(0),s.parentNode.offsetHeight<s.parentNode.scrollHeight&&!scheduler._colsS.scroll_fix&&scheduler.xy.scroll_width){var u=scheduler._colsS,_=u[u.col_length],f=u.heights.slice();this._calc_scale_sizes(_-=scheduler.xy.scroll_width||0,this._min_date,this._max_date),scheduler._colsS.heights=f,this.set_xy(this._els.dhx_cal_header[0],_,this.xy.scale_height),scheduler._render_scales(this._els.dhx_cal_header[0]),scheduler._render_month_scale(this._els.dhx_cal_data[0],this._get_timeunit_start(),this._min_date),u.scroll_fix=!0}}else if(t.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(r[0]=-1),t.length||-1==r[0]){var g=(r[0]+1)*i+1,p=g,v=g+"px";this.config.multi_day_height_limit&&(v=(p=Math.min(g,this.config.multi_day_height_limit))+"px"),a.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+p+"px",a.style.height=this._obj.offsetHeight-parseInt(a.style.top,10)-(this.xy.margin_top||0)+"px";var m=this._els.dhx_multi_day[0];m.style.height=v,m.style.visibility=-1==r[0]?"hidden":"visible";var y=this._els.dhx_multi_day[1];y.style.height=v,y.style.visibility=-1==r[0]?"hidden":"visible",y.className=r[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(r[0]+1)*i,this.config.multi_day_height_limit&&(this._dy_shift=Math.min(this.config.multi_day_height_limit,this._dy_shift)),r[0]=0,p!=g&&(a.style.top=parseInt(a.style.top)+2+"px",m.style.overflowY="auto",y.style.position="fixed",y.style.top="",y.style.left="")}}return t},scheduler._get_event_sday=function(t){var e=this.date.day_start(new Date(t.start_date));return Math.round((e.valueOf()-this._min_date.valueOf())/864e5)},scheduler._get_event_mapped_end_date=function(t){var e=t.end_date;if(this.config.separate_short_events){var i=(t.end_date-t.start_date)/6e4;i<this._min_mapped_duration&&(e=this.date.add(e,this._min_mapped_duration-i,"minute"))}return e},scheduler._pre_render_events_line=function(t,e){t.sort(function(t,e){return t.start_date.valueOf()==e.start_date.valueOf()?t.id>e.id?1:-1:t.start_date>e.start_date?1:-1});var i=[],n=[];this._min_mapped_duration=Math.ceil(60*this.xy.min_event_height/this.config.hour_size_px);for(var r=0;r<t.length;r++){var a=t[r],s=a.end_date,o=a.start_date.getHours(),l=s.getHours();if(a._sday=this._get_event_sday(a),this._ignores[a._sday])t.splice(r,1),r--;else{if(i[a._sday]||(i[a._sday]=[]),!e){a._inner=!1;for(var d=i[a._sday];d.length&&this._get_event_mapped_end_date(_=d[d.length-1]).valueOf()<=a.start_date.valueOf();)d.splice(d.length-1,1);for(var c=d.length,h=!1,u=0;u<d.length;u++){var _;if(this._get_event_mapped_end_date(_=d[u]).valueOf()<=a.start_date.valueOf()){h=!0,a._sorder=_._sorder,c=u,a._inner=!0;break}}if(d.length&&(d[d.length-1]._inner=!0),!h)if(d.length)if(d.length<=d[d.length-1]._sorder){if(d[d.length-1]._sorder)for(u=0;u<d.length;u++){for(var f=!1,g=0;g<d.length;g++)if(d[g]._sorder==u){f=!0;break}if(!f){a._sorder=u;break}}else a._sorder=0;a._inner=!0}else{var p=d[0]._sorder;for(u=1;u<d.length;u++)d[u]._sorder>p&&(p=d[u]._sorder);a._sorder=p+1,a._inner=!1}else a._sorder=0;d.splice(c,c==d.length?0:1,a),d.length>(d.max_count||0)?(d.max_count=d.length,a._count=d.length):a._count=a._count?a._count:1}(o<this.config.first_hour||l>=this.config.last_hour)&&(n.push(a),t[r]=a=this._copy_event(a),o<this.config.first_hour&&(a.start_date.setHours(this.config.first_hour),a.start_date.setMinutes(0)),l>=this.config.last_hour&&(a.end_date.setMinutes(0),a.end_date.setHours(this.config.last_hour)),a.start_date>a.end_date||o==this.config.last_hour)&&(t.splice(r,1),r--)}}if(!e){for(r=0;r<t.length;r++)t[r]._count=i[t[r]._sday].max_count;for(r=0;r<n.length;r++)n[r]._count=i[n[r]._sday].max_count}return t},scheduler._time_order=function(t){t.sort(function(t,e){return t.start_date.valueOf()==e.start_date.valueOf()?t._timed&&!e._timed?1:!t._timed&&e._timed?-1:t.id>e.id?1:-1:t.start_date>e.start_date?1:-1})},scheduler._pre_render_events_table=function(t,e){this._time_order(t);for(var i,n=[],r=[[],[],[],[],[],[],[]],a=this._colsS.heights,s=this._cols.length,o={},l=0;l<t.length;l++){var d=t[l],c=d.id;o[c]||(o[c]={first_chunk:!0,last_chunk:!0});var h=o[c],u=i||d.start_date,_=d.end_date;u<this._min_date&&(h.first_chunk=!1,u=this._min_date),_>this._max_date&&(h.last_chunk=!1,_=this._max_date);var f=this.locate_holder_day(u,!1,d);if(d._sday=f%s,!this._ignores[d._sday]||!d._timed){var g=this.locate_holder_day(_,!0,d)||s;d._eday=g%s||s,d._length=g-f,d._sweek=Math.floor((this._correct_shift(u.valueOf(),1)-this._min_date.valueOf())/(864e5*s));var p,v=r[d._sweek];for(p=0;p<v.length&&!(v[p]._eday<=d._sday);p++);if(d._sorder&&e||(d._sorder=p),d._sday+d._length<=s)i=null,n.push(d),v[p]=d,a[d._sweek]=v.length-1,d._first_chunk=h.first_chunk,d._last_chunk=h.last_chunk;else{var m=this._copy_event(d);m.id=d.id,m._length=s-d._sday,m._eday=s,m._sday=d._sday,m._sweek=d._sweek,m._sorder=d._sorder,m.end_date=this.date.add(u,m._length,"day"),m._first_chunk=h.first_chunk,h.first_chunk&&(h.first_chunk=!1),n.push(m),v[p]=m,i=m.end_date,a[d._sweek]=v.length-1,l--}}}return n},scheduler._copy_dummy=function(){var t=new Date(this.start_date),e=new Date(this.end_date);this.start_date=t,this.end_date=e},scheduler._copy_event=function(t){return this._copy_dummy.prototype=t,new this._copy_dummy},scheduler._rendered=[],scheduler.clear_view=function(){for(var t=0;t<this._rendered.length;t++){var e=this._rendered[t];e.parentNode&&e.parentNode.removeChild(e)}this._rendered=[]},scheduler.updateEvent=function(t){var e=this.getEvent(t);this.clear_event(t),e&&this.is_visible_events(e)&&this.filter_event(t,e)&&(this._table_view||this.config.multi_day||e._timed)&&(this.config.update_render?this.render_view_data():"month"!=this.getState().mode||this.getState().drag_id||this.isOneDayEvent(e)?this.render_view_data([e],!0):this.render_view_data())},scheduler.clear_event=function(t){this.for_rendered(t,function(t,e){t.parentNode&&t.parentNode.removeChild(t),scheduler._rendered.splice(e,1)})},scheduler._y_from_date=function(t){var e=60*t.getHours()+t.getMinutes();return Math.round((60*e*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)},scheduler._calc_event_y=function(t,e){e=e||0;var i=60*t.start_date.getHours()+t.start_date.getMinutes(),n=60*t.end_date.getHours()+t.end_date.getMinutes()||60*scheduler.config.last_hour;return{top:this._y_from_date(t.start_date),height:Math.max(e,(n-i)*this.config.hour_size_px/60)}},scheduler.render_event=function(t){var e=scheduler.xy.menu_width,i=this.config.use_select_menu_space?0:e;if(!(t._sday<0)){var n=scheduler.locate_holder(t._sday);if(n){var r=this._calc_event_y(t,scheduler.xy.min_event_height),a=r.top,s=r.height,o=t._count||1,l=t._sorder||0,d=Math.floor((n.clientWidth-i)/o),c=l*d+1;if(t._inner||(d*=o-l),this.config.cascade_event_display){var h=this.config.cascade_event_count,u=this.config.cascade_event_margin;c=l%h*u,d=Math.floor(n.clientWidth-i-c-(t._inner?(o-l-1)%h*u/2:0))}var _=this._render_v_bar(t,i+c,a,d,s,t._text_style,scheduler.templates.event_header(t.start_date,t.end_date,t),scheduler.templates.event_text(t.start_date,t.end_date,t));if(this._waiAria.eventAttr(t,_),this._rendered.push(_),n.appendChild(_),c=c+parseInt(n.style.left,10)+i,this._edit_id==t.id){_.style.zIndex=1,d=Math.max(d-4,scheduler.xy.editor_width),(_=document.createElement("div")).setAttribute("event_id",t.id),this._waiAria.eventAttr(t,_),this.set_xy(_,d,s-20,c,a+(scheduler.xy.event_header_height||14)),_.className="dhx_cal_event dhx_cal_editor",t.color&&(_.style.backgroundColor=t.color);var f=scheduler.templates.event_class(t.start_date,t.end_date,t);f&&(_.className+=" "+f);var g=document.createElement("div");this.set_xy(g,d-6,s-26),g.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",_.appendChild(g),this._els.dhx_cal_data[0].appendChild(_),this._rendered.push(_),g.innerHTML="<textarea class='dhx_cal_editor'>"+t.text+"</textarea>",this._quirks7&&(g.firstChild.style.height=s-12+"px"),this._editor=g.firstChild,this._editor.onkeydown=function(t){if((t||event).shiftKey)return!0;var e=(t||event).keyCode;e==scheduler.keys.edit_save&&scheduler.editStop(!0),e==scheduler.keys.edit_cancel&&scheduler.editStop(!1),(e==scheduler.keys.edit_save||e==scheduler.keys.edit_cancel)&&t.preventDefault&&t.preventDefault()},this._editor.onselectstart=function(t){return(t||event).cancelBubble=!0,!0},scheduler._focus(g.firstChild,!0),this._els.dhx_cal_data[0].scrollLeft=0}if(0!==this.xy.menu_width&&this._select_id==t.id){this.config.cascade_event_display&&this._drag_mode&&(_.style.zIndex=1);for(var p,v=this.config["icons_"+(this._edit_id==t.id?"edit":"select")],m="",y=t.color?"background-color: "+t.color+";":"",x=t.textColor?"color: "+t.textColor+";":"",b=0;b<v.length;b++)p=this._waiAria.eventMenuAttrString(v[b]),m+="<div class='dhx_menu_icon "+v[b]+"' style='"+y+x+"' title='"+this.locale.labels[v[b]]+"'"+p+"></div>";var w=this._render_v_bar(t,c-e+1,a,e,20*v.length+26-2,"","<div style='"+y+x+"' class='dhx_menu_head'></div>",m,!0);w.style.left=c-e+1,this._els.dhx_cal_data[0].appendChild(w),this._rendered.push(w)}this.config.drag_highlight&&this._drag_id==t.id&&this.highlightEventPosition(t)}}},scheduler._render_v_bar=function(t,e,i,n,r,a,s,o,l){var d=document.createElement("div"),c=t.id,h=l?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",u=scheduler.getState();u.drag_id==t.id&&(h+=" dhx_cal_event_drag"),u.select_id==t.id&&(h+=" dhx_cal_event_selected");var _=scheduler.templates.event_class(t.start_date,t.end_date,t);_&&(h=h+" "+_),this.config.cascade_event_display&&(h+=" dhx_cal_event_cascade");var f=t.color?"background-color:"+t.color+";":"",g=t.textColor?"color:"+t.textColor+";":"",p=scheduler._border_box_bvents(),v=n-2,m=p?v:n-6,y=p?v:n-(this._quirks?4:14),x=p?v-2:n-8,b=p?r-this.xy.event_header_height-1:r-(this._quirks?20:30)+1;d.innerHTML='<div event_id="'+c+'" class="'+h+'" style="position:absolute; top:'+i+"px; left:"+e+"px; width:"+(p?v:n-4)+"px; height:"+r+"px;"+(a||"")+'"></div>';var w=d.cloneNode(!0).firstChild;if(!l&&scheduler.renderEvent(w,t,n,r,s,o))return w;w=d.firstChild;var k='<div class="dhx_event_move dhx_header" style=" width:'+m+"px;"+f+'" >&nbsp;</div>';k+='<div class="dhx_event_move dhx_title" style="'+f+g+'">'+s+"</div>",k+='<div class="dhx_body" style=" width:'+y+"px; height:"+b+"px;"+f+g+'">'+o+"</div>";var $="dhx_event_resize dhx_footer";return l&&($="dhx_resize_denied "+$),w.innerHTML=k+='<div class="'+$+'" style=" width:'+x+"px;"+(l?" margin-top:-1px;":"")+f+g+'" ></div>',w},scheduler.renderEvent=function(){return!1},scheduler.locate_holder=function(t){return"day"==this._mode?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[t]},scheduler.locate_holder_day=function(t,e){var i=Math.floor((this._correct_shift(t,1)-this._min_date)/864e5);return e&&this.date.time_part(t)&&i++,i},scheduler._get_dnd_order=function(t,e,i){if(!this._drag_event)return t;this._drag_event._orig_sorder?t=this._drag_event._orig_sorder:this._drag_event._orig_sorder=t;for(var n=e*t;n+e>i;)t--,n-=e;return Math.max(t,0)},scheduler._get_event_bar_pos=function(t){var e=this._colsS[t._sday],i=this._colsS[t._eday];i==e&&(i=this._colsS[t._eday+1]);var n=this.xy.bar_height,r=t._sorder;return t.id==this._drag_id&&(r=scheduler._get_dnd_order(r,n,this._colsS.heights[t._sweek+1]-this._colsS.heights[t._sweek]-this.xy.month_head_height)),{x:e,x2:i,y:this._colsS.heights[t._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+r*n}},scheduler.render_event_bar=function(t){var e=this._rendered_location,i=this._get_event_bar_pos(t),n=i.y,r=i.x,a=i.x2,s="";if(a){var o=scheduler.config.resize_month_events&&"month"==this._mode&&(!t._timed||scheduler.config.resize_month_timed),l=document.createElement("div"),d=t.hasOwnProperty("_first_chunk")&&t._first_chunk,c=t.hasOwnProperty("_last_chunk")&&t._last_chunk,h="dhx_cal_event_clear";(!t._timed||o)&&(h="dhx_cal_event_line"),d&&(h+=" dhx_cal_event_line_start"),c&&(h+=" dhx_cal_event_line_end"),o&&(t._timed||d)&&(s+="<div class='dhx_event_resize dhx_event_resize_start'></div>"),o&&(t._timed||c)&&(s+="<div class='dhx_event_resize dhx_event_resize_end'></div>");var u=scheduler.templates.event_class(t.start_date,t.end_date,t);u&&(h+=" "+u);var _=["position:absolute","top:"+n+"px","left:"+r+"px","width:"+(a-r-15)+"px",t.textColor?"color:"+t.textColor+";":"",t.color?"background:"+t.color+";":"",t._text_style||""].join(";"),f="<div event_id='"+t.id+"' class='"+h+"' style='"+_+"'"+this._waiAria.eventBarAttrString(t)+">";o&&(f+=s),"month"==scheduler.getState().mode&&(t=scheduler.getEvent(t.id)),t._timed&&(f+=scheduler.templates.event_bar_date(t.start_date,t.end_date,t)),f+=scheduler.templates.event_bar_text(t.start_date,t.end_date,t)+"</div>",l.innerHTML=f+="</div>",this._rendered.push(l.firstChild),e.appendChild(l.firstChild)}},scheduler._locate_event=function(t){for(var e=null;t&&!e&&t.getAttribute;)e=t.getAttribute("event_id"),t=t.parentNode;return e},scheduler._locate_css=function(t,e,i){void 0===i&&(i=!0);for(var n=t.target||t.srcElement,r="";n;){if(r=scheduler._getClassName(n)){var a=r.indexOf(e);if(a>=0){if(!i)return n;var s=0===a||!scheduler._trim(r.charAt(a-1)),o=a+e.length>=r.length||!scheduler._trim(r.charAt(a+e.length));if(s&&o)return n}}n=n.parentNode}return null},scheduler.edit=function(t){this._edit_id!=t&&(this.editStop(!1,t),this._edit_id=t,this.updateEvent(t))},scheduler.editStop=function(t,e){if(!e||this._edit_id!=e){var i=this.getEvent(this._edit_id);i&&(t&&(i.text=this._editor.value),this._edit_id=null,this._editor=null,this.updateEvent(i.id),this._edit_stop_event(i,t))}},scheduler._edit_stop_event=function(t,e){this._new_event?(e?this.callEvent("onEventAdded",[t.id,t]):t&&this.deleteEvent(t.id,!0),this._new_event=null):e&&this.callEvent("onEventChanged",[t.id,t])},scheduler.getEvents=function(t,e){var i=[];for(var n in this._events){var r=this._events[n];r&&(!t&&!e||r.start_date<e&&r.end_date>t)&&i.push(r)}return i},scheduler.getRenderedEvent=function(t){if(t){for(var e=scheduler._rendered,i=0;i<e.length;i++){var n=e[i];if(n.getAttribute("event_id")==t)return n}return null}},scheduler.showEvent=function(t,e){var i="number"==typeof t||"string"==typeof t?scheduler.getEvent(t):t;if(e=e||scheduler._mode,i&&(!this.checkEvent("onBeforeEventDisplay")||this.callEvent("onBeforeEventDisplay",[i,e]))){var n=scheduler.config.scroll_hour;scheduler.config.scroll_hour=i.start_date.getHours();var r=scheduler.config.preserve_scroll;scheduler.config.preserve_scroll=!1;var a=i.color,s=i.textColor;if(scheduler.config.highlight_displayed_event&&(i.color=scheduler.config.displayed_event_color,i.textColor=scheduler.config.displayed_event_text_color),scheduler.setCurrentView(new Date(i.start_date),e),i.color=a,i.textColor=s,scheduler.config.scroll_hour=n,scheduler.config.preserve_scroll=r,scheduler.matrix&&scheduler.matrix[e]){var o=scheduler.getRenderedEvent(i.id);o&&(scheduler._els.dhx_cal_data[0].scrollTop=scheduler.$domHelpers.getAbsoluteTop(o)-scheduler.$domHelpers.getAbsoluteTop(scheduler._els.dhx_cal_data[0])-20)}scheduler.callEvent("onAfterEventDisplay",[i,e])}},scheduler._append_drag_marker=function(t){if(!t.parentNode){var e=scheduler._els.dhx_cal_data[0].lastChild,i=scheduler._getClassName(e);i.indexOf("dhx_scale_holder")<0&&e.previousSibling&&(e=e.previousSibling),i=scheduler._getClassName(e),e&&0===i.indexOf("dhx_scale_holder")&&e.appendChild(t)}},scheduler._update_marker_position=function(t,e){var i=scheduler._calc_event_y(e,0);t.style.top=i.top+"px",t.style.height=i.height+"px"},scheduler.highlightEventPosition=function(t){var e=document.createElement("div");e.setAttribute("event_id",t.id),this._rendered.push(e),this._update_marker_position(e,t);var i=this.templates.drag_marker_class(t.start_date,t.end_date,t),n=this.templates.drag_marker_content(t.start_date,t.end_date,t);e.className="dhx_drag_marker",i&&(e.className+=" "+i),n&&(e.innerHTML=n),this._append_drag_marker(e)},scheduler._loaded={},scheduler._load=function(t,e){if(t=t||this._load_url){var i;if(t+=(-1==t.indexOf("?")?"?":"&")+"timeshift="+(new Date).getTimezoneOffset(),this.config.prevent_cache&&(t+="&uid="+this.uid()),e=e||this._date,this._load_mode){var n=this.templates.load_format;for(e=this.date[this._load_mode+"_start"](new Date(e.valueOf()));e>this._min_date;)e=this.date.add(e,-1,this._load_mode);i=e;for(var r=!0;i<this._max_date;)i=this.date.add(i,1,this._load_mode),this._loaded[n(e)]&&r?e=this.date.add(e,1,this._load_mode):r=!1;var a=i;do{a=this.date.add(i=a,-1,this._load_mode)}while(a>e&&this._loaded[n(a)]);if(e>=i)return!1;for(scheduler.$ajax.get(t+"&from="+n(e)+"&to="+n(i),function(t){scheduler.on_load(t)});i>e;)this._loaded[n(e)]=!0,e=this.date.add(e,1,this._load_mode)}else scheduler.$ajax.get(t,function(t){scheduler.on_load(t)});return this.callEvent("onXLS",[]),!0}},scheduler.on_load=function(t){var e,i=!1;if(this._process&&"xml"!=this._process)try{e=this[this._process].parse(t.xmlDoc.responseText)}catch(t){i=!0}else(e=this._magic_parser(t))||(i=!0);(i||t.xmlDoc.status&&t.xmlDoc.status>=400)&&(this.callEvent("onLoadError",[t.xmlDoc]),e=[]),scheduler._process_loading(e),this.callEvent("onXLE",[])},scheduler._process_loading=function(t){this._loading=!0,this._not_render=!0;for(var e=0;e<t.length;e++)this.callEvent("onEventLoading",[t[e]])&&this.addEvent(t[e]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null},scheduler._init_event=function(t){t.text=t.text||t._tagvalue||"",t.start_date=scheduler._init_date(t.start_date),t.end_date=scheduler._init_date(t.end_date)},scheduler._init_date=function(t){return t?"string"==typeof t?scheduler.templates.xml_date(t):new Date(t):null},scheduler.json={},scheduler.json.parse=function(data){"string"==typeof data&&(scheduler._temp=window.JSON?JSON.parse(data):eval("("+data+")"),data=scheduler._temp?scheduler._temp.data||scheduler._temp.d||scheduler._temp:[]),data.dhx_security&&(dhtmlx.security_key=data.dhx_security);var collections=scheduler._temp&&scheduler._temp.collections?scheduler._temp.collections:{},collections_loaded=!1;for(var key in collections)if(collections.hasOwnProperty(key)){collections_loaded=!0;var collection=collections[key],arr=scheduler.serverList[key];if(!arr)continue;arr.splice(0,arr.length);for(var j=0;j<collection.length;j++){var option=collection[j],obj={key:option.value,label:option.label};for(var option_key in option)if(option.hasOwnProperty(option_key)){if("value"==option_key||"label"==option_key)continue;obj[option_key]=option[option_key]}arr.push(obj)}}collections_loaded&&scheduler.callEvent("onOptionsLoad",[]);for(var evs=[],i=0;i<data.length;i++){var event=data[i];scheduler._init_event(event),evs.push(event)}return evs},scheduler.parse=function(t,e){this._process=e,this.on_load({xmlDoc:{responseText:t}})},scheduler.load=function(t,e){"string"==typeof e&&(this._process=e,e=arguments[2]),this._load_url=t,this._after_call=e,this._load(t,this._date)},scheduler.setLoadMode=function(t){"all"==t&&(t=""),this._load_mode=t},scheduler.serverList=function(t,e){return e?(this.serverList[t]=e.slice(0),this.serverList[t]):(this.serverList[t]=this.serverList[t]||[],this.serverList[t])},scheduler._userdata={},scheduler._magic_parser=function(t){var e;if(t.getXMLTopNode||(t=scheduler.$ajax.parse(t)),"data"!=(e=scheduler.$ajax.xmltop("data",t.xmlDoc)).tagName)return null;var i=e.getAttribute("dhx_security");i&&(dhtmlx.security_key=i);for(var n=scheduler.$ajax.xpath("//coll_options",t.xmlDoc),r=0;r<n.length;r++){var a=n[r].getAttribute("for"),s=this.serverList[a];if(s){s.splice(0,s.length);for(var o=scheduler.$ajax.xpath(".//item",n[r]),l=0;l<o.length;l++){for(var d=o[l].attributes,c={key:o[l].getAttribute("value"),label:o[l].getAttribute("label")},h=0;h<d.length;h++){var u=d[h];"value"!=u.nodeName&&"label"!=u.nodeName&&(c[u.nodeName]=u.nodeValue)}s.push(c)}}}n.length&&scheduler.callEvent("onOptionsLoad",[]);var _=scheduler.$ajax.xpath("//userdata",t.xmlDoc);for(r=0;r<_.length;r++){var f=this._xmlNodeToJSON(_[r]);this._userdata[f.name]=f.text}var g=[];for(e=scheduler.$ajax.xpath("//event",t.xmlDoc),r=0;r<e.length;r++){var p=g[r]=this._xmlNodeToJSON(e[r]);scheduler._init_event(p)}return g},scheduler._xmlNodeToJSON=function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;for(i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];1==n.nodeType&&(e[n.tagName]=n.firstChild?n.firstChild.nodeValue:"")}return e.text||(e.text=t.firstChild?t.firstChild.nodeValue:""),e},scheduler.attachEvent("onXLS",function(){var t;!0===this.config.show_loading&&((t=this.config.show_loading=document.createElement("div")).className="dhx_loading",t.style.left=Math.round((this._x-128)/2)+"px",t.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(t))}),scheduler.attachEvent("onXLE",function(){var t=this.config.show_loading;t&&"object"==typeof t&&(this._obj.removeChild(t),this.config.show_loading=!0)}),scheduler.ical={parse:function(t){var e=t.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(e.length){e[0]=e[0].replace(/[\r\n]+ /g,""),e[0]=e[0].replace(/[\r\n]+(?=[a-z \t])/g," "),e[0]=e[0].replace(/\;[^:\r\n]*:/g,":");for(var i,n=[],r=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");null!==(i=r.exec(e));){for(var a,s={},o=/[^\r\n]+[\r\n]+/g;null!==(a=o.exec(i[1]));)this.parse_param(a.toString(),s);s.uid&&!s.id&&(s.id=s.uid),n.push(s)}return n}},parse_param:function(t,e){var i=t.indexOf(":");if(-1!=i){var n=t.substr(0,i).toLowerCase(),r=t.substr(i+1).replace(/\\\,/g,",").replace(/[\r\n]+$/,"");"summary"==n?n="text":"dtstart"==n?(n="start_date",r=this.parse_date(r,0,0)):"dtend"==n&&(n="end_date",r=this.parse_date(r,0,0)),e[n]=r}},parse_date:function(t,e,i){var n=t.split("T"),r=!1;n[1]&&(e=n[1].substr(0,2),i=n[1].substr(2,2),r=!("Z"!=n[1][6]));var a=n[0].substr(0,4),s=parseInt(n[0].substr(4,2),10)-1,o=n[0].substr(6,2);return scheduler.config.server_utc||r?new Date(Date.UTC(a,s,o,e,i)):new Date(a,s,o,e,i)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"},scheduler._lightbox_controls={},scheduler.formSection=function(t){for(var e=this.config.lightbox.sections,i=0;i<e.length&&e[i].name!=t;i++);var n=e[i];scheduler._lightbox||scheduler.getLightbox();var r=document.getElementById(n.id),a=r.nextSibling,s={section:n,header:r,node:a,getValue:function(t){return scheduler.form_blocks[n.type].get_value(a,t||{},n)},setValue:function(t,e){return scheduler.form_blocks[n.type].set_value(a,t,e||{},n)}},o=scheduler._lightbox_controls["get_"+n.type+"_control"];return o?o(s):s},scheduler._lightbox_controls.get_template_control=function(t){return t.control=t.node,t},scheduler._lightbox_controls.get_select_control=function(t){return t.control=t.node.getElementsByTagName("select")[0],t},scheduler._lightbox_controls.get_textarea_control=function(t){return t.control=t.node.getElementsByTagName("textarea")[0],t},scheduler._lightbox_controls.get_time_control=function(t){return t.control=t.node.getElementsByTagName("select"),t},scheduler._lightbox_controls.defaults={template:{height:30},textarea:{height:200},select:{height:23},time:{height:20}},scheduler.form_blocks={template:{render:function(t){var e=scheduler._lightbox_controls.defaults.template;return"<div class='dhx_cal_ltext dhx_cal_template' style='height:"+(t.height||(e?e.height:30)||30)+"px;'></div>"},set_value:function(t,e,i,n){t.innerHTML=e||""},get_value:function(t,e,i){return t.innerHTML||""},focus:function(t){}},textarea:{render:function(t){var e=scheduler._lightbox_controls.defaults.textarea;return"<div class='dhx_cal_ltext' style='height:"+(t.height||(e?e.height:200)||"130")+"px;'><textarea></textarea></div>"},set_value:function(t,e,i){scheduler.form_blocks.textarea._get_input(t).value=e||""},get_value:function(t,e){return scheduler.form_blocks.textarea._get_input(t).value},focus:function(t){var e=scheduler.form_blocks.textarea._get_input(t);scheduler._focus(e,!0)},_get_input:function(t){return t.getElementsByTagName("textarea")[0]}},select:{render:function(t){for(var e=scheduler._lightbox_controls.defaults.select,i="<div class='dhx_cal_ltext' style='height:"+(t.height||(e?e.height:23)||"23")+"px;'><select style='width:100%;'>",n=0;n<t.options.length;n++)i+="<option value='"+t.options[n].key+"'>"+t.options[n].label+"</option>";return i+"</select></div>"},set_value:function(t,e,i,n){var r=t.firstChild;!r._dhx_onchange&&n.onchange&&(r.onchange=n.onchange,r._dhx_onchange=!0),void 0===e&&(e=(r.options[0]||{}).value),r.value=e||""},get_value:function(t,e){return t.firstChild.value},focus:function(t){scheduler._focus(t.firstChild,!0)}},time:{render:function(t){t.time_format||(t.time_format=["%H:%i","%d","%m","%Y"]),t._time_format_order={};var e=t.time_format,i=scheduler.config,n=scheduler.date.date_part(scheduler._currentDate()),r=1440,a=0;scheduler.config.limit_time_select&&(r=60*i.last_hour+1,a=60*i.first_hour,n.setHours(i.first_hour));for(var s="",o=0;o<e.length;o++){var l=e[o];o>0&&(s+=" ");var d="",c="";switch(l){case"%Y":d="dhx_lightbox_year_select",t._time_format_order[3]=o;for(var h=n.getFullYear()-5,u=0;10>u;u++)c+="<option value='"+(h+u)+"'>"+(h+u)+"</option>";break;case"%m":for(d="dhx_lightbox_month_select",t._time_format_order[2]=o,u=0;12>u;u++)c+="<option value='"+u+"'>"+this.locale.date.month_full[u]+"</option>";break;case"%d":for(d="dhx_lightbox_day_select",t._time_format_order[1]=o,u=1;32>u;u++)c+="<option value='"+u+"'>"+u+"</option>";break;case"%H:%i":d="dhx_lightbox_time_select",t._time_format_order[0]=o,u=a;var _=n.getDate();for(t._time_values=[];r>u;)c+="<option value='"+u+"'>"+this.templates.time_picker(n)+"</option>",t._time_values.push(u),n.setTime(n.valueOf()+60*this.config.time_step*1e3),u=24*(n.getDate()!=_?1:0)*60+60*n.getHours()+n.getMinutes()}if(c){var f=scheduler._waiAria.lightboxSelectAttrString(l);s+="<select class='"+d+"' "+(t.readonly?"disabled='disabled'":"")+f+">"+c+"</select> "}}var g=scheduler._lightbox_controls.defaults.select;return"<div style='height:"+((g?g.height:23)||30)+"px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>"+s+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+s+"</div>"},set_value:function(t,e,i,n){function r(t,e,i){for(var r=n._time_values,a=60*i.getHours()+i.getMinutes(),s=a,o=!1,l=0;l<r.length;l++){var c=r[l];if(c===a){o=!0;break}a>c&&(s=c)}t[e+d[0]].value=o?a:s,o||s||(t[e+d[0]].selectedIndex=-1),t[e+d[1]].value=i.getDate(),t[e+d[2]].value=i.getMonth(),t[e+d[3]].value=i.getFullYear()}var a,s,o=scheduler.config,l=t.getElementsByTagName("select"),d=n._time_format_order;if(o.full_day){if(!t._full_day){var c="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+scheduler.locale.labels.full_day+"&nbsp;</label></input>";scheduler.config.wide_form||(c=t.previousSibling.innerHTML+c),t.previousSibling.innerHTML=c,t._full_day=!0}var h=t.previousSibling.getElementsByTagName("input")[0];h.checked=0===scheduler.date.time_part(i.start_date)&&0===scheduler.date.time_part(i.end_date),l[d[0]].disabled=h.checked,l[d[0]+l.length/2].disabled=h.checked,h.onclick=function(){if(h.checked){var e={};scheduler.form_blocks.time.get_value(t,e,n),a=scheduler.date.date_part(e.start_date),(+(s=scheduler.date.date_part(e.end_date))==+a||+s>=+a&&(0!==i.end_date.getHours()||0!==i.end_date.getMinutes()))&&(s=scheduler.date.add(s,1,"day"))}else a=null,s=null;l[d[0]].disabled=h.checked,l[d[0]+l.length/2].disabled=h.checked,r(l,0,a||i.start_date),r(l,4,s||i.end_date)}}if(o.auto_end_date&&o.event_duration)for(var u=function(){a=new Date(l[d[3]].value,l[d[2]].value,l[d[1]].value,0,l[d[0]].value),s=new Date(a.getTime()+60*scheduler.config.event_duration*1e3),r(l,4,s)},_=0;4>_;_++)l[_].onchange=u;r(l,0,i.start_date),r(l,4,i.end_date)},get_value:function(t,e,i){var n=t.getElementsByTagName("select"),r=i._time_format_order;if(e.start_date=new Date(n[r[3]].value,n[r[2]].value,n[r[1]].value,0,n[r[0]].value),e.end_date=new Date(n[r[3]+4].value,n[r[2]+4].value,n[r[1]+4].value,0,n[r[0]+4].value),!n[r[3]].value||!n[r[3]+4].value){var a=scheduler.getEvent(scheduler._lightbox_id);a&&(e.start_date=a.start_date,e.end_date=a.end_date)}return e.end_date<=e.start_date&&(e.end_date=scheduler.date.add(e.start_date,scheduler.config.time_step,"minute")),{start_date:new Date(e.start_date),end_date:new Date(e.end_date)}},focus:function(t){scheduler._focus(t.getElementsByTagName("select")[0])}}},scheduler.showCover=function(t){if(t){t.style.display="block";var e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,i=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,n=window.innerHeight||document.documentElement.clientHeight;t.style.top=e?Math.round(e+Math.max((n-t.offsetHeight)/2,0))+"px":Math.round(Math.max((n-t.offsetHeight)/2,0)+9)+"px",t.style.left=document.documentElement.scrollWidth>document.body.offsetWidth?Math.round(i+(document.body.offsetWidth-t.offsetWidth)/2)+"px":Math.round((document.body.offsetWidth-t.offsetWidth)/2)+"px"}this.show_cover()},scheduler.showLightbox=function(t){if(t){if(!this.callEvent("onBeforeLightbox",[t]))return void(this._new_event&&(this._new_event=null));var e=this.getLightbox();this.showCover(e),this._fill_lightbox(t,e),this._waiAria.lightboxVisibleAttr(e),this.callEvent("onLightbox",[t])}},scheduler._fill_lightbox=function(t,e){var i=this.getEvent(t),n=e.getElementsByTagName("span"),r=[];if(scheduler.templates.lightbox_header){r.push("");var a=scheduler.templates.lightbox_header(i.start_date,i.end_date,i);r.push(a),n[1].innerHTML="",n[2].innerHTML=a}else{var s=this.templates.event_header(i.start_date,i.end_date,i),o=(this.templates.event_bar_text(i.start_date,i.end_date,i)||"").substr(0,70);r.push(s),r.push(o),n[1].innerHTML=s,n[2].innerHTML=o}this._waiAria.lightboxHeader(e,r.join(" "));for(var l=this.config.lightbox.sections,d=0;d<l.length;d++){var c=l[d],h=scheduler._get_lightbox_section_node(c),u=this.form_blocks[c.type];u.set_value.call(this,h,void 0!==i[c.map_to]?i[c.map_to]:c.default_value,i,c),l[d].focus&&u.focus.call(this,h)}scheduler._lightbox_id=t},scheduler._get_lightbox_section_node=function(t){return document.getElementById(t.id).nextSibling},scheduler._lightbox_out=function(t){for(var e=this.config.lightbox.sections,i=0;i<e.length;i++){var n=document.getElementById(e[i].id),r=this.form_blocks[e[i].type].get_value.call(this,n=n?n.nextSibling:n,t,e[i]);"auto"!=e[i].map_to&&(t[e[i].map_to]=r)}return t},scheduler._empty_lightbox=function(t){var e=this.getEvent(scheduler._lightbox_id);this.getLightbox(),this._lame_copy(e,t),this.setEvent(e.id,e),this._edit_stop_event(e,!0),this.render_view_data()},scheduler.hide_lightbox=function(t){scheduler.endLightbox(!1,this.getLightbox())},scheduler.hideCover=function(t){t&&(t.style.display="none"),this.hide_cover()},scheduler.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},scheduler.show_cover=function(){if(!this._cover){this._cover=document.createElement("div"),this._cover.className="dhx_cal_cover";var t=void 0!==document.height?document.height:document.body.offsetHeight,e=document.documentElement?document.documentElement.scrollHeight:0;this._cover.style.height=Math.max(t,e)+"px",document.body.appendChild(this._cover)}},scheduler.save_lightbox=function(){var t=this._lightbox_out({},this._lame_copy(this.getEvent(this._lightbox_id)));(!this.checkEvent("onEventSave")||this.callEvent("onEventSave",[this._lightbox_id,t,this._new_event]))&&(this._empty_lightbox(t),this.hide_lightbox())},scheduler.startLightbox=function(t,e){this._lightbox_id=t,this._custom_lightbox=!0,this._temp_lightbox=this._lightbox,this._lightbox=e,this.showCover(e)},scheduler.endLightbox=function(t,e){e=e||scheduler.getLightbox();var i=scheduler.getEvent(this._lightbox_id);i&&this._edit_stop_event(i,t),t&&scheduler.render_view_data(),this.hideCover(e),this._custom_lightbox&&(this._lightbox=this._temp_lightbox,this._custom_lightbox=!1),this._temp_lightbox=this._lightbox_id=null,this._waiAria.lightboxHiddenAttr(e),this.callEvent("onAfterLightbox",[])},scheduler.resetLightbox=function(){scheduler._lightbox&&!scheduler._custom_lightbox&&scheduler._lightbox.parentNode.removeChild(scheduler._lightbox),scheduler._lightbox=null},scheduler.cancel_lightbox=function(){this.callEvent("onEventCancel",[this._lightbox_id,this._new_event]),this.hide_lightbox()},scheduler._init_lightbox_events=function(){this.getLightbox().onclick=function(t){var e=t?t.target:event.srcElement;if(e.className||(e=e.previousSibling),!(e&&e.className&&scheduler._getClassName(e).indexOf("dhx_btn_set")>-1)||(e=e.querySelector("[dhx_button]"))){var i=scheduler._getClassName(e);if(e&&i)switch(i){case"dhx_save_btn":scheduler.save_lightbox();break;case"dhx_delete_btn":scheduler._dhtmlx_confirm(scheduler.locale.labels.confirm_deleting,scheduler.locale.labels.title_confirm_deleting,function(){scheduler.deleteEvent(scheduler._lightbox_id),scheduler._new_event=null,scheduler.hide_lightbox()});break;case"dhx_cancel_btn":scheduler.cancel_lightbox();break;default:var n,r;e.getAttribute("dhx_button")?scheduler.callEvent("onLightboxButton",[i,e,t]):(-1!=i.indexOf("dhx_custom_button")&&(-1!=i.indexOf("dhx_custom_button_")?(n=e.parentNode.getAttribute("index"),r=e.parentNode.parentNode):(n=e.getAttribute("index"),r=e.parentNode,e=e.firstChild)),n&&scheduler.form_blocks[scheduler.config.lightbox.sections[n].type].button_click(n,e,r,r.nextSibling))}}},this.getLightbox().onkeydown=function(t){var e=t||window.event,i=t.target||t.srcElement,n=i.querySelector("[dhx_button]");switch(n||(n=i.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")),(t||e).keyCode){case 32:if((t||e).shiftKey)return;n&&n.click&&n.click();break;case scheduler.keys.edit_save:if((t||e).shiftKey)return;n&&n.click?n.click():scheduler.save_lightbox();break;case scheduler.keys.edit_cancel:scheduler.cancel_lightbox()}}},scheduler.setLightboxSize=function(){var t=this._lightbox;if(t){var e=t.childNodes[1];e.style.height="0px",e.style.height=e.scrollHeight+"px",t.style.height=e.scrollHeight+scheduler.xy.lightbox_additional_height+"px",e.style.height=e.scrollHeight+"px"}},scheduler._init_dnd_events=function(){dhtmlxEvent(document.body,"mousemove",scheduler._move_while_dnd),dhtmlxEvent(document.body,"mouseup",scheduler._finish_dnd),scheduler._init_dnd_events=function(){}},scheduler._move_while_dnd=function(t){if(scheduler._dnd_start_lb){document.dhx_unselectable||(document.body.className+=" dhx_unselectable",document.dhx_unselectable=!0);var e=scheduler.getLightbox(),i=t&&t.target?[t.pageX,t.pageY]:[event.clientX,event.clientY];e.style.top=scheduler._lb_start[1]+i[1]-scheduler._dnd_start_lb[1]+"px",e.style.left=scheduler._lb_start[0]+i[0]-scheduler._dnd_start_lb[0]+"px"}},scheduler._ready_to_dnd=function(t){var e=scheduler.getLightbox();scheduler._lb_start=[parseInt(e.style.left,10),parseInt(e.style.top,10)],scheduler._dnd_start_lb=t&&t.target?[t.pageX,t.pageY]:[event.clientX,event.clientY]},scheduler._finish_dnd=function(){scheduler._lb_start&&(scheduler._lb_start=scheduler._dnd_start_lb=!1,document.body.className=document.body.className.replace(" dhx_unselectable",""),document.dhx_unselectable=!1)},scheduler.getLightbox=function(){if(!this._lightbox){var t=document.createElement("div");t.className="dhx_cal_light",scheduler.config.wide_form&&(t.className+=" dhx_cal_light_wide"),scheduler.form_blocks.recurring&&(t.className+=" dhx_cal_light_rec"),/msie|MSIE 6/.test(navigator.userAgent)&&(t.className+=" dhx_ie6"),t.style.visibility="hidden";for(var e=this._lightbox_template,i=this.config.buttons_left,n=0;n<i.length;n++)e+="<div "+this._waiAria.lightboxButtonAttrString(i[n])+" class='dhx_btn_set dhx_left_btn_set "+i[n]+"_set'><div dhx_button='1' class='"+i[n]+"'></div><div>"+scheduler.locale.labels[i[n]]+"</div></div>";for(i=this.config.buttons_right,n=0;n<i.length;n++)e+="<div "+this._waiAria.lightboxButtonAttrString(i[n])+" class='dhx_btn_set dhx_right_btn_set "+i[n]+"_set' style='float:right;'><div dhx_button='1' class='"+i[n]+"'></div><div>"+scheduler.locale.labels[i[n]]+"</div></div>";t.innerHTML=e+="</div>",scheduler.config.drag_lightbox&&(t.firstChild.onmousedown=scheduler._ready_to_dnd,t.firstChild.onselectstart=function(){return!1},t.firstChild.style.cursor="move",scheduler._init_dnd_events()),this._waiAria.lightboxAttr(t),document.body.insertBefore(t,document.body.firstChild),this._lightbox=t;var r=this.config.lightbox.sections;for(e="",n=0;n<r.length;n++){var a=this.form_blocks[r[n].type];if(a){r[n].id="area_"+this.uid();var s="";r[n].button&&(s="<div "+scheduler._waiAria.lightboxSectionButtonAttrString(this.locale.labels["button_"+r[n].button])+" class='dhx_custom_button' index='"+n+"'><div class='dhx_custom_button_"+r[n].button+"'></div><div>"+this.locale.labels["button_"+r[n].button]+"</div></div>"),this.config.wide_form&&(e+="<div class='dhx_wrap_section'>");var o=this.locale.labels["section_"+r[n].name];"string"!=typeof o&&(o=r[n].name),e+="<div id='"+r[n].id+"' class='dhx_cal_lsection'>"+s+"<label>"+o+"</label></div>"+a.render.call(this,r[n]),e+="</div>"}}var l=t.getElementsByTagName("div");for(n=0;n<l.length;n++){var d=l[n];if("dhx_cal_larea"==scheduler._getClassName(d)){d.innerHTML=e;break}}scheduler._bindLightboxLabels(r),this.setLightboxSize(),this._init_lightbox_events(this),t.style.display="none",t.style.visibility="visible"}return this._lightbox},scheduler._bindLightboxLabels=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.id&&document.getElementById(i.id)){for(var n=document.getElementById(i.id).querySelector("label"),r=scheduler._get_lightbox_section_node(i);r&&!r.querySelector;)r=r.nextSibling;var a=!0;if(r){var s=r.querySelector("input, select, textarea");s&&(i.inputId=s.id||"input_"+scheduler.uid(),s.id||(s.id=i.inputId),n.setAttribute("for",i.inputId),a=!1)}a&&scheduler.form_blocks[i.type].focus&&(n.onclick=function(t){return function(){var e=scheduler.form_blocks[t.type],i=scheduler._get_lightbox_section_node(t);e&&e.focus&&e.focus.call(scheduler,i)}}(i))}}},scheduler.attachEvent("onEventIdChange",function(t,e){this._lightbox_id==t&&(this._lightbox_id=e)}),scheduler._lightbox_template="<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>",scheduler._init_touch_events=function(){if(this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))&&(this.xy.scroll_width=0,this._mobile=!0),this.config.touch){var t=!0;try{document.createEvent("TouchEvent")}catch(e){t=!1}t?this._touch_events(["touchmove","touchstart","touchend"],function(t){return t.touches&&t.touches.length>1?null:t.touches[0]?{target:t.target,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t},function(){return!1}):window.PointerEvent||window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(t){return"mouse"==t.pointerType?null:t},function(t){return!t||"mouse"==t.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t},function(t){return!t||t.pointerType==t.MSPOINTER_TYPE_MOUSE})}},scheduler._touch_events=function(t,e,i){function n(t,e,n){t.addEventListener(e,function(t){return!!scheduler._is_lightbox_open()||(i(t)?void 0:n(t))},{passive:!1})}function r(t){i(t)||(scheduler._hide_global_tip(),l&&(scheduler._on_mouse_up(e(t||event)),scheduler._temp_touch_block=!1),scheduler._drag_id=null,scheduler._drag_mode=null,scheduler._drag_pos=null,scheduler._pointerDragId=null,clearTimeout(o),l=c=!1,d=!0)}var a,s,o,l,d,c,h=(-1!=navigator.userAgent.indexOf("Android")&&navigator.userAgent.indexOf("WebKit"),0);n(document.body,t[0],function(t){if(!i(t)){var n=e(t);if(n){if(l)return function(t){if(!i(t)){var e=scheduler.getState().drag_mode,n=!!scheduler.matrix&&scheduler.matrix[scheduler._mode],r=scheduler.render_view_data;"create"==e&&n&&(scheduler.render_view_data=function(){for(var t=scheduler.getState().drag_id,e=scheduler.getEvent(t),i=n.y_property,r=scheduler.getEvents(e.start_date,e.end_date),a=0;a<r.length;a++)r[a][i]!=e[i]&&(r.splice(a,1),a--);e._sorder=r.length-1,e._count=r.length,this.render_data([e],scheduler.getState().mode)}),scheduler._on_mouse_move(t),"create"==e&&n&&(scheduler.render_view_data=r),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0}}(n),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,scheduler._update_global_tip(),!1;if(s=e(t),c)return s?void((a.target!=s.target||Math.abs(a.pageX-s.pageX)>5||Math.abs(a.pageY-s.pageY)>5)&&(d=!0,clearTimeout(o))):void(d=!0)}}}),n(this._els.dhx_cal_data[0],"scroll",r),n(this._els.dhx_cal_data[0],"touchcancel",r),n(this._els.dhx_cal_data[0],"contextmenu",function(t){return i(t)?void 0:c?(t&&t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!1):void 0}),n(this._obj,t[1],function(t){if(!i(t)){var n;if(scheduler._pointerDragId=t.pointerId,l=d=!1,c=!0,!(n=s=e(t)))return void(d=!0);var r=new Date;if(!d&&!l&&250>r-h)return scheduler._click.dhx_cal_data(n),window.setTimeout(function(){n.type="dblclick",scheduler._on_dbl_click(n)},50),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,scheduler._block_next_stop=!0,!1;if(h=r,!d&&!l&&scheduler.config.touch_drag){var u=scheduler._locate_event(document.activeElement),_=scheduler._locate_event(n.target),f=a?scheduler._locate_event(a.target):null;if(u&&_&&u==_&&u!=f)return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,scheduler._ignore_next_click=!1,scheduler._click.dhx_cal_data(n),a=n,!1;o=setTimeout(function(){l=!0;var t=a.target,e=scheduler._getClassName(t);t&&-1!=e.indexOf("dhx_body")&&(t=t.previousSibling),scheduler._on_mouse_down(a,t),scheduler._drag_mode&&"create"!=scheduler._drag_mode&&scheduler.for_rendered(scheduler._drag_id,function(t,e){t.style.display="none",scheduler._rendered.splice(e,1)}),scheduler.config.touch_tip&&scheduler._show_global_tip(),scheduler.updateEvent(scheduler._drag_id)},scheduler.config.touch_drag),a=n}}}),n(this._els.dhx_cal_data[0],t[2],function(t){return i(t)?void 0:(!l&&function(t,e,i,n){if(!t||!e)return!1;for(var r=t.target;r&&r!=scheduler._obj;)r=r.parentNode;if(r!=scheduler._obj)return!1;var a=Math.abs(t.pageY-e.pageY),s=Math.abs(t.pageX-e.pageX);return 100>a&&s>200&&(!a||s/a>3)&&(t.pageX>e.pageX?scheduler._click.dhx_cal_next_button():scheduler._click.dhx_cal_prev_button(),!0)}(a,s)&&(scheduler._block_next_stop=!0),l&&(scheduler._ignore_next_click=!0,setTimeout(function(){scheduler._ignore_next_click=!1},100)),r(t),scheduler._block_next_stop?(scheduler._block_next_stop=!1,t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1):void 0)}),dhtmlxEvent(document.body,t[2],r)},scheduler._show_global_tip=function(){scheduler._hide_global_tip();var t=scheduler._global_tip=document.createElement("div");t.className="dhx_global_tip",scheduler._update_global_tip(1),document.body.appendChild(t)},scheduler._update_global_tip=function(t){var e=scheduler._global_tip;if(e){var i="";if(scheduler._drag_id&&!t){var n=scheduler.getEvent(scheduler._drag_id);n&&(i="<div>"+(n._timed?scheduler.templates.event_header(n.start_date,n.end_date,n):scheduler.templates.day_date(n.start_date,n.end_date,n))+"</div>")}e.innerHTML="create"==scheduler._drag_mode||"new-size"==scheduler._drag_mode?(scheduler.locale.labels.drag_to_create||"Drag to create")+i:(scheduler.locale.labels.drag_to_move||"Drag to move")+i}},scheduler._hide_global_tip=function(){var t=scheduler._global_tip;t&&t.parentNode&&(t.parentNode.removeChild(t),scheduler._global_tip=0)},scheduler._dp_init=function(t){t._methods=["_set_event_text_style","","_dp_change_event_id","_dp_hook_delete"],this._dp_change_event_id=function(t,e){scheduler.getEvent(t)&&scheduler.changeEventId(t,e)},this._dp_hook_delete=function(e,i){return scheduler.getEvent(e)?(e!=i&&("true_deleted"==this.getUserData(e,t.action_param)&&this.setUserData(e,t.action_param,"updated"),this.changeEventId(e,i)),this.deleteEvent(i,!0)):void 0},this.attachEvent("onEventAdded",function(e){!this._loading&&this._validId(e)&&t.setUpdated(e,!0,"inserted")}),this.attachEvent("onConfirmedBeforeEventDelete",function(e){if(this._validId(e)){var i=t.getState(e);return"inserted"==i||this._new_event?(t.setUpdated(e,!1),!0):"deleted"!=i&&("true_deleted"==i||(t.setUpdated(e,!0,"deleted"),!1))}}),this.attachEvent("onEventChanged",function(e){!this._loading&&this._validId(e)&&t.setUpdated(e,!0,"updated")}),scheduler.attachEvent("onClearAll",function(){t._in_progress={},t._invalid={},t.updatedRows=[],t._waitMode=0}),t._objToJson=function(e,i,n){for(var r in n=n||"",i=i||{},e)0!==r.indexOf("_")&&(e[r]&&e[r].getUTCFullYear?i[n+r]=this.obj.templates.xml_format(e[r]):e[r]&&"object"==typeof e[r]?t._objToJson(e[r],i,n+r+"."):i[n+r]=e[r]);return i},t._getRowData=function(t,e){var i=this.obj.getEvent(t);return this._objToJson(i)},t._clearUpdateFlag=function(){},t.attachEvent("insertCallback",scheduler._update_callback),t.attachEvent("updateCallback",scheduler._update_callback),t.attachEvent("deleteCallback",function(t,e){this.obj.getEvent(e)?(this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteEvent(e)):this.obj._add_rec_marker&&this.obj._update_callback(t,e)})},scheduler._validId=function(t){return!0},scheduler.setUserData=function(t,e,i){if(t){var n=this.getEvent(t);n&&(n[e]=i)}else this._userdata[e]=i},scheduler.getUserData=function(t,e){if(t){var i=this.getEvent(t);return i?i[e]:null}return this._userdata[e]},scheduler._set_event_text_style=function(t,e){if(scheduler.getEvent(t)){this.for_rendered(t,function(t){t.style.cssText+=";"+e});var i=this.getEvent(t);i._text_style=e,this.event_updated(i)}},scheduler._update_callback=function(t,e){var i=scheduler._xmlNodeToJSON(t.firstChild);"none"==i.rec_type&&(i.rec_pattern="none"),i.text=i.text||i._tagvalue,i.start_date=scheduler.templates.xml_date(i.start_date),i.end_date=scheduler.templates.xml_date(i.end_date),scheduler.addEvent(i),scheduler._add_rec_marker&&scheduler.setCurrentView()},scheduler._skin_settings={fix_tab_position:[1,0],use_select_menu_space:[1,0],wide_form:[1,0],hour_size_px:[44,42],displayed_event_color:["#ff4a4a","ffc5ab"],displayed_event_text_color:["#ffef80","7e2727"]},scheduler._skin_xy={lightbox_additional_height:[90,50],nav_height:[59,22],bar_height:[24,20]},scheduler._is_material_skin=function(){return(scheduler.skin+"").indexOf("material")>-1},scheduler._border_box_bvents=function(){return scheduler._is_material_skin()},scheduler._configure=function(t,e,i){for(var n in e)void 0===t[n]&&(t[n]=e[n][i])},scheduler._skin_init=function(){if(!scheduler.skin)for(var t=document.getElementsByTagName("link"),e=0;e<t.length;e++){var i=t[e].href.match("dhtmlxscheduler_([a-z]+).css");if(i){scheduler.skin=i[1];break}}var n=0;if(!scheduler.skin||"classic"!==scheduler.skin&&"glossy"!==scheduler.skin||(n=1),scheduler._is_material_skin()){var r=scheduler.config.buttons_left.$inital,a=scheduler.config.buttons_right.$inital;if(r&&scheduler.config.buttons_left.slice().join()==r&&a&&scheduler.config.buttons_right.slice().join()==a){var s=scheduler.config.buttons_left.slice();scheduler.config.buttons_left=scheduler.config.buttons_right.slice(),scheduler.config.buttons_right=s}scheduler.xy.event_header_height=18,scheduler.xy.menu_width=25,scheduler.xy.week_agenda_scale_height=35,scheduler.xy.map_icon_width=38,scheduler._lightbox_controls.defaults.textarea.height=64,scheduler._lightbox_controls.defaults.time.height="auto"}if(this._configure(scheduler.config,scheduler._skin_settings,n),this._configure(scheduler.xy,scheduler._skin_xy,n),"flat"===scheduler.skin&&(scheduler.xy.scale_height=35,scheduler.templates.hour_scale=function(t){var e=t.getMinutes();return e=10>e?"0"+e:e,"<span class='dhx_scale_h'>"+t.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+e+"</span>"}),!n){var o=scheduler.config.minicalendar;o&&(o.padding=14),scheduler.templates.event_bar_date=function(t,e,i){return"\u2022 <b>"+scheduler.templates.event_date(t)+"</b> "},scheduler.attachEvent("onTemplatesReady",function(){var t=scheduler.date.date_to_str("%d");scheduler.templates._old_month_day||(scheduler.templates._old_month_day=scheduler.templates.month_day);var e=scheduler.templates._old_month_day;if(scheduler.templates.month_day=function(i){if("month"==this._mode){var n=t(i);return 1==i.getDate()&&(n=scheduler.locale.date.month_full[i.getMonth()]+" "+n),+i==+scheduler.date.date_part(this._currentDate())&&(n=scheduler.locale.labels.dhx_cal_today_button+" "+n),n}return e.call(this,i)},scheduler.config.fix_tab_position){var i=scheduler._els.dhx_cal_navline[0].getElementsByTagName("div"),n=null,r=211,a=[14,75,136],s=14;scheduler._is_material_skin()&&(a=[16,103,192],r=294,s=-1);for(var o=0;o<i.length;o++){var l=i[o],d=l.getAttribute("name");if(d){switch(l.style.right="auto",d){case"day_tab":l.style.left=a[0]+"px",l.className+=" dhx_cal_tab_first";break;case"week_tab":l.style.left=a[1]+"px";break;case"month_tab":l.style.left=a[2]+"px",l.className+=" dhx_cal_tab_last";break;default:l.style.left=r+"px",l.className+=" dhx_cal_tab_standalone",r=r+s+l.offsetWidth}l.className+=" "+d}else 0===(l.className||"").indexOf("dhx_minical_icon")&&l.parentNode==scheduler._els.dhx_cal_navline[0]&&(n=l)}n&&(n.style.left=r+"px")}}),scheduler._skin_init=function(){}}},window.jQuery&&function(t){var e=0,i=[];t.fn.dhx_scheduler=function(n){if("string"!=typeof n){var r=[];return this.each(function(){if(this&&this.getAttribute)if(this.getAttribute("dhxscheduler"))r.push(window[this.getAttribute("dhxscheduler")]);else{var t="scheduler";e&&(t="scheduler"+(e+1),window[t]=Scheduler.getSchedulerInstance());var i=window[t];for(var a in this.setAttribute("dhxscheduler",t),n)"data"!=a&&(i.config[a]=n[a]);this.getElementsByTagName("div").length||(this.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',this.className+=" dhx_cal_container"),i.init(this,i.config.date,i.config.mode),n.data&&i.parse(n.data),r.push(i),e++}}),1===r.length?r[0]:r}return i[n]?i[n].apply(this,[]):void t.error("Method "+n+" does not exist on jQuery.dhx_scheduler")}}(jQuery),function(){function t(t,e,i){e&&(t._date=e),i&&(t._mode=i)}var e=scheduler.setCurrentView,i=scheduler.updateView,n=null,r=null,a=function(e,a){var s=this;window.clearTimeout(r),window.clearTimeout(n);var o=s._date,l=s._mode;t(this,e,a),r=setTimeout(function(){return s.callEvent("onBeforeViewChange",[l,o,a||s._mode,e||s._date])?(i.call(s,e,a),s.callEvent("onViewChange",[s._mode,s._date]),window.clearTimeout(n),void(r=0)):void t(s,o,l)},scheduler.config.delay_render)},s=function(e,a){var s=this,o=arguments;t(this,e,a),window.clearTimeout(n),n=setTimeout(function(){r||i.apply(s,o)},scheduler.config.delay_render)};scheduler.attachEvent("onSchedulerReady",function(){scheduler.config.delay_render?(scheduler.setCurrentView=a,scheduler.updateView=s):(scheduler.setCurrentView=e,scheduler.updateView=i)})}();for(var i=0;i<Scheduler._schedulerPlugins.length;i++)Scheduler._schedulerPlugins[i](scheduler);return scheduler._internal_id=Scheduler._seed++,Scheduler.$syncFactory&&Scheduler.$syncFactory(scheduler),scheduler},window.scheduler=Scheduler.getSchedulerInstance(),dhtmlx&&dhtmlx.attaches&&(dhtmlx.attaches.attachScheduler=function(t,e,i,n){i=i||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var r=document.createElement("DIV");return r.id="dhxSchedObj_"+this._genStr(12),r.innerHTML='<div id="'+r.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+i+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>',document.body.appendChild(r.firstChild),this.attachObject(r.id,!1,!0),this.vs[this.av].sched=n,this.vs[this.av].schedId=r.id,n.setSizes=n.updateView,n.destructor=function(){},n.init(r.id,t,e),this.vs[this._viewRestore()].sched}),function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e,i){var n,r=i(3);t.exports={copy:function t(e){var i,n,a;if(e&&"object"==typeof e){for(a={},n=[Array,Number,String,Boolean],i=0;i<n.length;i++)e instanceof n[i]&&(a=i?new n[i](e):new n[i]);for(i in r.isDate(e)&&(a=new Date(e)),e)Object.prototype.hasOwnProperty.apply(e,[i])&&(a[i]=t(e[i]))}return a||e},defined:function(t){return void 0!==t},mixin:function(t,e,i){for(var n in e)(void 0===t[n]||i)&&(t[n]=e[n]);return t},uid:function(){return n||(n=(new Date).valueOf()),++n},bind:function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},event:function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,void 0!==n&&n):t.attachEvent&&t.attachEvent("on"+e,i)},eventRemove:function(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,void 0!==n&&n):t.detachEvent&&t.detachEvent("on"+e,i)}}},function(t,e){function i(t){var e=0,i=0,n=0,r=0;if(t.getBoundingClientRect){var a=t.getBoundingClientRect(),s=document.body,o=document.documentElement||document.body.parentNode||document.body,l=window.pageYOffset||o.scrollTop||s.scrollTop,d=window.pageXOffset||o.scrollLeft||s.scrollLeft;e=a.top+l-(o.clientTop||s.clientTop||0),i=a.left+d-(o.clientLeft||s.clientLeft||0),n=document.body.offsetWidth-a.right,r=document.body.offsetHeight-a.bottom}else{for(;t;)e+=parseInt(t.offsetTop,10),i+=parseInt(t.offsetLeft,10),t=t.offsetParent;n=document.body.offsetWidth-t.offsetWidth-i,r=document.body.offsetHeight-t.offsetHeight-e}return{y:Math.round(e),x:Math.round(i),width:t.offsetWidth,height:t.offsetHeight,right:Math.round(n),bottom:Math.round(r)}}function n(t){var e=!1,i=!1;if(window.getComputedStyle){var n=window.getComputedStyle(t,null);e=n.display,i=n.visibility}else t.currentStyle&&(e=t.currentStyle.display,i=t.currentStyle.visibility);return"none"!=e&&"hidden"!=i}function r(t){return!isNaN(t.getAttribute("tabindex"))&&1*t.getAttribute("tabindex")>=0}function a(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function s(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}function o(t){if(!t)return"";var e=t.className||"";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=""),d(e)}function l(t){return t.tagName?t:(t=t||window.event).target||t.srcElement}function d(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)}var c=document.createElement("div");t.exports={getNodePosition:i,getFocusableNodes:function(t){for(var e=t.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),i=Array.prototype.slice.call(e,0),o=0;o<i.length;o++){var l=i[o];(r(l)||s(l)||a(l))&&n(l)||(i.splice(o,1),o--)}return i},getScrollSize:function(){var t=document.createElement("div");t.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},getClassName:o,addClassName:function(t,e){e&&-1===t.className.indexOf(e)&&(t.className+=" "+e)},removeClassName:function(t,e){e=e.split(" ");for(var i=0;i<e.length;i++){var n=new RegExp("\\s?\\b"+e[i]+"\\b(?![-_.])","");t.className=t.className.replace(n,"")}},insertNode:function(t,e){c.innerHTML=e;var i=c.firstChild;return t.appendChild(i),i},removeNode:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},getChildNodes:function(t,e){for(var i=t.childNodes,n=i.length,r=[],a=0;a<n;a++){var s=i[a];s.className&&-1!==s.className.indexOf(e)&&r.push(s)}return r},toNode:function(t){return"string"==typeof t?document.getElementById(t)||document.querySelector(t)||document.body:t||document.body},locateClassName:function(t,e,i){void 0===i&&(i=!0);for(var n=l(t),r="";n;){if(r=o(n)){var a=r.indexOf(e);if(a>=0){if(!i)return n;var s=0===a||!d(r.charAt(a-1)),c=a+e.length>=r.length||!d(r.charAt(a+e.length));if(s&&c)return n}}n=n.parentNode}return null},locateAttribute:function(t,e){if(e){for(var i=l(t);i;){if(i.getAttribute&&i.getAttribute(e))return i;i=i.parentNode}return null}},getTargetNode:l,getRelativeEventPosition:function(t,e){if(t.pageX||t.pageY)var n={x:t.pageX,y:t.pageY};var r=document.documentElement,a=(n={x:t.clientX+r.scrollLeft-r.clientLeft,y:t.clientY+r.scrollTop-r.clientTop},i(e));return n.x=n.x-a.x+e.scrollLeft,n.y=n.y-a.y+e.scrollTop,n},isChildOf:function(t,e){for(;t&&t!=e;)t=t.parentNode;return t==e}}},function(t,e){var i=function(){this._connected=[],this._silent_mode=!1};i.prototype={_silentStart:function(){this._silent_mode=!0},_silentEnd:function(){this._silent_mode=!1}},t.exports=function(t){var e=new i;t.attachEvent=function(t,i,n){return t="ev_"+t.toLowerCase(),e[t]||(e[t]=function(t){var e=[],i=function(){for(var i=!0,n=0;n<e.length;n++)if(e[n]){var r=e[n].apply(t,arguments);i=i&&r}return i};return i.addEvent=function(t){return"function"==typeof t&&e.push(t)-1},i.removeEvent=function(t){e[t]=null},i}(n||this)),t+":"+e[t].addEvent(i)},t.attachAll=function(t,e){this.attachEvent("listen_all",t,e)},t.callEvent=function(t,i,n){if(e._silent_mode)return!0;var r="ev_"+t.toLowerCase();return e.ev_listen_all&&e.ev_listen_all.apply(n||this,[t].concat(i)),!e[r]||e[r].apply(n||this,i)},t.checkEvent=function(t){return!!e["ev_"+t.toLowerCase()]},t.detachEvent=function(t){if(t){var i=t.split(":");e[i[0]].removeEvent(i[1])}},t.detachAllEvents=function(){for(var t in e)0===t.indexOf("ev_")&&delete e[t]}}},function(t,e){t.exports={isDate:function(t){var e=["getFullYear","getMonth","getDate"];if(!t||"object"!=typeof t)return!1;for(var i=0;i<e.length;i++)if(!t[e[i]])return!1;return!0}}},function(t,e,i){var n=i(0),r=(i(10),i(2)),a=i(1),s=function(){"use strict";function t(t,e,i,s){t&&(this.$container=a.toNode(t),this.$parent=t),this.$config=n.mixin(e,{headerHeight:33}),this.$gantt=s,this.$domEvents=s._createDomEventScope(),this.$id=e.id||"c"+n.uid(),this.$name="cell",this.$factory=i,r(this)}return t.prototype.destructor=function(){this.$parent=this.$container=this.$view=null,this.$gantt.$services.getService("mouseEvents").detach("click","gantt_header_arrow",this._headerClickHandler),this.$domEvents.detachAll(),this.callEvent("onDestroy",[]),this.detachAllEvents()},t.prototype.cell=function(t){return null},t.prototype.scrollTo=function(t,e){1*t==t&&(this.$view.scrollLeft=t),1*e==e&&(this.$view.scrollTop=e)},t.prototype.clear=function(){this.getNode().innerHTML="",this.getNode().className="gantt_layout_content",this.getNode().style.padding="0"},t.prototype.resize=function(t){if(this.$parent)return this.$parent.resize(t);!1===t&&(this.$preResize=!0);var e=this.$container,i=e.offsetWidth,n=e.offsetHeight,r=this.getSize();e===document.body&&(i=document.body.offsetWidth,n=document.body.offsetHeight),i<r.minWidth&&(i=r.minWidth),i>r.maxWidth&&(i=r.maxWidth),n<r.minHeight&&(n=r.minHeight),n>r.maxHeight&&(n=r.maxHeight),this.setSize(i,n),this.$preResize=!1},t.prototype.hide=function(){this._hide(!0),this.resize()},t.prototype.show=function(t){this._hide(!1),t&&this.$parent&&this.$parent.show(),this.resize()},t.prototype._hide=function(t){if(!0===t&&this.$view.parentNode)this.$view.parentNode.removeChild(this.$view);else if(!1===t&&!this.$view.parentNode){var e=this.$parent.cellIndex(this.$id);this.$parent.moveView(this,e)}this.$config.hidden=t},t.prototype.$toHTML=function(t,e){void 0===t&&(t=""),e=[e||"",this.$config.css||""].join(" ");var i=this.$config,n="";return i.raw?t="string"==typeof i.raw?i.raw:"":(t||(t="<div class='gantt_layout_content' "+(e?" class='"+e+"' ":"")+" >"+(i.html||"")+"</div>"),i.header&&(n="<div class='gantt_layout_header'>"+(i.canCollapse?"<div class='gantt_layout_header_arrow'></div>":"")+"<div class='gantt_layout_header_content'>"+i.header+"</div></div>")),"<div class='gantt_layout_cell "+e+"' data-cell-id='"+this.$id+"'>"+n+t+"</div>"},t.prototype.$fill=function(t,e){this.$view=t,this.$parent=e,this.init()},t.prototype.getNode=function(){return this.$view.querySelector("gantt_layout_cell")||this.$view},t.prototype.init=function(){var t=this;this._headerClickHandler=function(e){a.locateAttribute(e,"data-cell-id")==t.$id&&t.toggle()},this.$gantt.$services.getService("mouseEvents").delegate("click","gantt_header_arrow",this._headerClickHandler),this.callEvent("onReady",[])},t.prototype.toggle=function(){this.$config.collapsed=!this.$config.collapsed,this.resize()},t.prototype.getSize=function(){var t={height:this.$config.height||0,width:this.$config.width||0,gravity:this.$config.gravity||1,minHeight:this.$config.minHeight||0,minWidth:this.$config.minWidth||0,maxHeight:this.$config.maxHeight||1e5,maxWidth:this.$config.maxWidth||1e5};if(this.$config.collapsed){var e="x"===this.$config.mode;t[e?"width":"height"]=t[e?"maxWidth":"maxHeight"]=this.$config.headerHeight}return t},t.prototype.getContentSize=function(){var t=this.$lastSize.contentX;t!==1*t&&(t=this.$lastSize.width);var e=this.$lastSize.contentY;return e!==1*e&&(e=this.$lastSize.height),{width:t,height:e}},t.prototype._getBorderSizes=function(){var t={top:0,right:0,bottom:0,left:0,horizontal:0,vertical:0};return this._currentBorders&&(this._currentBorders[this._borders.left]&&(t.left=1,t.horizontal++),this._currentBorders[this._borders.right]&&(t.right=1,t.horizontal++),this._currentBorders[this._borders.top]&&(t.top=1,t.vertical++),this._currentBorders[this._borders.bottom]&&(t.bottom=1,t.vertical++)),t},t.prototype.setSize=function(t,e){this.$view.style.width=t+"px",this.$view.style.height=e+"px";var i=this._getBorderSizes();this.$lastSize={x:t,y:e,contentX:t-i.horizontal,contentY:e-i.vertical},this.$config.header?this._sizeHeader():this._sizeContent()},t.prototype._borders={left:"gantt_layout_cell_border_left",right:"gantt_layout_cell_border_right",top:"gantt_layout_cell_border_top",bottom:"gantt_layout_cell_border_bottom"},t.prototype._setBorders=function(t,e){e||(e=this);var i=e.$view;for(var n in this._borders)a.removeClassName(i,this._borders[n]);"string"==typeof t&&(t=[t]);var r={};for(n=0;n<t.length;n++)a.addClassName(i,t[n]),r[t[n]]=!0;e._currentBorders=r},t.prototype._sizeContent=function(){var t=this.$view.childNodes[0];"gantt_layout_content"==t.className&&(t.style.height=this.$lastSize.contentY+"px")},t.prototype._sizeHeader=function(){var t=this.$lastSize;t.contentY-=this.$config.headerHeight;var e=this.$view.childNodes[0],i=this.$view.childNodes[1],n="x"===this.$config.mode;if(this.$config.collapsed)if(i.style.display="none",n){e.className="gantt_layout_header collapsed_x",e.style.width=t.y+"px";var r=Math.floor(t.y/2-t.x/2);e.style.transform="rotate(90deg) translate("+r+"px, "+r+"px)",i.style.display="none"}else e.className="gantt_layout_header collapsed_y";else e.className=n?"gantt_layout_header":"gantt_layout_header vertical",e.style.width="auto",e.style.transform="",i.style.display="",i.style.height=t.contentY+"px";e.style.height=this.$config.headerHeight+"px"},t}();t.exports=s},function(t,e){t.exports=function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}},function(t,e){var i={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};t.exports={getSecondsInUnit:function(t){return i[t]||t.hour},forEach:function(t,e){for(var i=t.slice(),n=0;n<i.length;n++)e(i[n],n)},arrayMap:function(t,e){for(var i=t.slice(),n=[],r=0;r<i.length;r++)n.push(e(i[r],r));return n}}},function(t,e){var i={isIE:navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,isIE6:!window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:navigator.userAgent.indexOf("Opera")>=0,isChrome:navigator.userAgent.indexOf("Chrome")>=0,isKHTML:navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0,isFF:navigator.userAgent.indexOf("Firefox")>=0,isIPad:navigator.userAgent.search(/iPad/gi)>=0,isEdge:-1!=navigator.userAgent.indexOf("Edge")};t.exports=i},function(t,e){t.exports=function(t){var e=[];return{delegate:function(i,n,r,a){e.push([i,n,r,a]),t.$services.getService("mouseEvents").delegate(i,n,r,a)},destructor:function(){for(var i=t.$services.getService("mouseEvents"),n=0;n<e.length;n++){var r=e[n];i.detach(r[0],r[1],r[2],r[3])}e=[]}}}},function(t,e){t.exports=function(t,e){if(!e)return!0;if(t._on_timeout)return!1;var i=Math.ceil(1e3/e);return i<2||(setTimeout(function(){delete t._on_timeout},i),t._on_timeout=!0,!0)}},function(t,e,i){var n=i(0);t.exports=function t(e,i){e=e||n.event,i=i||n.eventRemove;var r=[];return{attach:function(t,i,n,a){r.push({element:t,event:i,callback:n,capture:a}),e(t,i,n,a)},detach:function(t,e,n,a){i(t,e,n,a);for(var s=0;s<r.length;s++)(n=r[s]).element===t&&n.event===e&&n.callback===n&&n.capture===a&&(r.splice(s,1),s--)},detachAll:function(){for(var t=0;t<r.length;t++)i(r[t].element,r[t].event,r[t].callback,r[t].capture),i(r[t].element,r[t].event,r[t].callback,void 0),i(r[t].element,r[t].event,r[t].callback,!1),i(r[t].element,r[t].event,r[t].callback,!0);r=[]},extend:function(){return t(this.event,this.eventRemove)}}}},function(t,e,i){var n=i(5),r=i(1),a=function(t){"use strict";function e(e,i,n){var r=t.apply(this,arguments)||this;return e&&(r.$root=!0),r._parseConfig(i),r.$name="layout",r}return n(e,t),e.prototype.destructor=function(){this.$container&&this.$view&&r.removeNode(this.$view);for(var e=0;e<this.$cells.length;e++)this.$cells[e].destructor();this.$cells=[],t.prototype.destructor.call(this)},e.prototype._resizeScrollbars=function(t,e){function i(t){t.$parent.show(),a=!0,s.push(t)}function n(t){t.$parent.hide(),a=!0,o.push(t)}for(var r,a=!1,s=[],o=[],l=0;l<e.length;l++)t[(r=e[l]).$config.scroll]?n(r):r.shouldHide()?n(r):r.shouldShow()?i(r):r.isVisible()?s.push(r):o.push(r);var d={};for(l=0;l<s.length;l++)s[l].$config.group&&(d[s[l].$config.group]=!0);for(l=0;l<o.length;l++)(r=o[l]).$config.group&&d[r.$config.group]&&i(r);return a},e.prototype._syncCellSizes=function(t,e){if(t){var i={};return this._eachChild(function(t){t.$config.group&&"scrollbar"!=t.$name&&"resizer"!=t.$name&&(i[t.$config.group]||(i[t.$config.group]=[]),i[t.$config.group].push(t))}),i[t]&&this._syncGroupSize(i[t],e),i[t]}},e.prototype._syncGroupSize=function(t,e){if(t.length)for(var i=t[0].$parent._xLayout?"width":"height",n=t[0].$parent.getNextSibling(t[0].$id)?1:-1,r=0;r<t.length;r++){var a=t[r].getSize(),s=n>0?t[r].$parent.getNextSibling(t[r].$id):t[r].$parent.getPrevSibling(t[r].$id);"resizer"==s.$name&&(s=n>0?s.$parent.getNextSibling(s.$id):s.$parent.getPrevSibling(s.$id));var o=s.getSize();if(s[i]){var l=a.gravity+o.gravity,d=a[i]+o[i],c=l/d;t[r].$config.gravity=c*e,s.$config[i]=d-e,s.$config.gravity=l-c*e}else t[r].$config[i]=e;var h=this.$gantt.$ui.getView("grid");h&&t[r].$content===h&&!h.$config.scrollable&&(this.$gantt.config.grid_width=e)}},e.prototype.resize=function(e){var i=!1;if(this.$root&&!this._resizeInProgress&&(this.callEvent("onBeforeResize",[]),i=!0,this._resizeInProgress=!0),t.prototype.resize.call(this,!0),t.prototype.resize.call(this,!1),i){var n=[];n=(n=(n=n.concat(this.getCellsByType("viewCell"))).concat(this.getCellsByType("viewLayout"))).concat(this.getCellsByType("hostCell"));for(var r=this.getCellsByType("scroller"),a=0;a<n.length;a++)n[a].$config.hidden||n[a].setContentSize();var s=this._getAutosizeMode(this.$config.autosize),o=this._resizeScrollbars(s,r);if(this.$config.autosize&&(this.autosize(this.$config.autosize),o=!0),o)for(this.resize(),a=0;a<n.length;a++)n[a].$config.hidden||n[a].setContentSize();this.callEvent("onResize",[])}i&&(this._resizeInProgress=!1)},e.prototype._eachChild=function(t,e){if(t(e=e||this),e.$cells)for(var i=0;i<e.$cells.length;i++)this._eachChild(t,e.$cells[i])},e.prototype.getCellsByType=function(t){var i=[];if(t===this.$name&&i.push(this),this.$content&&this.$content.$name==t&&i.push(this.$content),this.$cells)for(var n=0;n<this.$cells.length;n++){var r=e.prototype.getCellsByType.call(this.$cells[n],t);r.length&&i.push.apply(i,r)}return i},e.prototype.getNextSibling=function(t){var e=this.cellIndex(t);return e>=0&&this.$cells[e+1]?this.$cells[e+1]:null},e.prototype.getPrevSibling=function(t){var e=this.cellIndex(t);return e>=0&&this.$cells[e-1]?this.$cells[e-1]:null},e.prototype.cell=function(t){for(var e=0;e<this.$cells.length;e++){var i=this.$cells[e];if(i.$id===t)return i;var n=i.cell(t);if(n)return n}},e.prototype.cellIndex=function(t){for(var e=0;e<this.$cells.length;e++)if(this.$cells[e].$id===t)return e;return-1},e.prototype.moveView=function(t,e){if(this.$cells[e]!==t)return window.alert("Not implemented");var i=this.$view;(e+=this.$config.header?1:0)>=i.childNodes.length?i.appendChild(t.$view):i.insertBefore(t.$view,i.childNodes[e])},e.prototype._parseConfig=function(t){this.$cells=[],this._xLayout=!t.rows;for(var e=t.rows||t.cols||t.views,i=0;i<e.length;i++){var n=e[i];n.mode=this._xLayout?"x":"y";var r=this.$factory.initUI(n,this);r?(r.$parent=this,this.$cells.push(r)):(e.splice(i,1),i--)}},e.prototype.getCells=function(){return this.$cells},e.prototype.render=function(){var t=r.insertNode(this.$container,this.$toHTML());this.$fill(t,null),this.callEvent("onReady",[]),this.resize(),this.render=this.resize},e.prototype.$fill=function(t,e){this.$view=t,this.$parent=e;for(var i=r.getChildNodes(t,"gantt_layout_cell"),n=i.length-1;n>=0;n--){var a=this.$cells[n];a.$fill(i[n],this),a.$config.hidden&&a.$view.parentNode.removeChild(a.$view)}},e.prototype.$toHTML=function(){for(var e=this._xLayout?"x":"y",i=[],n=0;n<this.$cells.length;n++)i.push(this.$cells[n].$toHTML());return t.prototype.$toHTML.call(this,i.join(""),(this.$root?"gantt_layout_root ":"")+"gantt_layout gantt_layout_"+e)},e.prototype.getContentSize=function(t){for(var e,i,n,r=0,a=0,s=0;s<this.$cells.length;s++)(i=this.$cells[s]).$config.hidden||(e=i.getContentSize(t),"scrollbar"===i.$config.view&&t[i.$config.scroll]&&(e.height=0,e.width=0),i.$config.resizer&&(this._xLayout?e.height=0:e.width=0),n=i._getBorderSizes(),this._xLayout?(r+=e.width+n.horizontal,a=Math.max(a,e.height+n.vertical)):(r=Math.max(r,e.width+n.horizontal),a+=e.height+n.vertical));return r+=(n=this._getBorderSizes()).horizontal,a+=n.vertical,this.$root&&(r+=1,a+=1),{width:r,height:a}},e.prototype._cleanElSize=function(t){return 1*(t||"").toString().replace("px","")||0},e.prototype._getBoxStyles=function(t){var e,i=["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],n={boxSizing:"border-box"==(e=window.getComputedStyle?window.getComputedStyle(t,null):{width:t.clientWidth,height:t.clientHeight}).boxSizing};e.MozBoxSizing&&(n.boxSizing="border-box"==e.MozBoxSizing);for(var r=0;r<i.length;r++)n[i[r]]=e[i[r]]?this._cleanElSize(e[i[r]]):0;var a={horPaddings:n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth,vertPaddings:n.paddingTop+n.paddingBottom+n.borderTopWidth+n.borderBottomWidth,borderBox:n.boxSizing,innerWidth:n.width,innerHeight:n.height,outerWidth:n.width,outerHeight:n.height};return a.borderBox?(a.innerWidth-=a.horPaddings,a.innerHeight-=a.vertPaddings):(a.outerWidth+=a.horPaddings,a.outerHeight+=a.vertPaddings),a},e.prototype._getAutosizeMode=function(t){var e={x:!1,y:!1};return"xy"===t?e.x=e.y=!0:"y"===t||!0===t?e.y=!0:"x"===t&&(e.x=!0),e},e.prototype.autosize=function(t){var e=this._getAutosizeMode(t),i=this._getBoxStyles(this.$container),n=this.getContentSize(t),r=this.$container;e.x&&(i.borderBox&&(n.width+=i.horPaddings),r.style.width=n.width+"px"),e.y&&(i.borderBox&&(n.height+=i.vertPaddings),r.style.height=n.height+"px")},e.prototype.getSize=function(){this._sizes=[];for(var e=0,i=0,n=1e5,r=0,a=1e5,s=0,o=0;o<this.$cells.length;o++){var l=this._sizes[o]=this.$cells[o].getSize();this.$cells[o].$config.hidden||(this._xLayout?(e+=!l.width&&l.minWidth?l.minWidth:l.width,n+=l.maxWidth,i+=l.minWidth,r=Math.max(r,l.height),a=Math.min(a,l.maxHeight),s=Math.max(s,l.minHeight)):(r+=!l.height&&l.minHeight?l.minHeight:l.height,a+=l.maxHeight,s+=l.minHeight,e=Math.max(e,l.width),n=Math.min(n,l.maxWidth),i=Math.max(i,l.minWidth)))}var d=t.prototype.getSize.call(this);return d.maxWidth>=1e5&&(d.maxWidth=n),d.maxHeight>=1e5&&(d.maxHeight=a),d.minWidth=d.minWidth!=d.minWidth?0:d.minWidth,d.minHeight=d.minHeight!=d.minHeight?0:d.minHeight,this._xLayout?(d.minWidth+=this.$config.margin*this.$cells.length||0,d.minWidth+=2*this.$config.padding||0,d.minHeight+=2*this.$config.padding||0):(d.minHeight+=this.$config.margin*this.$cells.length||0,d.minHeight+=2*this.$config.padding||0),d},e.prototype._calcFreeSpace=function(t,e,i){var n=i?e.minWidth:e.minHeight,r=e.maxWidth,a=t;return a?(a>r&&(a=r),a<n&&(a=n),this._free-=a):((a=Math.floor(this._free/this._gravity*e.gravity))>r&&(this._free-=a=r,this._gravity-=e.gravity),a<n&&(this._free-=a=n,this._gravity-=e.gravity)),a},e.prototype._calcSize=function(t,e,i){var n=t,r=i?e.minWidth:e.minHeight,a=i?e.maxWidth:e.maxHeight;return n||(n=Math.floor(this._free/this._gravity*e.gravity)),n>a&&(n=a),n<r&&(n=r),n},e.prototype._configureBorders=function(){this.$root&&this._setBorders([this._borders.left,this._borders.top,this._borders.right,this._borders.bottom],this);for(var t=this._xLayout?this._borders.right:this._borders.bottom,e=this.$cells,i=e.length-1,n=i;n>=0;n--)if(!e[n].$config.hidden){i=n;break}for(n=0;n<e.length;n++)if(!e[n].$config.hidden){var r=n>=i,a="";!r&&e[n+1]&&"scrollbar"==e[n+1].$config.view&&(this._xLayout?r=!0:a="gantt_layout_cell_border_transparent"),this._setBorders(r?[]:[t,a],e[n])}},e.prototype._updateCellVisibility=function(){for(var t,e=this._visibleCells||{},i=!this._visibleCells,n={},r=0;r<this._sizes.length;r++)t=this.$cells[r],!i&&t.$config.hidden&&e[t.$id]?t._hide(!0):t.$config.hidden||e[t.$id]||t._hide(!1),t.$config.hidden||(n[t.$id]=!0);this._visibleCells=n},e.prototype.setSize=function(e,i){this._configureBorders(),t.prototype.setSize.call(this,e,i),i=this.$lastSize.contentY,e=this.$lastSize.contentX;var n,r,a=this.$config.padding||0;this.$view.style.padding=a+"px",this._gravity=0,this._free=this._xLayout?e:i,this._free-=2*a,this._updateCellVisibility();for(var s=0;s<this._sizes.length;s++)if(!(n=this.$cells[s]).$config.hidden){var o=this.$config.margin||0;"resizer"!=n.$name||o||(o=-1),s!==this.$cells.length-1&&(n.$view.style[this._xLayout?"marginRight":"marginBottom"]=o+"px",this._free-=o),r=this._sizes[s],this._xLayout?r.width||(this._gravity+=r.gravity):r.height||(this._gravity+=r.gravity)}for(s=0;s<this._sizes.length;s++)if(!(n=this.$cells[s]).$config.hidden){var l=(r=this._sizes[s]).height;this._xLayout?this._calcFreeSpace(r.width,r,!0):this._calcFreeSpace(l,r,!1)}for(s=0;s<this.$cells.length;s++)if(!(n=this.$cells[s]).$config.hidden){r=this._sizes[s];var d=void 0,c=void 0;this._xLayout?(d=this._calcSize(r.width,r,!0),c=i-2*a):(d=e-2*a,c=this._calcSize(r.height,r,!1)),n.setSize(d,c)}},e}((i(0),i(4)));t.exports=a},function(t,e,i){function n(t,e){for(var i,n,r,a=0,s=t.length-1;a<=s;)if(r=+t[(i=Math.floor((a+s)/2))-1],(n=+t[i])<e)a=i+1;else{if(!(n>e)){for(;+t[i]==+t[i+1];)i++;return i}if(!isNaN(r)&&r<e)return i-1;s=i-1}return t.length-1}var r=i(13),a=i(2),s=i(0),o=i(43),l=function(t,e,i,n){this.$config=s.mixin({},e||{}),this.$scaleHelper=new r(n),this.$gantt=n,a(this)};l.prototype={init:function(t){t.innerHTML+="<div class='gantt_task' style='width:inherit;height:inherit;'></div>",this.$task=t.childNodes[0],this.$task.innerHTML="<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_data.innerHTML="<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>",this.$task_bg=this.$task_data.childNodes[0],this.$task_links=this.$task_data.childNodes[1],this.$task_bars=this.$task_data.childNodes[2],this._tasks={col_width:0,width:[],full_width:0,trace_x:[],rendered:{}};var e=this.$getConfig(),i=e[this.$config.bind+"_attribute"],n=e[this.$config.bindLinks+"_attribute"];!i&&this.$config.bind&&(i=this.$config.bind+"_id"),!n&&this.$config.bindLinks&&(n=this.$config.bindLinks+"_id"),this.$config.item_attribute=i||null,this.$config.link_attribute=n||null;var r=this._createLayerConfig();this.$config.layers||(this.$config.layers=r.tasks),this.$config.linkLayers||(this.$config.linkLayers=r.links),this._attachLayers(this.$gantt),this.callEvent("onReady",[])},setSize:function(t,e){var i=this.$getConfig();if(1*t===t&&(this.$config.width=t),1*e===e){this.$config.height=e;var n=Math.max(this.$config.height-i.scale_height);this.$task_data.style.height=n+"px"}this.refresh(),this.$task_bg.style.backgroundImage="",this.$task_bg.style.height=i.smart_rendering&&this.$config.rowStore?i.row_height*this.$config.rowStore.countVisible()+"px":"";for(var r=this._tasks,a=this.$task_data.childNodes,s=0,o=a.length;s<o;s++){var l=a[s];l.hasAttribute("data-layer")&&l.style&&(l.style.width=r.full_width+"px")}},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$task.offsetWidth},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore,i=e?t.row_height*e.countVisible():0,n=this._tasks.full_width;return{x:this.$config.width,y:this.$config.height,contentX:this.isVisible()?n:0,contentY:this.isVisible()?t.scale_height+i:0,scrollHeight:this.isVisible()?i:0,scrollWidth:this.isVisible()?n:0}},scrollTo:function(t,e){this.isVisible()&&(1*e===e&&(this.$config.scrollTop=e,this.$task_data.scrollTop=this.$config.scrollTop),1*t===t&&(this.$task.scrollLeft=t,this.$config.scrollLeft=this.$task.scrollLeft,this._refreshScales()))},_refreshScales:function(){if(this.isVisible()&&this.$getConfig().smart_scales){var t=this.$config.scrollLeft;this.$task_scale.innerHTML=this._getScaleChunkHtml(this._scales,t,t+this.$config.width)}},_createLayerConfig:function(){var t=this,e=function(){return t.isVisible()};return{tasks:[{expose:!0,renderer:this.$gantt.$ui.layers.taskBar,container:this.$task_bars,filter:[e]},{renderer:this.$gantt.$ui.layers.taskBg,container:this.$task_bg,filter:[function(){return!t.$getConfig().static_background},e]}],links:[{expose:!0,renderer:this.$gantt.$ui.layers.link,container:this.$task_links,filter:[e]}]}},_attachLayers:function(t){this._taskLayers=[],this._linkLayers=[];var e=this,i=this.$gantt.$services.getService("layers");if(this.$config.bind){e.$config.rowStore=e.$gantt.getDatastore(e.$config.bind);var n=i.getDataRender(this.$config.bind);n||(n=i.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$task_data}})),n.container=function(){return e.$task_data};for(var r=this.$config.layers,a=0;r&&a<r.length;a++){"string"==typeof(d=r[a])&&(d=this.$gantt.$ui.layers[d]),"function"==typeof d&&(d={renderer:d}),d.host=this;var s=n.addLayer(d);this._taskLayers.push(s),d.expose&&(this._taskRenderer=n.getLayer(s))}this._initStaticBackgroundRender()}if(this.$config.bindLinks){e.$config.linkStore=e.$gantt.getDatastore(e.$config.bindLinks);var o=i.getDataRender(this.$config.bindLinks);o||(o=i.createDataRender({name:this.$config.bindLinks,defaultContainer:function(){return e.$task_data}}));var l=this.$config.linkLayers;for(a=0;l&&a<l.length;a++){var d;"string"==typeof d&&(d=this.$gantt.$ui.layers[d]),(d=l[a]).host=this;var c=o.addLayer(d);this._taskLayers.push(c),l[a].expose&&(this._linkRenderer=o.getLayer(c))}}},_initStaticBackgroundRender:function(){var t=this,e=o.create(),i=t.$config.rowStore;i&&(this._staticBgHandler=i.attachEvent("onStoreUpdated",function(i,n,r){if(null===i&&t.isVisible()){var a=t.$getConfig();if(a.static_background){var s=t.$gantt.getDatastore(t.$config.bind);s&&e.render(t.$task_bg,a,t.getScale(),a.row_height*s.countVisible())}}}),this._initStaticBackgroundRender=function(){})},_clearLayers:function(t){for(var e=this.$gantt.$services.getService("layers"),i=e.getDataRender(this.$config.bind),n=e.getDataRender(this.$config.bindLinks),r=0;r<this._taskLayers.length;r++)i.removeLayer(this._taskLayers[r]);for(r=0;r<this._linkLayers.length;r++)n.removeLayer(this._linkLayers[r]);this._linkLayers=[],this._taskLayers=[]},_render_tasks_scales:function(){var t=this.$getConfig(),e="",i=0,n=0,r=this.$gantt.getState();if(this.isVisible()){var a=this.$scaleHelper,s=this._getScales();n=t.scale_height;var o=this.$config.width;"x"!=t.autosize&&"xy"!=t.autosize||(o=Math.max(t.autosize_min_width,0));var l=a.prepareConfigs(s,t.min_column_width,o,n-1,r.min_date,r.max_date,t.rtl),d=this._tasks=l[l.length-1];this._scales=l,e=this._getScaleChunkHtml(l,0,this.$config.width),i=d.full_width+"px",n+="px"}this.$task_scale.style.height=n,this.$task_data.style.width=this.$task_scale.style.width=i,this.$task_scale.innerHTML=e},_getScaleChunkHtml:function(t,e,i){for(var n=[],r=this.$gantt.$services.templates().scale_row_class,a=0;a<t.length;a++){var s="gantt_scale_line",o=r(t[a]);o&&(s+=" "+o),n.push('<div class="'+s+'" style="height:'+t[a].height+"px;position:relative;line-height:"+t[a].height+'px">'+this._prepareScaleHtml(t[a],e,i)+"</div>")}return n.join("")},_prepareScaleHtml:function(t,e,i){var r=this.$getConfig(),a=this.$gantt.$services.templates(),s=[],o=null,l=null,d=null;(t.template||t.date)&&(l=t.template||this.$gantt.date.date_to_str(t.date));var c=0,h=t.count;!r.smart_scales||isNaN(e)||isNaN(i)||(c=n(t.left,e),h=n(t.left,i)+1),d=t.css||function(){},!t.css&&r.inherit_scale_class&&(d=a.scale_cell_class);for(var u=c;u<h&&t.trace_x[u];u++){o=new Date(t.trace_x[u]);var _=l.call(this,o),f=t.width[u],g="",p="",v="";if(f){g="width:"+f+"px;height:"+t.height+"px;"+(r.smart_scales?"position:absolute;left:"+t.left[u]+"px":""),v="gantt_scale_cell"+(u==t.count-1?" gantt_last_cell":""),(p=d.call(this,o))&&(v+=" "+p);var m=this.$gantt._waiAria.getTimelineCellAttr(_);s.push("<div class='"+v+"'"+m+" style='"+g+"'>"+_+"</div>")}}return s.join("")},dateFromPos:function(t){var e=this._tasks;if(t<0||t>e.full_width||!e.full_width)return null;var i=n(this._tasks.left,t),r=e.width[i]||e.col_width,a=0;r&&(a=(t-this._tasks.left[i])/r,e.rtl&&(a=1-a));var s=0;return a&&(s=this._getColumnDuration(e,e.trace_x[i])),new Date(e.trace_x[i].valueOf()+Math.round(a*s))},posFromDate:function(t){if(!this.isVisible())return 0;var e=this.columnIndexByDate(t);this.$gantt.assert(e>=0,"Invalid day index");var i=Math.floor(e),n=e%1,r=this._tasks.left[Math.min(i,this._tasks.width.length-1)];return i==this._tasks.width.length&&(r+=this._tasks.width[this._tasks.width.length-1]),n&&(r+=i<this._tasks.width.length?this._tasks.width[i]*(n%1):1),Math.round(r)},columnIndexByDate:function(t){var e=new Date(t).valueOf(),i=this._tasks.trace_x_ascending,r=this._tasks.ignore_x,a=this.$gantt.getState();if(e<=a.min_date)return this._tasks.rtl?i.length:0;if(e>=a.max_date)return this._tasks.rtl?0:i.length;for(var s=n(i,e),o=+i[s];r[o];)o=i[++s];var l=this._tasks.trace_index_transition,d=s;if(!o)return l?l[0]:0;var c=(t-i[s])/this._getColumnDuration(this._tasks,i[s]);return l?l[d]+(1-c):d+c},getItemPosition:function(t,e,i){var n,r,a;return this._tasks.rtl?(r=this.posFromDate(e||t.start_date),n=this.posFromDate(i||t.end_date)):(n=this.posFromDate(e||t.start_date),r=this.posFromDate(i||t.end_date)),a=Math.max(r-n,0),{left:n,top:this.getItemTop(t.id),height:this.getItemHeight(),width:a}},getItemHeight:function(){var t=this.$getConfig(),e=t.task_height;return"full"==e&&(e=t.row_height-(t.task_height_offset||5)),e=Math.min(e,t.row_height),Math.max(e,0)},getRowTop:function(t){return t*this.$getConfig().row_height},getItemTop:function(t){if(this.$config.rowStore){var e=this.$config.rowStore;return e?e.getIndexById(t)*this.$getConfig().row_height:0}return 0},getScale:function(){return this._tasks},_getScales:function(){var t=this.$getConfig(),e=this.$scaleHelper,i=[e.primaryScale()].concat(t.subscales);return e.sortScales(i),i},_getColumnDuration:function(t,e){return this.$gantt.date.add(e,t.step,t.unit)-e},refresh:function(){this.$config.bind&&(this.$config.rowStore=this.$gantt.getDatastore(this.$config.bind)),this.$config.bindLinks&&(this.$config.linkStore=this.$gantt.getDatastore(this.$config.bindLinks)),this._initStaticBackgroundRender(),this._render_tasks_scales()},destructor:function(){this._clearLayers(this.$gantt),this.$task=null,this.$task_scale=null,this.$task_data=null,this.$task_bg=null,this.$task_links=null,this.$task_bars=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.$config.linkStore&&(this.$config.linkStore=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}},t.exports=l},function(t,e,i){var n=i(0);t.exports=function(t){var e=t.date,i=t.$services;return{getSum:function(t,e,i){void 0===i&&(i=t.length-1),void 0===e&&(e=0);for(var n=0,r=e;r<=i;r++)n+=t[r];return n},setSumWidth:function(t,e,i,n){var r=e.width;if(void 0===n&&(n=r.length-1),void 0===i&&(i=0),!(i>r.length-1||n-i+1<=0||n>r.length-1)){var a=t-this.getSum(r,i,n);this.adjustSize(a,r,i,n),this.adjustSize(-a,r,n+1),e.full_width=this.getSum(r)}},splitSize:function(t,e){for(var i=[],n=0;n<e;n++)i[n]=0;return this.adjustSize(t,i),i},adjustSize:function(t,e,i,n){i||(i=0),void 0===n&&(n=e.length-1);for(var r=n-i+1,a=this.getSum(e,i,n),s=i;s<=n;s++){var o=Math.floor(t*(a?e[s]/a:1/r));a-=e[s],t-=o,r--,e[s]+=o}e[e.length-1]+=t},sortScales:function(t){function i(t,i){var n=new Date(1970,0,1);return e.add(n,i,t)-n}t.sort(function(t,e){return i(t.unit,t.step)<i(e.unit,e.step)?1:i(t.unit,t.step)>i(e.unit,e.step)?-1:0});for(var n=0;n<t.length;n++)t[n].index=n},primaryScale:function(){return i.getService("templateLoader").initTemplate("date_scale",void 0,void 0,i.config(),i.templates()),{unit:i.config().scale_unit,step:i.config().step,template:i.templates().date_scale,date:i.config().date_scale,css:i.templates().scale_cell_class}},prepareConfigs:function(t,e,i,n,r,a,s){for(var o=this.splitSize(n,t.length),l=i,d=[],c=t.length-1;c>=0;c--){var h=c==t.length-1,u=this.initScaleConfig(t[c],r,a);h&&this.processIgnores(u),this.initColSizes(u,e,l,o[c]),this.limitVisibleRange(u),h&&(l=u.full_width),d.unshift(u)}for(c=0;c<d.length-1;c++)this.alineScaleColumns(d[d.length-1],d[c]);for(c=0;c<d.length;c++)s&&this.reverseScale(d[c]),this.setPosSettings(d[c]);return d},reverseScale:function(t){t.width=t.width.reverse(),t.trace_x=t.trace_x.reverse();var e=t.trace_indexes;t.trace_indexes={},t.trace_index_transition={},t.rtl=!0;for(var i=0;i<t.trace_x.length;i++)t.trace_indexes[t.trace_x[i].valueOf()]=i,t.trace_index_transition[e[t.trace_x[i].valueOf()]]=i;return t},setPosSettings:function(t){for(var e=0,i=t.trace_x.length;e<i;e++)t.left.push((t.width[e-1]||0)+(t.left[e-1]||0))},_ignore_time_config:function(t,n){if(i.config().skip_off_time){for(var r=!0,a=t,s=0;s<n.step;s++)s&&(a=e.add(t,s,n.unit)),r=r&&!this.isWorkTime(a,n.unit);return r}return!1},processIgnores:function(t){t.ignore_x={},t.display_count=t.count},initColSizes:function(t,i,n,r){var a=n;t.height=r;var s=void 0===t.display_count?t.count:t.display_count;s||(s=1),t.col_width=Math.floor(a/s),i&&t.col_width<i&&(t.col_width=i,a=t.col_width*s),t.width=[];for(var o=t.ignore_x||{},l=0;l<t.trace_x.length;l++)if(o[t.trace_x[l].valueOf()]||t.display_count==t.count)t.width[l]=0;else{var d=1;"month"==t.unit&&(d=Math.round((e.add(t.trace_x[l],t.step,t.unit)-t.trace_x[l])/864e5)),t.width[l]=d}this.adjustSize(a-this.getSum(t.width),t.width),t.full_width=this.getSum(t.width)},initScaleConfig:function(t,e,i){var r=n.mixin({count:0,col_width:0,full_width:0,height:0,width:[],left:[],trace_x:[],trace_indexes:{},min_date:new Date(e),max_date:new Date(i)},t);return this.eachColumn(t.unit,t.step,e,i,function(t){r.count++,r.trace_x.push(new Date(t)),r.trace_indexes[t.valueOf()]=r.trace_x.length-1}),r.trace_x_ascending=r.trace_x.slice(),r},iterateScales:function(t,e,i,n,r){for(var a=e.trace_x,s=i||0,o=n||t.trace_x.length-1,l=0,d=1;d<a.length;d++){var c=t.trace_indexes[+a[d]];void 0!==c&&c<=o&&(r&&r.apply(this,[l,d,s,c]),s=c,l=d)}},alineScaleColumns:function(t,e,i,n){this.iterateScales(t,e,i,n,function(i,n,r,a){var s=this.getSum(t.width,r,a-1);this.getSum(e.width,i,n-1)!=s&&this.setSumWidth(s,e,i,n-1)})},eachColumn:function(i,n,r,a,s){var o=new Date(r),l=new Date(a);e[i+"_start"]&&(o=e[i+"_start"](o));var d=new Date(o);for(+d>=+l&&(l=e.add(d,n,i));+d<+l;){s.call(this,new Date(d));var c=d.getTimezoneOffset();d=e.add(d,n,i),d=t._correct_dst_change(d,c,n,i),e[i+"_start"]&&(d=e[i+"_start"](d))}},limitVisibleRange:function(t){var i=t.trace_x,n=0;if(+i[0]<+t.min_date&&0!=t.width.length-1){var r=Math.floor(t.width[0]*((i[1]-t.min_date)/(i[1]-i[0])));n+=t.width[0]-r,t.width[0]=r,i[0]=new Date(t.min_date)}var a=i.length-1,s=i[a],o=e.add(s,t.step,t.unit);if(+o>+t.max_date&&a>0&&(r=t.width[a]-Math.floor(t.width[a]*((o-t.max_date)/(o-s))),n+=t.width[a]-r,t.width[a]=r),n){for(var l=this.getSum(t.width),d=0,c=0;c<t.width.length;c++){var h=Math.floor(n*(t.width[c]/l));t.width[c]+=h,d+=h}this.adjustSize(n-d,t.width)}}}}},function(t,e,i){var n=i(1),r=i(0),a=i(2),s=i(44),o=function(t,e,i,n){this.$config=r.mixin({},e||{}),this.$gantt=n,this.$parent=t,a(this),this.$state={}};o.prototype={init:function(t){var e=this.$gantt,n=e._waiAria.gridAttrString(),r=e._waiAria.gridDataAttrString();t.innerHTML="<div class='gantt_grid' style='height:inherit;width:inherit;' "+n+"></div>",this.$grid=t.childNodes[0],this.$grid.innerHTML="<div class='gantt_grid_scale' "+e._waiAria.gridScaleRowAttrString()+"></div><div class='gantt_grid_data' "+r+"></div>",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1];var a=this.$getConfig()[this.$config.bind+"_attribute"];if(!a&&this.$config.bind&&(a=this.$config.bind+"_id"),this.$config.item_attribute=a||null,!this.$config.layers){var o=this._createLayerConfig();this.$config.layers=o}var l=s(e,this);l.init(),this._renderHeaderResizers=l.doOnRender,this._mouseDelegates=i(8)(e),this._addLayers(this.$gantt),this._initEvents(),this.callEvent("onReady",[])},setSize:function(t,e){this.$config.width=this.$state.width=t,this.$state.height=e;for(var i=this.getGridColumns(),n=0,r=0,a=i.length;r<a;r++)n+=1*i[r].width;var s;!isNaN(n)&&this.$config.scrollable||(n=s=this._setColumnsWidth(t+1)),this.$config.scrollable?(this.$grid_scale.style.width=n+"px",this.$grid_data.style.width=n+"px"):(this.$grid_scale.style.width="inherit",this.$grid_data.style.width="inherit"),this.$config.width-=1;var o=this.$getConfig();s!==t&&(o.grid_width=s,this.$config.width=s-1);var l=Math.max(this.$state.height-o.scale_height,0);this.$grid_data.style.height=l+"px",this.refresh()},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore,i=e?t.row_height*e.countVisible():0,n=this._getGridWidth();return{x:this.$state.width,y:this.$state.height,contentX:this.isVisible()?n:0,contentY:this.isVisible()?t.scale_height+i:0,scrollHeight:this.isVisible()?i:0,scrollWidth:this.isVisible()?n:0}},refresh:function(){this.$config.bind&&(this.$config.rowStore=this.$gantt.getDatastore(this.$config.bind)),this._initSmartRenderingPlaceholder(),this._calculateGridWidth(),this._renderGridHeader()},scrollTo:function(t,e){this.isVisible()&&(1*t==t&&(this.$state.scrollLeft=this.$grid.scrollLeft=t),1*e==e&&(this.$state.scrollTop=this.$grid_data.scrollTop=e))},getGridColumns:function(){return this.$getConfig().columns.slice()},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$grid.offsetWidth},getItemTop:function(t){if(this.$config.rowStore){var e=this.$config.rowStore;return e?e.getIndexById(t)*this.$getConfig().row_height:0}return 0},_createLayerConfig:function(){var t=this;return[{renderer:this.$gantt.$ui.layers.gridLine,container:this.$grid_data,filter:[function(){return t.isVisible()}]}]},_addLayers:function(t){if(this.$config.bind){this._taskLayers=[];var e=this,i=this.$gantt.$services.getService("layers"),n=i.getDataRender(this.$config.bind);n||(n=i.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$grid_data}}));for(var r=this.$config.layers,a=0;r&&a<r.length;a++){var s=r[a];s.host=this;var o=n.addLayer(s);this._taskLayers.push(o)}this.$config.bind&&(this.$config.rowStore=this.$gantt.getDatastore(this.$config.bind)),this._initSmartRenderingPlaceholder()}},_initSmartRenderingPlaceholder:function(){var t=this,e=this.$config.rowStore;e&&(this._initSmartRenderingPlaceholder=function(){},this._staticBgHandler=e.attachEvent("onStoreUpdated",function(i,n,r){if(null===i&&t.isVisible()){var a=t.$getConfig();if(a.smart_rendering){var s=e?a.row_height*e.countVisible():0;if(s){t.$rowsPlaceholder&&t.$rowsPlaceholder.parentNode&&t.$rowsPlaceholder.parentNode.removeChild(t.$rowsPlaceholder);var o=t.$rowsPlaceholder=document.createElement("div");o.style.visibility="hidden",o.style.height=s+"px",o.style.width="1px",t.$grid_data.appendChild(o)}}}}))},_initEvents:function(){this._mouseDelegates.delegate("click","gantt_close",gantt.bind(function(t,e,i){var r=this.$config.rowStore;if(!r)return!0;var a=n.locateAttribute(t,this.$config.item_attribute);return a&&r.close(a.getAttribute(this.$config.item_attribute)),!1},this),this.$grid),this._mouseDelegates.delegate("click","gantt_open",gantt.bind(function(t,e,i){var r=this.$config.rowStore;if(!r)return!0;var a=n.locateAttribute(t,this.$config.item_attribute);return a&&r.open(a.getAttribute(this.$config.item_attribute)),!1},this),this.$grid)},_clearLayers:function(t){for(var e=this.$gantt.$services.getService("layers").getDataRender(this.$config.bind),i=0;i<this._taskLayers.length;i++)e.removeLayer(this._taskLayers[i]);this._taskLayers=[]},_getColumnWidth:function(t,e,i){var n=Math.max(i,t.min_width||e.min_grid_column_width||10);return t.max_width&&(n=Math.min(n,t.max_width)),n},_getGridWidthLimits:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),i=0,n=0,r=0;r<e.length;r++)i+=e[r].min_width?e[r].min_width:t.min_grid_column_width,void 0!==n&&(n=e[r].max_width?n+e[r].max_width:void 0);return[i,n]},_setColumnsWidth:function(t,e){var i=this.$getConfig(),n=this.getGridColumns(),r=0,a=t;e=window.isNaN(e)?-1:e;for(var s=0,o=n.length;s<o;s++)r+=1*n[s].width;if(window.isNaN(r))for(this._calculateGridWidth(),r=0,s=0,o=n.length;s<o;s++)r+=1*n[s].width;var l=a-r,d=0;for(s=0;s<e+1;s++)d+=n[s].width;for(r-=d,s=e+1;s<n.length;s++){var c=n[s],h=Math.round(l*(c.width/r));l<0?c.min_width&&c.width+h<c.min_width?h=c.min_width-c.width:!c.min_width&&i.min_grid_column_width&&c.width+h<i.min_grid_column_width&&(h=i.min_grid_column_width-c.width):c.max_width&&c.width+h>c.max_width&&(h=c.max_width-c.width),r-=c.width,c.width+=h,l-=h}for(var u=l>0?1:-1;l>0&&1===u||l<0&&-1===u;){var _=l;for(s=e+1;s<n.length;s++){var f;if((f=n[s].width+u)==this._getColumnWidth(n[s],i,f)&&(l-=u,n[s].width=f),!l)break}if(_==l)break}return l&&e>-1&&(f=n[e].width+l)==this._getColumnWidth(n[e],i,f)&&(n[e].width=f),this._getColsTotalWidth()},_getColsTotalWidth:function(){for(var t=this.getGridColumns(),e=0,i=0;i<t.length;i++){var n=parseFloat(t[i].width);if(window.isNaN(n))return!1;e+=n}return e},_calculateGridWidth:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),i=0,n=[],r=[],a=0;a<e.length;a++){var s=parseFloat(e[a].width);window.isNaN(s)&&(s=t.min_grid_column_width||10,n.push(a)),r[a]=s,i+=s}var o=this._getGridWidth()+1;if(t.autofit||n.length){var l=o-i;if(t.autofit)for(a=0;a<r.length;a++){var d=Math.round(l/(r.length-a));r[a]+=d,(c=this._getColumnWidth(e[a],t,r[a]))!=r[a]&&(d=c-r[a],r[a]=c),l-=d}else if(n.length)for(a=0;a<n.length;a++){d=Math.round(l/(n.length-a));var c,h=n[a];r[h]+=d,(c=this._getColumnWidth(e[h],t,r[h]))!=r[h]&&(d=c-r[h],r[h]=c),l-=d}for(a=0;a<r.length;a++)e[a].width=r[a]}else{var u=o!=i;this.$config.width=i-1,t.grid_width=i,u&&this.$parent._setContentSize(this.$config.width,this.$config.height)}},_renderGridHeader:function(){var t=this.$gantt,e=this.$getConfig(),i=this.$gantt.locale,n=this.$gantt.templates,r=this.getGridColumns();e.rtl&&(r=r.reverse());for(var a=[],s=0,o=i.labels,l=e.scale_height-1,d=0;d<r.length;d++){var c=d==r.length-1,h=r[d];h.name||(h.name=t.uid()+"");var u=1*h.width,_=this._getGridWidth();c&&_>s+u&&(h.width=u=_-s),s+=u;var f=t._sort&&h.name==t._sort.name?"<div class='gantt_sort gantt_"+t._sort.direction+"'></div>":"",g=["gantt_grid_head_cell","gantt_grid_head_"+h.name,c?"gantt_last_cell":"",n.grid_header_class(h.name,h)].join(" "),p="width:"+(u-(c?1:0))+"px;",v=h.label||o["column_"+h.name],m=t._waiAria.gridScaleCellAttrString(h,v=v||"");a.push("<div class='"+g+"' style='"+p+"' "+m+" column_id='"+h.name+"'>"+v+f+"</div>")}this.$grid_scale.style.height=e.scale_height+"px",this.$grid_scale.style.lineHeight=l+"px",this.$grid_scale.innerHTML=a.join(""),this._renderHeaderResizers&&this._renderHeaderResizers()},_getGridWidth:function(){return this.$config.width},destructor:function(){this._clearLayers(this.$gantt),this._mouseDelegates.destructor(),this._mouseDelegates=null,this.$grid=null,this.$grid_scale=null,this.$grid_data=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}},t.exports=o},function(t,e,i){var n=i(16),r=i(0),a=i(2),s=function(t){return this.pull={},this.$initItem=t.initItem,this.visibleOrder=n.$create(),this.fullOrder=n.$create(),this._skip_refresh=!1,this._filterRule=null,this._searchVisibleOrder={},a(this),this};s.prototype={_parseInner:function(t){for(var e=null,i=[],n=0,r=t.length;n<r;n++)e=t[n],this.$initItem&&(e=this.$initItem(e)),this.callEvent("onItemLoading",[e])&&(this.pull.hasOwnProperty(e.id)||(this.fullOrder.push(e.id),i.push(e)),this.pull[e.id]=e);return i},parse:function(t){this.callEvent("onBeforeParse",[t]);var e=this._parseInner(t);this.refresh(),this.callEvent("onParse",[e])},getItem:function(t){return this.pull[t]},_updateOrder:function(t){t.call(this.visibleOrder),t.call(this.fullOrder)},updateItem:function(t,e){if(r.defined(e)||(e=this.getItem(t)),!this._skip_refresh&&!1===this.callEvent("onBeforeUpdate",[e.id,e]))return!1;this.pull[t]=e,this._skip_refresh||(this.callEvent("onAfterUpdate",[e.id,e]),this.callEvent("onStoreUpdated",[e.id,e,"update"]))},_removeItemInner:function(t){this._updateOrder(function(){this.$remove(t)}),delete this.pull[t]},removeItem:function(t){var e=this.getItem(t);if(!this._skip_refresh&&!1===this.callEvent("onBeforeDelete",[e.id,e]))return!1;this._removeItemInner(t),this._skip_refresh||(this.filter(),this.callEvent("onAfterDelete",[e.id,e]),this.callEvent("onStoreUpdated",[e.id,e,"delete"]))},_addItemInner:function(t,e){if(this.exists(t.id))this.silent(function(){this.updateItem(t.id,t)});else{var i=this.visibleOrder,n=i.length;(!r.defined(e)||e<0)&&(e=n),e>n&&(e=Math.min(i.length,e))}this.pull[t.id]=t,this._skip_refresh||this._updateOrder(function(){this.$insertAt(t.id,e)})},isVisible:function(t){return this.visibleOrder.$find(t)>-1},getVisibleItems:function(){return this.getIndexRange()},addItem:function(t,e){return r.defined(t.id)||(t.id=r.uid()),this.$initItem&&(t=this.$initItem(t)),!(!this._skip_refresh&&!1===this.callEvent("onBeforeAdd",[t.id,t]))&&(this._addItemInner(t,e),this._skip_refresh||(this.callEvent("onAfterAdd",[t.id,t]),this.callEvent("onStoreUpdated",[t.id,t,"add"])),t.id)},_changeIdInner:function(t,e){this.pull[t]&&(this.pull[e]=this.pull[t]),this.pull[e].id=e,this._updateOrder(function(){this[this.$find(t)]=e}),this._searchVisibleOrder[e]=this._searchVisibleOrder[t],delete this._searchVisibleOrder[t],delete this.pull[t]},changeId:function(t,e){this._changeIdInner(t,e),this.callEvent("onIdChange",[t,e])},exists:function(t){return!!this.pull[t]},_moveInner:function(t,e){var i=this.getIdByIndex(t);this._updateOrder(function(){this.$removeAt(t),this.$insertAt(i,Math.min(this.length,e))})},move:function(t,e){var i=this.getIdByIndex(t),n=this.getItem(i);this._moveInner(t,e),this._skip_refresh||this.callEvent("onStoreUpdated",[n.id,n,"move"])},clearAll:function(){this.pull={},this.visibleOrder=n.$create(),this.fullOrder=n.$create(),this._skip_refresh||(this.callEvent("onClearAll",[]),this.refresh())},silent:function(t,e){this._skip_refresh=!0,t.call(e||this),this._skip_refresh=!1},arraysEqual:function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},refresh:function(t,e){if(!this._skip_refresh){if(t){if(!e){var i=this.visibleOrder;this.filter(),this.arraysEqual(i,this.visibleOrder)||(t=void 0)}}else this.filter();this.callEvent("onStoreUpdated",t?[t,this.pull[t],"paint"]:[null,null,null])}},count:function(){return this.fullOrder.length},countVisible:function(){return this.visibleOrder.length},sort:function(t){},serialize:function(){},eachItem:function(t){for(var e=0;e<this.fullOrder.length;e++)t.call(this,this.pull[this.fullOrder[e]])},filter:function(t){var e=n.$create();this.eachItem(function(t){this.callEvent("onFilterItem",[t.id,t])&&e.push(t.id)}),this.visibleOrder=e,this._searchVisibleOrder={};for(var i=0;i<this.visibleOrder.length;i++)this._searchVisibleOrder[this.visibleOrder[i]]=i},getIndexRange:function(t,e){e=Math.min(e||1/0,this.countVisible()-1);for(var i=[],n=t||0;n<=e;n++)i.push(this.getItem(this.visibleOrder[n]));return i},getItems:function(){var t=[];for(var e in this.pull)t.push(this.pull[e]);return t},getIdByIndex:function(t){return this.visibleOrder[t]},getIndexById:function(t){var e=this._searchVisibleOrder[t];return void 0===e&&(e=-1),e},_getNullIfUndefined:function(t){return void 0===t?null:t},getFirst:function(){return this._getNullIfUndefined(this.visibleOrder[0])},getLast:function(){return this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1])},getNext:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)+1])},getPrev:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)-1])},destructor:function(){this.detachAllEvents(),this.pull=null,this.$initItem=null,this.visibleOrder=null,this.fullOrder=null,this._skip_refresh=null,this._filterRule=null,this._searchVisibleOrder=null}},t.exports=s},function(t,e,i){var n=i(0);t.exports={$create:function(t){return n.mixin(t||[],this)},$removeAt:function(t,e){t>=0&&this.splice(t,e||1)},$remove:function(t){this.$removeAt(this.$find(t))},$insertAt:function(t,e){if(e||0===e){var i=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,i)}else this.push(t)},$find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},$each:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])},$map:function(t,e){for(var i=0;i<this.length;i++)this[i]=t.call(e||this,this[i]);return this},$filter:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])||(this.splice(i,1),i--);return this}}},function(t,e,i){var n=i(13);t.exports=function(t){(function(t){var e=function(t){var e=t.config.scale_unit,i=t.config.step;if(t.config.scale_offset_minimal){var r=new n(t),a=[r.primaryScale()].concat(t.config.subscales);r.sortScales(a),e=a[a.length-1].unit,i=a[a.length-1].step||1}return{unit:e,step:i}}(t),i=e.unit,r=e.step,a=function(t,e){var i={start_date:null,end_date:null};if(e.config.start_date&&e.config.end_date){i.start_date=e.date[t+"_start"](new Date(e.config.start_date));var n=new Date(e.config.end_date),r=e.date[t+"_start"](new Date(n));n=+n!=+r?e.date.add(r,1,t):r,i.end_date=n}return i}(i,t);a.start_date&&a.end_date||((a=function(t){return t.getSubtaskDates()}(t)).start_date&&a.end_date||(a={start_date:new Date,end_date:new Date}),a.start_date=t.date[i+"_start"](a.start_date),a.start_date=t.calculateEndDate({start_date:t.date[i+"_start"](a.start_date),duration:-1,unit:i,step:r}),a.end_date=t.date[i+"_start"](a.end_date),a.end_date=t.calculateEndDate({start_date:a.end_date,duration:2,unit:i,step:r})),t._min_date=a.start_date,t._max_date=a.end_date})(t),function(t){!t.config.fit_tasks||+t._min_date==+t._min_date&&+t._max_date==+t._max_date||(t.render(),t.callEvent("onScaleAdjusted",[]))}(t)}},function(t,e){function i(t,e,i){for(var n=0;n<e.length;n++)t.isLinkExists(e[n])&&(i[e[n]]=t.getLink(e[n]))}function n(t,e,n){i(t,e.$source,n),i(t,e.$target,n)}t.exports={getSubtreeLinks:function(t,e){var i={};return t.isTaskExists(e)&&n(t,t.getTask(e),i),t.eachTask(function(e){n(t,e,i)},e),i},getSubtreeTasks:function(t,e){var i={};return t.eachTask(function(t){i[t.id]=t},e),i}}},function(t,e,i){var n=i(0),r=i(3);t.exports=function(t){return{getWorkHoursArguments:function(){var t=arguments[0];return r.isDate(t)?{date:t}:n.mixin({},t)},setWorkTimeArguments:function(){return arguments[0]},unsetWorkTimeArguments:function(){return arguments[0]},isWorkTimeArguments:function(){var e=arguments[0];return e.date?((e=n.mixin({},e)).unit=e.unit||t.config.duration_unit,e.task=e.task||null,e.calendar=e.calendar||null):((e={}).date=arguments[0],e.unit=arguments[1],e.task=arguments[2],e.calendar=arguments[3]),e.unit=e.unit||t.config.duration_unit,e},getClosestWorkTimeArguments:function(e){return(e=r.isDate(e=arguments[0])?{date:e}:n.mixin({},e)).dir=e.dir||"any",e.unit=e.unit||t.config.duration_unit,e},getDurationConfig:function(t,e,i,n){return this.start_date=t,this.end_date=e,this.task=i,this.calendar=n,this.unit=null,this.step=null,this},_getStartEndConfig:function(e){var i,n=this.getDurationConfig;return e instanceof n?e:(r.isDate(e)?i=new n(arguments[0],arguments[1],arguments[2],arguments[3]):(i=new n(e.start_date,e.end_date,e.task),e.id&&(i.task=e)),i.unit=i.unit||t.config.duration_unit,i.step=i.step||t.config.duration_step,i.start_date=i.start_date||i.start||i.date,i)},getDurationArguments:function(t,e,i,n){return this._getStartEndConfig.apply(this,arguments)},hasDurationArguments:function(t,e,i,n){return this._getStartEndConfig.apply(this,arguments)},calculateEndDateArguments:function(e,i,a,s){var o=arguments[0];return(o=r.isDate(o)?{start_date:arguments[0],duration:arguments[1],unit:arguments[2],task:arguments[3],calendar:arguments[4]}:n.mixin({},o)).unit=o.unit||t.config.duration_unit,o.step=o.step||t.config.duration_step,o}}}},function(t,e,i){t.exports=i(21)},function(t,e,i){window.gantt=i(22)(),i(103)(window.gantt)},function(t,e,i){t.exports=function(){var t=new function(){this.version="5.1.0",this.templates={},this.keys={edit_save:13,edit_cancel:27}};i(23)(t),t.$services=t.$inject(i(24)),t.config=t.$inject(i(25)),t.ajax=i(26)(t),t.date=i(27)(t);var e=i(28)(t);t.$services.setService("dnd",function(){return e}),t.$services.setService("config",function(){return t.config}),t.$services.setService("date",function(){return t.date}),t.$services.setService("locale",function(){return t.locale}),t.$services.setService("templates",function(){return t.templates});var n=i(29)(t);t.$services.setService("templateLoader",function(){return n}),i(2)(t);var r=new(i(30));r.registerProvider("global",function(){return{min_date:t._min_date,max_date:t._max_date,selected_task:t.$data.tasksStore.getSelectedId()}}),t.getState=r.getState,t.$services.setService("state",function(){return r});var a=i(0);a.mixin(t,a),t.env=i(7);var s=i(10)();t.event=s.attach,t.eventRemove=s.detach,t._eventRemoveAll=s.detachAll,t._createDomEventScope=s.extend,a.mixin(t,i(31)(t));var o=i(32).init(t);return t.$ui=o.factory,t.$ui.layers=o.render,t.$mouseEvents=o.mouseEvents,t.$services.setService("mouseEvents",function(){return t.$mouseEvents}),t.mixin(t,o.layersApi),i(55)(t),t.$services.setService("layers",function(){return o.layersService}),i(56)(t),i(63)(t),i(66)(t),i(73)(t),i(74)(t),i(75)(t),i(76)(t),i(77)(t),i(78)(t),i(85)(t),i(86)(t),i(87)(t),i(88)(t),i(89)(t),i(90)(t),i(91)(t),i(92)(t),i(93)(t),i(94)(t),i(95)(t),i(96)(t),i(97)(t),i(98)(t),i(99)(t),i(100)(t),i(102)(t),t}},function(t,e){t.exports=function(t){t.$inject=function(t){return t(this.$services)}}},function(t,e){t.exports=function(){var t={};return{services:{config:"config",templates:"templates",locale:"locale"},setService:function(e,i){t[e]=i},getService:function(e){return t[e]?t[e]():null},config:function(){return this.getService("config")},templates:function(){return this.getService("templates")},locale:function(){return this.getService("locale")},destructor:function(){for(var e in t)if(t[e]){var i=t[e];i&&i.destructor&&i.destructor()}t=null}}}},function(t,e){t.exports=function(){return{layout:{css:"gantt_container",rows:[{cols:[{view:"grid",scrollX:"scrollHor",scrollY:"scrollVer"},{resizer:!0,width:1},{view:"timeline",scrollX:"scrollHor",scrollY:"scrollVer"},{view:"scrollbar",id:"scrollVer"}]},{view:"scrollbar",id:"scrollHor",height:20}]},links:{finish_to_start:"0",start_to_start:"1",finish_to_finish:"2",start_to_finish:"3"},types:{task:"task",project:"project",milestone:"milestone"},duration_unit:"day",work_time:!1,correct_work_time:!1,skip_off_time:!1,cascade_delete:!0,autosize:!1,autosize_min_width:0,autoscroll:!0,autoscroll_speed:30,show_links:!0,show_task_cells:!0,static_background:!1,branch_loading:!1,branch_loading_property:"$has_child",show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,xml_date:"%d-%m-%Y %H:%i",api_date:"%d-%m-%Y %H:%i",start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,scroll_on_click:!0,preserve_scroll:!0,readonly:!1,date_grid:"%Y-%m-%d",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_project:!1,drag_move:!0,drag_mode:{resize:"resize",progress:"progress",move:"move",ignore:"ignore"},round_dnd_dates:!0,link_wrapper_width:20,root_id:0,autofit:!1,columns:[{name:"text",tree:!0,width:"*",resize:!0},{name:"start_date",align:"center",resize:!0},{name:"duration",align:"center"},{name:"add",width:44}],step:1,scale_unit:"day",scale_offset_minimal:!0,subscales:[],inherit_scale_class:!1,time_step:60,duration_step:1,date_scale:"%d %M",task_date:"%d %F %Y",time_picker:"%H:%i",task_attribute:"task_id",link_attribute:"link_id",layer_attribute:"data-layer",buttons_left:["gantt_save_btn","gantt_cancel_btn"],_migrate_buttons:{dhx_save_btn:"gantt_save_btn",dhx_cancel_btn:"gantt_cancel_btn",dhx_delete_btn:"gantt_delete_btn"},buttons_right:["gantt_delete_btn"],lightbox:{sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"time",type:"duration",map_to:"auto"}],project_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",readonly:!0,map_to:"auto"}],milestone_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",single_date:!0,map_to:"auto"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,order_branch:!1,order_branch_free:!1,task_height:"full",min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:"column_index",grid_resizer_attribute:"grid_resizer",keep_grid_width:!1,grid_resize:!1,show_unscheduled:!0,readonly_property:"readonly",editable_property:"editable",calendar_property:"calendar_id",resource_calendars:{},type_renderers:{},open_tree_initially:!1,optimize_render:!0,prevent_default_scroll:!1,show_errors:!0,wai_aria_attributes:!0,smart_scales:!0,rtl:!1}}},function(t,e,i){var n=i(7);t.exports=function(t){return{cache:!0,method:"get",parse:function(t){return"string"!=typeof t?t:(t=t.replace(/^[\s]+/,""),window.DOMParser&&!n.isIE?e=(new window.DOMParser).parseFromString(t,"text/xml"):window.ActiveXObject!==window.undefined&&((e=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)),e);var e},xmltop:function(e,i,n){if(void 0===i.status||i.status<400){var r=i.responseXML?i.responseXML||i:this.parse(i.responseText||i);if(r&&null!==r.documentElement&&!r.getElementsByTagName("parsererror").length)return r.getElementsByTagName(e)[0]}return-1!==n&&t.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],n]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),n.isIE)return e.selectNodes(t)||[];for(var i,r=[],a=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);i=a.iterateNext();)r.push(i);return r},query:function(t){this._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,null,t.headers)},get:function(t,e){this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},put:function(t,e,i){this._call("PUT",t,e,!0,i)},del:function(t,e,i){this._call("DELETE",t,e,!0,i)},post:function(t,e,i){1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null===e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2!=arguments.length||"function"!=typeof e&&(window,0)||(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(e,i,r,a,s,o,l){var d=window.XMLHttpRequest&&!n.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),c=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(a&&(d.onreadystatechange=function(){if(4==d.readyState||c&&3==d.readyState){if((200!=d.status||""===d.responseText)&&!t.callEvent("onAjaxError",[d]))return;window.setTimeout(function(){"function"==typeof s&&s.apply(window,[{xmlDoc:d,filePath:i}]),o&&(void 0!==o.postData?this.postLong(o.url,o.postData,s):this.getLong(o.url,s)),s=null,d=null},1)}}),"GET"!=e||this.cache||(i+=(i.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),d.open(e,i,a),l)for(var h in l)d.setRequestHeader(h,l[h]);else"POST"==e.toUpperCase()||"PUT"==e||"DELETE"==e?d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==e&&(r=null);if(d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(r),!a)return{xmlDoc:d,filePath:i}},urlSeparator:function(t){return-1!=t.indexOf("?")?"&":"?"}}}},function(t,e){t.exports=function(t){var e={init:function(){for(var e=t.locale,i=e.date.month_short,n=e.date.month_short_hash={},r=0;r<i.length;r++)n[i[r]]=r;for(i=e.date.month_full,n=e.date.month_full_hash={},r=0;r<i.length;r++)n[i[r]]=r},date_part:function(t){var e=new Date(t);return t.setHours(0),this.hour_start(t),t.getHours()&&(t.getDate()<e.getDate()||t.getMonth()<e.getMonth()||t.getFullYear()<e.getFullYear())&&t.setTime(t.getTime()+36e5*(24-t.getHours())),t},time_part:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},week_start:function(e){var i=e.getDay();return t.config.start_on_monday&&(0===i?i=6:i--),this.date_part(this.add(e,-1*i,"day"))},month_start:function(t){return t.setDate(1),this.date_part(t)},quarter_start:function(t){this.month_start(t);var e=t.getMonth();return t.setMonth(e>=9?9:e>=6?6:e>=3?3:0),t},year_start:function(t){return t.setMonth(0),this.month_start(t)},day_start:function(t){return this.date_part(t)},hour_start:function(t){return t.getMinutes()&&t.setMinutes(0),this.minute_start(t),t},minute_start:function(t){return t.getSeconds()&&t.setSeconds(0),t.getMilliseconds()&&t.setMilliseconds(0),t},_add_days:function(t,e){var i=new Date(t.valueOf());return i.setDate(i.getDate()+e),e>=0&&!t.getHours()&&i.getHours()&&(i.getDate()<=t.getDate()||i.getMonth()<t.getMonth()||i.getFullYear()<t.getFullYear())&&i.setTime(i.getTime()+36e5*(24-i.getHours())),i},add:function(t,e,i){var n=new Date(t.valueOf());switch(i){case"day":n=this._add_days(n,e);break;case"week":n=this._add_days(n,7*e);break;case"month":n.setMonth(n.getMonth()+e);break;case"year":n.setYear(n.getFullYear()+e);break;case"hour":n.setTime(n.getTime()+60*e*60*1e3);break;case"minute":n.setTime(n.getTime()+60*e*1e3);break;default:return this["add_"+i](t,e,i)}return n},add_quarter:function(t,e){return this.add(t,3*e,"month")},to_fixed:function(t){return t<10?"0"+t:t},copy:function(t){return new Date(t.valueOf())},date_to_str:function(i,n){i=i.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+to_fixed(date.getDate())+"';case"%m":return'"+to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+locale.date.day_short[date.getDay()]+"';case"%l":return'"+locale.date.day_full[date.getDay()]+"';case"%M":return'"+locale.date.month_short[date.getMonth()]+"';case"%F":return'"+locale.date.month_full[date.getMonth()]+"';case"%h":return'"+to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+to_fixed(date.getHours())+"';case"%i":return'"+to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+to_fixed(date.getSeconds())+"';case"%W":return'"+to_fixed(getISOWeek(date))+"';default:return t}}),n&&(i=i.replace(/date\.get/g,"date.getUTC"));var r=new Function("date","to_fixed","locale","getISOWeek",'return "'+i+'";');return function(i){return r(i,e.to_fixed,t.locale,e.getISOWeek)}},str_to_date:function(e,i){for(var n="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",r=e.match(/%[a-zA-Z]/g),a=0;a<r.length;a++)switch(r[a]){case"%j":case"%d":n+="set[2]=temp["+a+"]||1;";break;case"%n":case"%m":n+="set[1]=(temp["+a+"]||1)-1;";break;case"%y":n+="set[0]=temp["+a+"]*1+(temp["+a+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":n+="set[3]=temp["+a+"]||0;";break;case"%i":n+="set[4]=temp["+a+"]||0;";break;case"%Y":n+="set[0]=temp["+a+"]||0;";break;case"%a":case"%A":n+="set[3]=set[3]%12+((temp["+a+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":n+="set[5]=temp["+a+"]||0;";break;case"%M":n+="set[1]=locale.date.month_short_hash[temp["+a+"]]||0;";break;case"%F":n+="set[1]=locale.date.month_full_hash[temp["+a+"]]||0;"}var s="set[0],set[1],set[2],set[3],set[4],set[5]";i&&(s=" Date.UTC("+s+")");var o=new Function("date","locale","var set=[0,0,1,0,0,0]; "+n+" return new Date("+s+");");return function(e){return o(e,t.locale)}},getISOWeek:function(t){if(!t)return!1;var e=t.getDay();0===e&&(e=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-e));var n=i.getFullYear(),r=Math.round((i.getTime()-new Date(n,0,1).getTime())/864e5);return 1+Math.floor(r/7)},getUTCISOWeek:function(t){return this.getISOWeek(t)},convert_to_utc:function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},parseDate:function(e,i){return e&&!e.getFullYear&&(t.defined(i)&&(i="string"==typeof i?t.defined(t.templates[i])?t.templates[i]:t.date.str_to_date(i):t.templates.xml_date),e=e?i(e):null),e}};return e}},function(t,e,i){var n=i(2),r=i(0),a=i(9);t.exports=function(t){function e(t){return{target:t.target||t.srcElement,pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,metaKey:t.metaKey,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,altKey:t.altKey}}function i(i,a){this._obj=i,this._settings=a||{},n(this);var s=this.getInputMethods();this._drag_start_timer=null,t.attachEvent("onGanttScroll",r.bind(function(t,e){this.clearDragTimer()},this));for(var o=0;o<s.length;o++)r.bind(function(n){t.event(i,n.down,r.bind(function(a){n.accessor(a)&&(this._settings.original_target=e(a),t.config.touch?(this.clearDragTimer(),this._drag_start_timer=setTimeout(r.bind(function(){this.dragStart(i,a,n)},this),t.config.touch_drag)):this.dragStart(i,a,n))},this)),t.event(document.body,n.up,r.bind(function(t){n.accessor(t)&&this.clearDragTimer()},this))},this)(s[o])}return i.prototype={traceDragEvents:function(e,i){var n=r.bind(function(t){return this.dragMove(e,t,i.accessor)},this),s=(r.bind(function(t){return this.dragScroll(e,t)},this),r.bind(function(t){return t&&t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!(!r.defined(this.config.updates_per_second)||a(this,this.config.updates_per_second))||n(t)},this)),o=r.bind(function(n){return t.eventRemove(document.body,i.move,s),t.eventRemove(document.body,i.up,o),this.dragEnd(e)},this);t.event(document.body,i.move,s),t.event(document.body,i.up,o)},checkPositionChange:function(t){var e=t.y-this.config.pos.y;return Math.sqrt(Math.pow(Math.abs(t.x-this.config.pos.x),2)+Math.pow(Math.abs(e),2))>this.config.sensitivity},initDnDMarker:function(){var t=this.config.marker=document.createElement("div");t.className="gantt_drag_marker",t.innerHTML="Dragging object",document.body.appendChild(t)},backupEventTarget:function(i,n){if(t.config.touch){var r=n(i),a=r.target||r.srcElement,s=a.cloneNode(!0);this.config.original_target=e(r),this.config.original_target.target=s,this.config.backup_element=a,a.parentNode.appendChild(s),a.style.display="none",document.body.appendChild(a)}},getInputMethods:function(){var e=[];if(e.push({move:"mousemove",down:"mousedown",up:"mouseup",accessor:function(t){return t}}),t.config.touch){var i=!0;try{document.createEvent("TouchEvent")}catch(t){i=!1}i?e.push({move:"touchmove",down:"touchstart",up:"touchend",accessor:function(t){return t.touches&&t.touches.length>1?null:t.touches[0]?{target:document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY),pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t}}):window.navigator.pointerEnabled?e.push({move:"pointermove",down:"pointerdown",up:"pointerup",accessor:function(t){return"mouse"==t.pointerType?null:t}}):window.navigator.msPointerEnabled&&e.push({move:"MSPointerMove",down:"MSPointerDown",up:"MSPointerUp",accessor:function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t}})}return e},clearDragTimer:function(){this._drag_start_timer&&(clearTimeout(this._drag_start_timer),this._drag_start_timer=null)},dragStart:function(e,i,n){this.config={obj:e,marker:null,started:!1,pos:this.getPosition(i),sensitivity:4},this._settings&&r.mixin(this.config,this._settings,!0),this.traceDragEvents(e,n),t._prevent_touch_scroll=!0,document.body.className+=" gantt_noselect",t.config.touch&&this.dragMove(e,i,n.accessor)},dragMove:function(e,i,n){var r=n(i);if(r){if(!this.config.marker&&!this.config.started){var a=this.getPosition(r);if(t.config.touch||this.checkPositionChange(a)){if(this.config.started=!0,this.config.ignore=!1,!1===this.callEvent("onBeforeDragStart",[e,this.config.original_target]))return this.config.ignore=!0,!0;this.backupEventTarget(i,n),this.initDnDMarker(),t._touch_feedback(),this.callEvent("onAfterDragStart",[e,this.config.original_target])}else this.config.ignore=!0}return this.config.ignore?void 0:(r.pos=this.getPosition(r),this.config.marker.style.left=r.pos.x+"px",this.config.marker.style.top=r.pos.y+"px",this.callEvent("onDragMove",[e,r]),!1)}},dragEnd:function(e){var i=this.config.backup_element;i&&i.parentNode&&i.parentNode.removeChild(i),t._prevent_touch_scroll=!1,this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent("onDragEnd",[])),document.body.className=document.body.className.replace(" gantt_noselect","")},getPosition:function(t){var e=0,i=0;return(t=t||window.event).pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:e,y:i}}},i}},function(t,e){t.exports=function(t){function e(e,n,r){r=r||e;var a=t.config,s=t.templates;t.config[e]&&i[r]!=a[e]&&(n&&s[r]||(s[r]=t.date.date_to_str(a[e]),i[r]=a[e]))}var i={};return{initTemplates:function(){var i=t.locale.labels;i.gantt_save_btn=i.icon_save,i.gantt_cancel_btn=i.icon_cancel,i.gantt_delete_btn=i.icon_delete;var n=t.date,r=n.date_to_str,a=t.config;e("date_scale",!0,void 0),e("date_grid",!0,"grid_date_format"),e("task_date",!0,void 0),t.mixin(t.templates,{xml_date:n.str_to_date(a.xml_date,a.server_utc),xml_format:r(a.xml_date,a.server_utc),api_date:n.str_to_date(a.api_date),progress_text:function(t,e,i){return""},grid_header_class:function(t,e){return""},task_text:function(t,e,i){return i.text},task_class:function(t,e,i){return""},grid_row_class:function(t,e,i){return""},task_row_class:function(t,e,i){return""},task_cell_class:function(t,e){return""},scale_cell_class:function(t){return""},scale_row_class:function(t){return""},grid_indent:function(t){return"<div class='gantt_tree_indent'></div>"},grid_folder:function(t){return"<div class='gantt_tree_icon gantt_folder_"+(t.$open?"open":"closed")+"'></div>"},grid_file:function(t){return"<div class='gantt_tree_icon gantt_file'></div>"},grid_open:function(t){return"<div class='gantt_tree_icon gantt_"+(t.$open?"close":"open")+"'></div>"},grid_blank:function(t){return"<div class='gantt_tree_icon gantt_blank'></div>"},date_grid:function(e,i){return i&&t.isUnscheduledTask(i)&&t.config.show_unscheduled?t.templates.task_unscheduled_time(i):t.templates.grid_date_format(e)},task_time:function(e,i,n){return t.isUnscheduledTask(n)&&t.config.show_unscheduled?t.templates.task_unscheduled_time(n):t.templates.task_date(e)+" - "+t.templates.task_date(i)},task_unscheduled_time:function(t){return""},time_picker:r(a.time_picker),link_class:function(t){return""},link_description:function(e){var i=t.getTask(e.source),n=t.getTask(e.target);return"<b>"+i.text+"</b> &ndash;  <b>"+n.text+"</b>"},drag_link:function(e,i,n,r){e=t.getTask(e);var a=t.locale.labels,s="<b>"+e.text+"</b> "+(i?a.link_start:a.link_end)+"<br/>";return n&&(s+="<b> "+(n=t.getTask(n)).text+"</b> "+(r?a.link_start:a.link_end)+"<br/>"),s},drag_link_class:function(e,i,n,r){var a="";return e&&n&&(a=" "+(t.isLinkAllowed(e,n,i,r)?"gantt_link_allow":"gantt_link_deny")),"gantt_link_tooltip"+a},tooltip_date_format:n.date_to_str("%Y-%m-%d"),tooltip_text:function(e,i,n){return"<b>Task:</b> "+n.text+"<br/><b>Start date:</b> "+t.templates.tooltip_date_format(e)+"<br/><b>End date:</b> "+t.templates.tooltip_date_format(i)}})},initTemplate:e}}},function(t,e,i){var n=i(0);t.exports=function(){var t={};return{getState:function(e){if(e)return t[e].method();var i={};for(var r in t)t[r].internal||n.mixin(i,t[r].method(),!0);return i},registerProvider:function(e,i,n){t[e]={method:i,internal:n}},unregisterProvider:function(e){delete t[e]}}}},function(t,e,i){var n=i(0);i(1),t.exports=function(t){function e(t,e){var i=t.callback;v.hide(t.box),p=t.box=null,i&&i(e)}function r(t){if(p){var i=(t=t||event).which||event.keyCode,n=!1;if(y.keyboard){if(13==i||32==i){var r=t.target||t.srcElement;m.getClassName(r).indexOf("gantt_popup_button")>-1&&r.click?r.click():(e(p,!0),n=!0)}27==i&&(e(p,!1),n=!0)}if(n)return t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}}function a(t){a.cover||((a.cover=document.createElement("DIV")).onkeydown=r,a.cover.className="dhx_modal_cover",document.body.appendChild(a.cover)),document,a.cover.style.display=t?"inline-block":"none"}function s(e,i,n){var r=t._waiAria.messageButtonAttrString(e),a=i.toLowerCase().replace(/ /g,"_");return"<div "+r+" class='gantt_popup_button dhtmlx_popup_button gantt_"+a+"_button dhtmlx_"+a+"_button' result='"+n+"' ><div>"+e+"</div></div>"}function o(e){y.area||(y.area=document.createElement("DIV"),y.area.className="gantt_message_area dhtmlx_message_area",y.area.style[y.position]="5px",document.body.appendChild(y.area)),y.hide(e.id);var i=document.createElement("DIV");return i.innerHTML="<div>"+e.text+"</div>",i.className="gantt-info dhtmlx-info gantt-"+e.type+" dhtmlx-"+e.type,i.onclick=function(){y.hide(e.id),e=null},t._waiAria.messageInfoAttr(i),"bottom"==y.position&&y.area.firstChild?y.area.insertBefore(i,y.area.firstChild):y.area.appendChild(i),e.expire>0&&(y.timers[e.id]=window.setTimeout(function(){y.hide(e.id)},e.expire)),y.pull[e.id]=i,i=null,e.id}function l(){for(var t=[].slice.apply(arguments,[0]),e=0;e<t.length;e++)if(t[e])return t[e]}function d(i,r,a){var o=document.createElement("DIV"),d=n.uid();t._waiAria.messageModalAttr(o,d),o.className=" gantt_modal_box dhtmlx_modal_box gantt-"+i.type+" dhtmlx-"+i.type,o.setAttribute("dhxbox",1);var c="";if(i.width&&(o.style.width=i.width),i.height&&(o.style.height=i.height),i.title&&(c+='<div class="gantt_popup_title dhtmlx_popup_title">'+i.title+"</div>"),c+='<div class="gantt_popup_text dhtmlx_popup_text" id="'+d+'"><span>'+(i.content?"":i.text)+'</span></div><div  class="gantt_popup_controls dhtmlx_popup_controls">',r&&(c+=s(l(i.ok,t.locale.labels.message_ok,"OK"),"ok",!0)),a&&(c+=s(l(i.cancel,t.locale.labels.message_cancel,"Cancel"),"cancel",!1)),i.buttons)for(var h=0;h<i.buttons.length;h++){var u=i.buttons[h];c+="object"==typeof u?s(u.label,u.css||"gantt_"+u.label.toLowerCase()+"_button dhtmlx_"+u.label.toLowerCase()+"_button",u.value||h):s(u,u,h)}if(o.innerHTML=c+="</div>",i.content){var _=i.content;"string"==typeof _&&(_=document.getElementById(_)),"none"==_.style.display&&(_.style.display=""),o.childNodes[i.title?1:0].appendChild(_)}return o.onclick=function(t){var n=(t=t||event).target||t.srcElement;if(n.className||(n=n.parentNode),"gantt_popup_button"==n.className.split(" ")[0]){var r=n.getAttribute("result");e(i,r="true"==r||"false"!=r&&r)}},i.box=o,(r||a)&&(p=i),o}function c(e,i,n){var s=e.tagName?e:d(e,i,n);e.hidden||a(!0),document.body.appendChild(s);var o=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-s.offsetWidth)/2)),l=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-s.offsetHeight)/2));return s.style.top="top"==e.position?"-3px":l+"px",s.style.left=o+"px",s.onkeydown=r,v.focus(s),e.hidden&&v.hide(s),t.callEvent("onMessagePopup",[s]),s}function h(t){return c(t,!0,!1)}function u(t){return c(t,!0,!0)}function _(t){return c(t)}function f(t,e,i){return"object"!=typeof t&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}function g(t,e,i,r){return"object"!=typeof t&&(t={text:t,type:e,expire:i,id:r}),t.id=t.id||n.uid(),t.expire=t.expire||y.expire,t}var p=null;t.event(document,"keydown",r,!0);var v=function(){var t=f.apply(this,arguments);return t.type=t.type||"alert",_(t)};v.hide=function(e){for(;e&&e.getAttribute&&!e.getAttribute("dhxbox");)e=e.parentNode;e&&(e.parentNode.removeChild(e),a(!1),t.callEvent("onAfterMessagePopup",[e]))};var m=i(1);v.focus=function(t){setTimeout(function(){var e=m.getFocusableNodes(t);e.length&&e[0].focus&&e[0].focus()},1)};var y=function(t,e,i,n){switch((t=g.apply(this,arguments)).type=t.type||"info",t.type.split("-")[0]){case"alert":return h(t);case"confirm":return u(t);case"modalbox":return _(t);default:return o(t)}};y.seed=(new Date).valueOf(),y.uid=n.uid,y.expire=4e3,y.keyboard=!0,y.position="top",y.pull={},y.timers={},y.hideAll=function(){for(var t in y.pull)y.hide(t)},y.hide=function(t){var e=y.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.className+=" hidden",y.timers[t]&&window.clearTimeout(y.timers[t]),delete y.pull[t])};var x=[];return t.attachEvent("onMessagePopup",function(t){x.push(t)}),t.attachEvent("onAfterMessagePopup",function(t){for(var e=0;e<x.length;e++)x[e]===t&&(x.splice(e,1),e--)}),t.attachEvent("onDestroy",function(){a.cover&&a.cover.parentNode&&a.cover.parentNode.removeChild(a.cover);for(var t=0;t<x.length;t++)x[t].parentNode&&x[t].parentNode.removeChild(x[t]);x=null,y.area&&y.area.parentNode&&y.area.parentNode.removeChild(y.area),y=null}),{alert:function(){var t=f.apply(this,arguments);return t.type=t.type||"confirm",h(t)},confirm:function(){var t=f.apply(this,arguments);return t.type=t.type||"alert",u(t)},message:y,modalbox:v}}},function(t,e,i){var n=i(33),r=i(35),a=i(36),s=i(4),o=i(11),l=i(39),d=i(40),c=i(41),h=i(42),u=i(12),_=i(14),f=i(14),g=i(12),p=i(45),v=i(46),m=i(47),y=i(48),x=i(49),b=i(51),w=i(54);t.exports={init:function(t){function e(e,i){var n=i(t);n.onCreated&&n.onCreated(e),e.attachEvent("onReady",function(){n.onInitialized&&n.onInitialized(e)}),e.attachEvent("onDestroy",function(){n.onDestroyed&&n.onDestroyed(e)})}var i=n.createFactory(t);i.registerView("cell",s),i.registerView("resizer",c),i.registerView("scrollbar",h),i.registerView("layout",o,function(t){"main"===(t.$config?t.$config.id:null)&&e(t,w)}),i.registerView("viewcell",d),i.registerView("multiview",l),i.registerView("timeline",u,function(t){"timeline"!==(t.$config?t.$config.id:null)&&"task"!=t.$config.bind||e(t,b)}),i.registerView("grid",_,function(t){"grid"!==(t.$config?t.$config.id:null)&&"task"!=t.$config.bind||e(t,x)}),i.registerView("resourceGrid",f),i.registerView("resourceTimeline",g);var k=a(t);return{factory:i,mouseEvents:r.init(t),layersApi:k.init(),render:{gridLine:y(t),taskBg:v(t),taskBar:p(t),link:m(t)},layersService:{getDataRender:function(e){return k.getDataRender(e,t)},createDataRender:function(e){return k.createDataRender(e,t)}}}}}},function(t,e,i){var n=i(0),r=i(34);t.exports={createFactory:function(t){function e(e,s,o,l){var d=i[e];if(!d||!d.create)return!1;"resizer"!=e||o.mode||(o.mode=l.$config.cols?"x":"y"),"viewcell"!=e||"scrollbar"!=o.view||o.scroll||(o.scroll=l.$config.cols?"y":"x"),(o=n.copy(o)).id||a[o.view]||(o.id=o.view),o.id&&!o.css&&(o.css=o.id+"_cell");var c=new d.create(s,o,this,t);return d.configure&&d.configure(c),r(c,l),c.$id||(c.$id=o.id||t.uid()),c.$parent||"object"!=typeof s||(c.$parent=s),c.$config||(c.$config=o),a[c.$id]&&(c.$id=t.uid()),a[c.$id]=c,c}var i={},a={};return{initUI:function(t,i){var n="cell";return t.view?n="viewcell":t.resizer?n="resizer":t.rows||t.cols?n="layout":t.views&&(n="multiview"),e.call(this,n,null,t,i)},reset:function(){a={}},registerView:function(t,e,n){i[t]={create:e,configure:n}},createView:e,getView:function(t){return a[t]}}}}},function(t,e,i){function n(t){a.mixin(this,t,!0)}function r(t,e){var i=this.$config[t];return i?i instanceof n?i:(n.prototype=e,this.$config[t]=new n(i),this.$config[t]):e}var a=i(0);t.exports=function(t,e){a.mixin(t,function(t){var e,i;return{$getConfig:function(){return e||(e=t?t.$getConfig():this.$gantt.config),r.call(this,"config",e)},$getTemplates:function(){return i||(i=t?t.$getTemplates():this.$gantt.templates),r.call(this,"templates",i)}}}(e))}},function(t,e,i){var n=function(t){return function(e){function i(t,e,i,n){c[t][e]||(c[t][e]=[]),c[t][e].push({handler:i,root:n})}function n(t){t=t||window.event;var i=e.locate(t),n=a(t,c.click),r=!0;if(null!==i?r=!e.checkEvent("onTaskClick")||e.callEvent("onTaskClick",[i,t]):e.callEvent("onEmptyClick",[t]),r){if(!s(n,t,i))return;i&&e.getTask(i)&&e.config.select_task&&!e.config.multiselect&&e.selectTask(i)}}function r(t){var i=(t=t||window.event).target||t.srcElement,n=e.locate(i),r=e.locate(i,e.config.link_attribute),a=!e.checkEvent("onContextMenu")||e.callEvent("onContextMenu",[n,r,t]);return a||(t.preventDefault?t.preventDefault():t.returnValue=!1),a}function a(e,i){for(var n=e.target||e.srcElement,r=[];n;){var a=t.getClassName(n);if(a){a=a.split(" ");for(var s=0;s<a.length;s++)if(a[s]&&i[a[s]])for(var o=i[a[s]],l=0;l<o.length;l++)o[l].root&&!t.isChildOf(n,o[l].root)||r.push(o[l].handler)}n=n.parentNode}return r}function s(t,i,n){for(var r=!0,a=0;a<t.length;a++){var s=t[a].call(e,i,n,i.target||i.srcElement);r=r&&!(void 0!==s&&!0!==s)}return r}function o(t){t=t||window.event;var i=e.locate(t),n=a(t,c.doubleclick),r=!e.checkEvent("onTaskDblClick")||e.callEvent("onTaskDblClick",[i,t]);if(r){if(!s(n,t,i))return;null!==i&&e.getTask(i)&&r&&e.config.details_on_dblclick&&e.showLightbox(i)}}function l(t){if(e.checkEvent("onMouseMove")){var i=e.locate(t);e._last_move_event=t,e.callEvent("onMouseMove",[i,t])}}function d(t){h.detachAll(),t&&(h.attach(t,"click",n),h.attach(t,"dblclick",o),h.attach(t,"mousemove",l),h.attach(t,"contextmenu",r))}var c={click:{},doubleclick:{},contextMenu:{}},h=e._createDomEventScope();return{reset:d,global:function(t,e,n){i(t,e,n,null)},delegate:i,detach:function(t,e,i,n){if(c[t])for(var r=0;r<c[t].length;r++)c[t][r].root==n&&(c[t].splice(r,1),r--)},callHandler:function(t,e,i,n){var r=c[t][e];if(r)for(var a=0;a<r.length;a++)(i||r[a].root)&&r[a].root!==i||r[a].handler.apply(this,n)},onDoubleClick:o,onMouseMove:l,onContextMenu:r,onClick:n,destructor:function(){d(),c=null,h=null}}}}(i(1));t.exports={init:n}},function(t,e,i){var n=i(37);t.exports=function(t){var e=n(t);return{getDataRender:function(e){return t.$services.getService("layer:"+e)||null},createDataRender:function(i){var n=i.name,r=e.createGroup(i.defaultContainer,i.defaultContainerSibling,function(t,e){if(!r.filters)return!0;for(var i=0;i<r.filters.length;i++)if(!1===r.filters[i](t,e))return!1});return t.$services.setService("layer:"+n,function(){return r}),t.attachEvent("onGanttReady",function(){r.addLayer()}),r},init:function(){var e=this.createDataRender({name:"task",defaultContainer:function(){return t.$task_data?t.$task_data:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_data:void 0},defaultContainerSibling:function(){return t.$task_links?t.$task_links:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_links:void 0},filter:function(t){}},t),i=this.createDataRender({name:"link",defaultContainer:function(){return t.$task_data?t.$task_data:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_data:void 0}},t);return{addTaskLayer:function(t){return e.addLayer(t)},_getTaskLayers:function(){return e.getLayers()},removeTaskLayer:function(t){e.removeLayer(t)},_clearTaskLayers:function(){e.clear()},addLinkLayer:function(t){return i.addLayer(t)},_getLinkLayers:function(){return i.getLayers()},removeLinkLayer:function(t){i.removeLayer(t)},_clearLinkLayers:function(){i.clear()}}}}}},function(t,e,i){function n(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments,0)),function(e){for(var i=!0,n=0,r=t.length;n<r;n++){var a=t[n];a&&(i=i&&!1!==a(e.id,e))}return i}}var r=i(38),a=i(0);t.exports=function(t){var e=r(t);return{createGroup:function(i,r,s){var o={tempCollection:[],renderers:{},container:i,filters:[],getLayers:function(){var t=[];for(var e in this.renderers)t.push(this.renderers[e]);return t},getLayer:function(t){return this.renderers[t]},_add:function(t){if(t&&(t.id=t.id||a.uid(),this.tempCollection.push(t)),this.container())for(var i=this.container(),n=this.tempCollection,s=0;s<n.length;s++){var o=(t=n[s]).container,l=t.id;if(!o.parentNode)if(t.topmost)i.appendChild(o);else{var d=r?r():i.firstChild;d?i.insertBefore(o,d):i.appendChild(o)}this.renderers[l]=e.getRenderer(l,t,o),this.tempCollection.splice(s,1),s--}},addLayer:function(t){return t&&("function"==typeof t&&(t={renderer:t}),void 0===t.filter?t.filter=n(s||[]):t.filter instanceof Array&&(t.filter.push(s),t.filter=n(t.filter)),t.container||(t.container=document.createElement("div"))),this._add(t),t?t.id:void 0},eachLayer:function(t){for(var e in this.renderers)t(this.renderers[e])},removeLayer:function(t){this.renderers[t]&&(this.renderers[t].destructor(),delete this.renderers[t])},clear:function(){for(var t in this.renderers)this.renderers[t].destructor();this.renderers={}}};return t.attachEvent("onDestroy",function(){o.clear(),o=null}),o}}}},function(t,e){t.exports=function(t){function e(e,a,s){if(r[e])return r[e];a.renderer||t.assert(!1,"Invalid renderer call");var o=function(t){return a.renderer.call(this,t,a.host)},l=a.filter;return s&&s.setAttribute(i.config().layer_attribute,!0),r[e]={render_item:function(e,i){if(i=i||s,!l||l(e)){var n=o.call(t,e);this.append(e,n,i)}else this.remove_item(e.id)},clear:function(t){this.rendered=n[e]={},this.clear_container(t)},clear_container:function(t){(t=t||s)&&(t.innerHTML="")},render_items:function(t,e){e=e||s;var i=document.createDocumentFragment();this.clear(e);for(var n=0,r=t.length;n<r;n++)this.render_item(t[n],i);e.appendChild(i)},append:function(t,e,i){e?(this.rendered[t.id]&&this.rendered[t.id].parentNode?this.replace_item(t.id,e):i.appendChild(e),this.rendered[t.id]=e):this.rendered[t.id]&&this.remove_item(t.id)},replace_item:function(t,e){var i=this.rendered[t];i&&i.parentNode&&i.parentNode.replaceChild(e,i),this.rendered[t]=e},remove_item:function(t){this.hide(t),delete this.rendered[t]},hide:function(t){var e=this.rendered[t];e&&e.parentNode&&e.parentNode.removeChild(e)},restore:function(t){var e=this.rendered[t.id];e?e.parentNode||this.append(t,e,s):this.render_item(t,s)},change_id:function(t,e){this.rendered[e]=this.rendered[t],delete this.rendered[t]},rendered:n[e],node:s,destructor:function(){this.clear(),delete r[e],delete n[e]}},r[e]}var i=t.$services,n={},r={};return{getRenderer:e,clearRenderers:function(){for(var t in r)e(t).destructor()}}}},function(t,e,i){var n=i(5),r=i(11),a=i(4),s=function(t){"use strict";function e(e,i,n){for(var r=t.apply(this,arguments)||this,a=0;a<r.$cells.length;a++)r.$cells[a].$config.hidden=0!==a;return r.$cell=r.$cells[0],r.$name="viewLayout",r}return n(e,t),e.prototype.cell=function(e){var i=t.prototype.cell.call(this,e);return i.$view||this.$fill(null,this),i},e.prototype.moveView=function(t){var e=this.$view;this.$cell&&(this.$cell.$config.hidden=!0,e.removeChild(this.$cell.$view)),this.$cell=t,e.appendChild(t.$view)},e.prototype.setSize=function(t,e){a.prototype.setSize.call(this,t,e)},e.prototype.setContentSize=function(){var t=this.$lastSize;this.$cell.setSize(t.contentX,t.contentY)},e.prototype.getSize=function(){var e=t.prototype.getSize.call(this);if(this.$cell){var i=this.$cell.getSize();if(this.$config.byMaxSize)for(var n=0;n<this.$cells.length;n++){var r=this.$cells[n].getSize();for(var a in i)i[a]=Math.max(i[a],r[a])}for(var s in e)e[s]=e[s]||i[s];e.gravity=Math.max(e.gravity,i.gravity)}return e},e}(r);t.exports=s},function(t,e,i){var n=i(5),r=i(0),a=function(t){"use strict";function e(e,i,n){var a=t.apply(this,arguments)||this;if(i.view){i.id&&(this.$id=r.uid());var s=r.copy(i);if(delete s.config,delete s.templates,this.$content=this.$factory.createView(i.view,this,s,this),!this.$content)return!1}return a.$name="viewCell",a}return n(e,t),e.prototype.destructor=function(){this.clear(),t.prototype.destructor.call(this)},e.prototype.clear=function(){if(this.$initialized=!1,this.$content){var e=this.$content.unload||this.$content.destructor;e&&e.call(this.$content)}t.prototype.clear.call(this)},e.prototype.scrollTo=function(e,i){this.$content&&this.$content.scrollTo?this.$content.scrollTo(e,i):t.prototype.scrollTo.call(this,e,i)},e.prototype._setContentSize=function(t,e){var i=this._getBorderSizes(),n=e+i.vertical;this.$config.width=t+i.horizontal,this.$config.height=n},e.prototype.setSize=function(e,i){if(t.prototype.setSize.call(this,e,i),!this.$preResize&&this.$content&&!this.$initialized){this.$initialized=!0;var n=this.$view.childNodes[1];n||(n=this.$view.childNodes[0]),this.$content.init(n)}},e.prototype.setContentSize=function(){!this.$preResize&&this.$content&&this.$initialized&&this.$content.setSize(this.$lastSize.contentX,this.$lastSize.contentY)},e.prototype.getContentSize=function(){var e=t.prototype.getContentSize.call(this);if(this.$content&&this.$initialized){var i=this.$content.getSize();e.width=void 0===i.contentX?i.width:i.contentX,e.height=void 0===i.contentY?i.height:i.contentY}var n=this._getBorderSizes();return e.width+=n.horizontal,e.height+=n.vertical,e},e}(i(4));t.exports=a},function(t,e){t.exports=null},function(t,e,i){var n=i(5),r=i(1),a=i(0),s=i(7),o=function(t){"use strict";function e(e,i,n,r){var s=t.apply(this,arguments)||this;this.$config=a.mixin(i,{scroll:"x"}),s._scrollHorizontalHandler=a.bind(s._scrollHorizontalHandler,s),s._scrollVerticalHandler=a.bind(s._scrollVerticalHandler,s),s._outerScrollVerticalHandler=a.bind(s._outerScrollVerticalHandler,s),s._outerScrollHorizontalHandler=a.bind(s._outerScrollHorizontalHandler,s),s._mouseWheelHandler=a.bind(s._mouseWheelHandler,s),this.$config.hidden=!0;var o=r.config.scroll_size;return r.env.isIE&&(o+=1),this._isHorizontal()?(s.$config.height=o,s.$parent.$config.height=o):(s.$config.width=o,s.$parent.$config.width=o),this.$config.scrollPosition=0,s.$name="scroller",s}return n(e,t),e.prototype.init=function(t){t.innerHTML=this.$toHTML(),this.$view=t.firstChild,this.$view||this.init(),this._isVertical()?this._initVertical():this._initHorizontal(),this._initMouseWheel(),this._initLinkedViews()},e.prototype.$toHTML=function(){return"<div class='gantt_layout_cell "+(this._isHorizontal()?"gantt_hor_scroll":"gantt_ver_scroll")+"'><div style='"+(this._isHorizontal()?"width:2000px":"height:2000px")+"'></div></div>"},e.prototype._getRootParent=function(){for(var t=this.$parent;t&&t.$parent;)t=t.$parent;if(t)return t},e.prototype._eachView=function(){var t=[];return function t(e,i){if(i.push(e),e.$cells)for(var n=0;n<e.$cells.length;n++)t(e.$cells[n],i)}(this._getRootParent(),t),t},e.prototype._getLinkedViews=function(){for(var t=this._eachView(),e=[],i=0;i<t.length;i++)t[i].$config&&(this._isVertical()&&t[i].$config.scrollY==this.$id||this._isHorizontal()&&t[i].$config.scrollX==this.$id)&&e.push(t[i]);return e},e.prototype._initHorizontal=function(){this.$scroll_hor=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollHorizontalHandler)},e.prototype._initLinkedViews=function(){for(var t=this._getLinkedViews(),e=this._isVertical()?"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical":"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal",i=0;i<t.length;i++)r.addClassName(t[i].$view||t[i].getNode(),e)},e.prototype._initVertical=function(){this.$scroll_ver=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollVerticalHandler)},e.prototype._updateLinkedViews=function(){this._getRootParent()},e.prototype._initMouseWheel=function(){this.$domEvents.attach(this._getRootParent().$view,s.isFF?"wheel":"mousewheel",this._mouseWheelHandler)},e.prototype.scrollHorizontally=function(t){if(!this._scrolling){this._scrolling=!0,this.$scroll_hor.scrollLeft=t,this.$config.codeScrollLeft=t,t=this.$scroll_hor.scrollLeft;for(var e=this._getLinkedViews(),i=0;i<e.length;i++)e[i].scrollTo&&e[i].scrollTo(t,void 0);var n=this.$config.scrollPosition;this.$config.scrollPosition=t,this.callEvent("onScroll",[n,t,this.$config.scroll]),this._scrolling=!1}},e.prototype.scrollVertically=function(t){if(!this._scrolling){this._scrolling=!0,this.$scroll_ver.scrollTop=t,t=this.$scroll_ver.scrollTop;for(var e=this._getLinkedViews(),i=0;i<e.length;i++)e[i].scrollTo&&e[i].scrollTo(void 0,t);var n=this.$config.scrollPosition;this.$config.scrollPosition=t,this.callEvent("onScroll",[n,t,this.$config.scroll]),this._scrolling=!1}},e.prototype._isVertical=function(){return"y"==this.$config.scroll},e.prototype._isHorizontal=function(){return"x"==this.$config.scroll},e.prototype._scrollHorizontalHandler=function(t){if(!this._isVertical()&&!this._scrolling){if(new Date-(this._wheel_time||0)<100)return!0;this.$gantt._touch_scroll_active||(this.scrollHorizontally(this.$scroll_hor.scrollLeft),this._oldLeft=this.$scroll_hor.scrollLeft)}},e.prototype._outerScrollHorizontalHandler=function(t){this._isVertical()},e.prototype.show=function(){this.$parent.show()},e.prototype.hide=function(){this.$parent.hide()},e.prototype._getScrollSize=function(){for(var t,e=0,i=0,n=this._isHorizontal(),r=this._getLinkedViews(),a=n?"scrollWidth":"scrollHeight",s=n?"contentX":"contentY",o=n?"x":"y",l=this._getScrollOffset(),d=0;d<r.length;d++)if((t=r[d])&&t.$content&&t.$content.getSize){var c,h=t.$content.getSize();if(c=h.hasOwnProperty(a)?h[a]:h[s],l)h[s]>h[o]&&h[s]>e&&c>h[o]-l+2&&(e=c+(n?0:2),i=h[o]);else{var u=Math.max(h[s]-c,0);(c+=u)>Math.max(h[o]-u,0)&&c>e&&(e=c,i=h[o])}}return{outerScroll:i,innerScroll:e}},e.prototype.scroll=function(t){this._isHorizontal()?this.scrollHorizontally(t):this.scrollVertically(t)},e.prototype.getScrollState=function(){return{visible:this.isVisible(),direction:this.$config.scroll,size:this.$config.outerSize,scrollSize:this.$config.scrollSize||0,position:this.$config.scrollPosition||0}},e.prototype.setSize=function(e,i){t.prototype.setSize.apply(this,arguments);var n=this._getScrollSize(),r=(this._isVertical()?i:e)-this._getScrollOffset()+(this._isHorizontal()?1:0);n.innerScroll&&r>n.outerScroll&&(n.innerScroll+=r-n.outerScroll),this.$config.scrollSize=n.innerScroll,this.$config.width=e,this.$config.height=i,this._setScrollSize(n.innerScroll)},e.prototype.isVisible=function(){return!(!this.$parent||!this.$parent.$view.parentNode)},e.prototype.shouldShow=function(){var t=this._getScrollSize();return!(!t.innerScroll&&this.$parent&&this.$parent.$view.parentNode||!t.innerScroll||this.$parent&&this.$parent.$view.parentNode)},e.prototype.shouldHide=function(){return!(this._getScrollSize().innerScroll||!this.$parent||!this.$parent.$view.parentNode)},e.prototype.toggleVisibility=function(){this.shouldHide()?this.hide():this.shouldShow()&&this.show()},e.prototype._getScaleOffset=function(t){var e=0;return!t||"timeline"!=t.$config.view&&"grid"!=t.$config.view||(e=t.$content.$getConfig().scale_height),e},e.prototype._getScrollOffset=function(){var t=0;if(this._isVertical()){var e=this.$parent.$parent;t=Math.max(this._getScaleOffset(e.getPrevSibling(this.$parent.$id)),this._getScaleOffset(e.getNextSibling(this.$parent.$id)))}else for(var i=this._getLinkedViews(),n=0;n<i.length;n++){var r=i[n].$parent.$cells,a=r[r.length-1];if(a&&"scrollbar"==a.$config.view&&!1===a.$config.hidden){t=a.$config.width;break}}return t||0},e.prototype._setScrollSize=function(t){var e=this._isHorizontal()?"width":"height",i=this._isHorizontal()?this.$scroll_hor:this.$scroll_ver,n=this._getScrollOffset(),a=i.firstChild;n?this._isVertical()?(this.$config.outerSize=this.$config.height-n+3,i.style.height=this.$config.outerSize+"px",i.style.top=n-1+"px",r.addClassName(i,this.$parent._borders.top),r.addClassName(i.parentNode,"gantt_task_vscroll")):(this.$config.outerSize=this.$config.width-n+1,i.style.width=this.$config.outerSize+"px"):(i.style.top="auto",r.removeClassName(i,this.$parent._borders.top),r.removeClassName(i.parentNode,"gantt_task_vscroll")),a.style[e]=t+"px"},e.prototype._scrollVerticalHandler=function(t){if(!this._scrollHorizontalHandler()&&!this._scrolling&&!this.$gantt._touch_scroll_active){var e=this.$scroll_ver.scrollTop;e!=this._oldTop&&(this.scrollVertically(e),this._oldTop=this.$scroll_ver.scrollTop)}},e.prototype._outerScrollVerticalHandler=function(t){this._scrollHorizontalHandler()},e.prototype._checkWheelTarget=function(t){for(var e=this._getLinkedViews().concat(this),i=0;i<e.length;i++)if(r.isChildOf(t,e[i].$view))return!0;return!1},e.prototype._mouseWheelHandler=function(t){if(this._checkWheelTarget(t.target||t.srcElement)){this._wheel_time=new Date;var e={},i=s.isFF,n=i?-20*t.deltaX:2*t.wheelDeltaX,r=i?-40*t.deltaY:t.wheelDelta;if(!t.shiftKey||t.deltaX||t.wheelDeltaX||(n=2*r,r=0),n&&Math.abs(n)>Math.abs(r)){if(this._isVertical())return;if(e.x)return!0;if(!this.$scroll_hor||!this.$scroll_hor.offsetWidth)return!0;var a=this._oldLeft,o=a+30*(l=n/-40);if(this.scrollHorizontally(o),this.$scroll_hor.scrollLeft=o,a==this.$scroll_hor.scrollLeft)return!0;this._oldLeft=this.$scroll_hor.scrollLeft}else{if(this._isHorizontal())return;if(e.y)return!0;if(!this.$scroll_ver||!this.$scroll_ver.offsetHeight)return!0;var l=r/-40;void 0===r&&(l=t.detail);var d=this._oldTop,c=this.$scroll_ver.scrollTop+30*l;if(this.scrollVertically(c),this.$scroll_ver.scrollTop=c,d==this.$scroll_ver.scrollTop)return!0;this._oldTop=this.$scroll_ver.scrollTop}return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1}},e}((i(2),i(4)));t.exports=o},function(t,e){t.exports={create:function(){return{render:function(){}}}}},function(t,e){t.exports=function(t,e){return{init:function(){},doOnRender:function(){}}}},function(t,e){t.exports=function(t){function e(e,i){if(!t._isAllowedUnscheduledTask(e)){var a=i.getItemPosition(e),o=i.$getConfig(),l=i.$getTemplates(),d=i.getItemHeight(),c=t.getTaskType(e.type),h=Math.floor((t.config.row_height-d)/2);c==o.types.milestone&&o.link_line_width>1&&(h+=1),c==o.types.milestone&&(a.left-=Math.round(d/2),a.width=d);var u=document.createElement("div"),_=Math.round(a.width);i.$config.item_attribute&&u.setAttribute(i.$config.item_attribute,e.id),o.show_progress&&c!=o.types.milestone&&function(e,i,n,r,a){var s=1*e.progress||0;n=Math.max(n-2,0);var o=document.createElement("div"),l=Math.round(n*s);l=Math.min(n,l),e.progressColor&&(o.style.backgroundColor=e.progressColor,o.style.opacity=1),o.style.width=l+"px",o.className="gantt_task_progress",o.innerHTML=a.progress_text(e.start_date,e.end_date,e),r.rtl&&(o.style.position="absolute",o.style.right="0px");var d=document.createElement("div");if(d.className="gantt_task_progress_wrapper",d.appendChild(o),i.appendChild(d),t.config.drag_progress&&!t.isReadonly(e)){var c=document.createElement("div"),h=l;r.rtl&&(h=n-l),c.style.left=h+"px",c.className="gantt_task_progress_drag",o.appendChild(c),i.appendChild(c)}}(e,u,_,o,l);var f=function(e,i,n){var r=document.createElement("div");return t.getTaskType(e.type)!=t.config.types.milestone&&(r.innerHTML=n.task_text(e.start_date,e.end_date,e)),r.className="gantt_task_content",r}(e,0,l);e.textColor&&(f.style.color=e.textColor),u.appendChild(f);var g=function(e,i,n,r){var a=r.$getConfig(),s=["gantt_task_line"];i&&s.push(i);var o=t.getState(),l=t.getTask(n);if(t.getTaskType(l.type)==a.types.milestone&&s.push("gantt_milestone"),t.getTaskType(l.type)==a.types.project&&s.push("gantt_project"),t.isSummaryTask(l)&&s.push("gantt_dependent_task"),a.select_task&&n==o.selected_task&&s.push("gantt_selected"),n==o.drag_id&&(s.push("gantt_drag_"+o.drag_mode),o.touch_drag&&s.push("gantt_touch_"+o.drag_mode)),o.link_source_id==n&&s.push("gantt_link_source"),o.link_target_id==n&&s.push("gantt_link_target"),a.highlight_critical_path&&t.isCriticalTask&&t.isCriticalTask(l)&&s.push("gantt_critical_task"),o.link_landing_area&&o.link_target_id&&o.link_source_id&&o.link_target_id!=o.link_source_id){var d=o.link_to_start,c=t.isLinkAllowed(o.link_source_id,n,o.link_from_start,d);s.push(c?d?"link_start_allow":"link_finish_allow":d?"link_start_deny":"link_finish_deny")}return s.join(" ")}(0,l.task_class(e.start_date,e.end_date,e),e.id,i);(e.color||e.progressColor||e.textColor)&&(g+=" gantt_task_inline_color"),u.className=g;var p=["left:"+a.left+"px","top:"+(h+a.top)+"px","height:"+d+"px","line-height:"+Math.max(d<30?d-2:d,0)+"px","width:"+_+"px"];e.color&&p.push("background-color:"+e.color),e.textColor&&p.push("color:"+e.textColor),u.style.cssText=p.join(";");var v=n(e,o,l);v&&u.appendChild(v),(v=r(e,o,l))&&u.appendChild(v),t._waiAria.setTaskBarAttr(e,u);var m=t.getState();return t.isReadonly(e)||(o.drag_resize&&!t.isSummaryTask(e)&&c!=o.types.milestone&&s(u,"gantt_task_drag",e,function(t){var e=document.createElement("div");return e.className=t,e},o),o.drag_links&&o.show_links&&s(u,"gantt_link_control",e,function(t){var e=document.createElement("div");e.className=t,e.style.cssText=["height:"+d+"px","line-height:"+d+"px"].join(";");var i=document.createElement("div");i.className="gantt_link_point";var n=!1;return m.link_source_id&&o.touch&&(n=!0),i.style.display=n?"block":"",e.appendChild(i),e},o)),u}}function i(t,e,i){if(!e)return null;var n=e(t.start_date,t.end_date,t);if(!n)return null;var r=document.createElement("div");return r.className="gantt_side_content "+i,r.innerHTML=n,r}function n(t,e,n){var r="gantt_left "+a(!e.rtl,t);return i(t,n.leftside_text,r)}function r(t,e,n){var r="gantt_right "+a(!!e.rtl,t);return i(t,n.rightside_text,r)}function a(e,i){var n=function(e){return e?{$source:[t.config.links.start_to_start],$target:[t.config.links.start_to_start,t.config.links.finish_to_start]}:{$source:[t.config.links.finish_to_start,t.config.links.finish_to_finish],$target:[t.config.links.finish_to_finish]}}(e);for(var r in n)for(var a=i[r],s=0;s<a.length;s++)for(var o=t.getLink(a[s]),l=0;l<n[r].length;l++)if(o.type==n[r][l])return"gantt_link_crossing";return""}function s(e,i,n,r,a){var s,o=t.getState();+n.start_date>=+o.min_date&&((s=r([i,a.rtl?"task_right":"task_left","task_start_date"].join(" "))).setAttribute("data-bind-property","start_date"),e.appendChild(s)),+n.end_date<=+o.max_date&&((s=r([i,a.rtl?"task_left":"task_right","task_end_date"].join(" "))).setAttribute("data-bind-property","end_date"),e.appendChild(s))}return function(i,n){var r=n.$getConfig().type_renderers[t.getTaskType(i.type)],a=e;return r?r.call(t,i,function(e){return a.call(t,e,n)},n):a.call(t,i,n)}}},function(t,e){t.exports=function(t){return function(e,i){var n=i.$getConfig(),r=i.$getTemplates(),a=i.getScale(),s=a.count,o=document.createElement("div");if(n.show_task_cells)for(var l=0;l<s;l++){var d=a.width[l],c="";if(d>0){var h=document.createElement("div");h.style.width=d+"px",c="gantt_task_cell"+(l==s-1?" gantt_last_cell":""),(_=r.task_cell_class(e,a.trace_x[l]))&&(c+=" "+_),h.className=c,o.appendChild(h)}}var u=t.getGlobalTaskIndex(e.id)%2!=0,_=r.task_row_class(e.start_date,e.end_date,e),f="gantt_task_row"+(u?" odd":"")+(_?" "+_:"");return i.$config.rowStore.getSelectedId()==e.id&&(f+=" gantt_selected"),o.className=f,n.smart_rendering&&(o.style.position="absolute",o.style.top=i.getItemTop(e.id)+"px",o.style.width="100%"),o.style.height=n.row_height+"px",i.$config.item_attribute&&o.setAttribute(i.$config.item_attribute,e.id),o}}},function(t,e){t.exports=function(t){function e(e,i){var n=i.$getConfig(),r=i.getItemPosition(e);if(t.getTaskType(e.type)==n.types.milestone){var a=t.getTaskHeight(),s=Math.sqrt(2*a*a);r.left-=s/2,r.width=s}return r}var i={current_pos:null,dirs:{left:"left",right:"right",up:"up",down:"down"},path:[],clear:function(){this.current_pos=null,this.path=[]},point:function(e){this.current_pos=t.copy(e)},get_lines:function(t){this.clear(),this.point(t[0]);for(var e=1;e<t.length;e++)this.line_to(t[e]);return this.get_path()},line_to:function(e){var i=t.copy(e),n=this._get_line(this.current_pos,i);this.path.push(n),this.current_pos=i},get_path:function(){return this.path},get_wrapper_sizes:function(t,e){var i,n=e.$getConfig(),r=n.link_wrapper_width,a=t.y+(n.row_height-r)/2;switch(t.direction){case this.dirs.left:i={top:a,height:r,lineHeight:r,left:t.x-t.size-r/2,width:t.size+r};break;case this.dirs.right:i={top:a,lineHeight:r,height:r,left:t.x-r/2,width:t.size+r};break;case this.dirs.up:i={top:a-t.size,lineHeight:t.size+r,height:t.size+r,left:t.x-r/2,width:r};break;case this.dirs.down:i={top:a,lineHeight:t.size+r,height:t.size+r,left:t.x-r/2,width:r}}return i},get_line_sizes:function(t,e){var i,n=e.$getConfig(),r=n.link_line_width,a=n.link_wrapper_width,s=t.size+r;switch(t.direction){case this.dirs.left:case this.dirs.right:i={height:r,width:s,marginTop:(a-r)/2,marginLeft:(a-r)/2};break;case this.dirs.up:case this.dirs.down:i={height:s,width:r,marginTop:(a-r)/2,marginLeft:(a-r)/2}}return i},render_line:function(t,e,i){var n=this.get_wrapper_sizes(t,i),r=document.createElement("div");r.style.cssText=["top:"+n.top+"px","left:"+n.left+"px","height:"+n.height+"px","width:"+n.width+"px"].join(";"),r.className="gantt_line_wrapper";var a=this.get_line_sizes(t,i),s=document.createElement("div");return s.style.cssText=["height:"+a.height+"px","width:"+a.width+"px","margin-top:"+a.marginTop+"px","margin-left:"+a.marginLeft+"px"].join(";"),s.className="gantt_link_line_"+t.direction,r.appendChild(s),r},_get_line:function(t,e){var i=this.get_direction(t,e),n={x:t.x,y:t.y,direction:this.get_direction(t,e)};return n.size=i==this.dirs.left||i==this.dirs.right?Math.abs(t.x-e.x):Math.abs(t.y-e.y),n},get_direction:function(t,e){return e.x<t.x?this.dirs.left:e.x>t.x?this.dirs.right:e.y>t.y?this.dirs.down:this.dirs.up}},n={path:[],clear:function(){this.path=[]},current:function(){return this.path[this.path.length-1]},point:function(e){return e?(this.path.push(t.copy(e)),e):this.current()},point_to:function(e,n,r){r=r?{x:r.x,y:r.y}:t.copy(this.point());var a=i.dirs;switch(e){case a.left:r.x-=n;break;case a.right:r.x+=n;break;case a.up:r.y-=n;break;case a.down:r.y+=n}return this.point(r)},get_points:function(e,n){var r=this.get_endpoint(e,n),a=t.config,s=r.e_y-r.y,o=r.e_x-r.x,l=i.dirs;this.clear(),this.point({x:r.x,y:r.y});var d=2*a.link_arrow_size,c=this.get_line_type(e,n.$getConfig()),h=r.e_x>r.x;if(c.from_start&&c.to_start)this.point_to(l.left,d),h?(this.point_to(l.down,s),this.point_to(l.right,o)):(this.point_to(l.right,o),this.point_to(l.down,s)),this.point_to(l.right,d);else if(!c.from_start&&c.to_start)h=r.e_x>r.x+2*d,this.point_to(l.right,d),h?(o-=d,this.point_to(l.down,s),this.point_to(l.right,o)):(o-=2*d,this.point_to(l.down,(u=s>0?1:-1)*(a.row_height/2)),this.point_to(l.right,o),this.point_to(l.down,u*(Math.abs(s)-a.row_height/2)),this.point_to(l.right,d));else if(c.from_start||c.to_start){if(c.from_start&&!c.to_start)if(h=r.e_x>r.x-2*d,this.point_to(l.left,d),h){var u;o+=2*d,this.point_to(l.down,(u=s>0?1:-1)*(a.row_height/2)),this.point_to(l.right,o),this.point_to(l.down,u*(Math.abs(s)-a.row_height/2)),this.point_to(l.left,d)}else o+=d,this.point_to(l.down,s),this.point_to(l.right,o)}else this.point_to(l.right,d),h?(this.point_to(l.right,o),this.point_to(l.down,s)):(this.point_to(l.down,s),this.point_to(l.right,o)),this.point_to(l.left,d);return this.path},get_line_type:function(e,i){var n=i.links,r=!1,a=!1;return e.type==n.start_to_start?r=a=!0:e.type==n.finish_to_finish?r=a=!1:e.type==n.finish_to_start?(r=!1,a=!0):e.type==n.start_to_finish?(r=!0,a=!1):t.assert(!1,"Invalid link type"),i.rtl&&(r=!r,a=!a),{from_start:r,to_start:a}},get_endpoint:function(i,n){var r=n.$getConfig(),a=this.get_line_type(i,r),s=a.from_start,o=a.to_start,l=t.getTask(i.source),d=t.getTask(i.target),c=e(l,n),h=e(d,n);return{x:s?c.left:c.left+c.width,e_x:o?h.left:h.left+h.width,y:c.top,e_y:h.top}}};return function(e,r){var a=r.$getConfig(),s=n.get_points(e,r),o=i.get_lines(s,r),l=document.createElement("div"),d="gantt_task_link";e.color&&(d+=" gantt_link_inline_color");var c=t.templates.link_class?t.templates.link_class(e):"";c&&(d+=" "+c),a.highlight_critical_path&&t.isCriticalLink&&t.isCriticalLink(e)&&(d+=" gantt_critical_link"),l.className=d,r.$config.link_attribute&&l.setAttribute(r.$config.link_attribute,e.id);for(var h=0;h<o.length;h++){h==o.length-1&&(o[h].size-=a.link_arrow_size);var u=i.render_line(o[h],o[h+1],r);e.color&&(u.firstChild.style.backgroundColor=e.color),l.appendChild(u)}var _=function(t,e,n){var r=n.$getConfig(),a=document.createElement("div"),s=t.y,o=t.x,l=r.link_arrow_size,d=r.row_height,c="gantt_link_arrow gantt_link_arrow_"+e;switch(e){case i.dirs.right:s-=(l-d)/2,o-=l;break;case i.dirs.left:s-=(l-d)/2;break;case i.dirs.up:o-=l;break;case i.dirs.down:s+=2*l,o-=l}return a.style.cssText=["top:"+s+"px","left:"+o+"px"].join(";"),a.className=c,a}(s[s.length-1],o[o.length-1].direction,r);return e.color&&(_.style.borderColor=e.color),l.appendChild(_),t._waiAria.linkAttr(e,l),l}}},function(t,e,i){var n=i(3);t.exports=function(t){return function(e,i){var r=i.getGridColumns(),a=i.$getConfig(),s=i.$getTemplates(),o=i.$config.rowStore;a.rtl&&(r=r.reverse());for(var l=[],d=0;d<r.length;d++){var c,h,u,_=d==r.length-1,f=r[d];"add"==f.name?(h="<div "+(y=t._waiAria.gridAddButtonAttrString(f))+" class='gantt_add'></div>",u=""):(h=f.template?f.template(e):e[f.name],n.isDate(h)&&(h=s.date_grid(h,e)),u=h,h="<div class='gantt_tree_content'>"+h+"</div>");var g="gantt_cell"+(_?" gantt_last_cell":""),p=[];if(f.tree){for(var v=0;v<e.$level;v++)p.push(s.grid_indent(e));o.hasChild(e.id)?(p.push(s.grid_open(e)),p.push(s.grid_folder(e))):(p.push(s.grid_blank(e)),p.push(s.grid_file(e)))}var m="width:"+(f.width-(_?1:0))+"px;";this.defined(f.align)&&(m+="text-align:"+f.align+";");var y=t._waiAria.gridCellAttrString(f,u);p.push(h),a.rtl&&(p=p.reverse()),c="<div class='"+g+"' style='"+m+"' "+y+">"+p.join("")+"</div>",l.push(c)}if(g=t.getGlobalTaskIndex(e.id)%2==0?"":" odd",g+=e.$transparent?" gantt_transparent":"",g+=e.$dataprocessor_class?" "+e.$dataprocessor_class:"",s.grid_row_class){var x=s.grid_row_class.call(t,e.start_date,e.end_date,e);x&&(g+=" "+x)}o.getSelectedId()==e.id&&(g+=" gantt_selected");var b=document.createElement("div");return b.className="gantt_row"+g,b.style.height=a.row_height+"px",b.style.lineHeight=a.row_height+"px",a.smart_rendering&&(b.style.position="absolute",b.style.left="0px",b.style.top=i.getItemTop(e.id)+"px"),i.$config.item_attribute&&b.setAttribute(i.$config.item_attribute,e.id),t._waiAria.taskRowAttr(e,b),b.innerHTML=l.join(""),b}}},function(t,e,i){var n=i(0),r=i(50);t.exports=function(t){return{onCreated:function(e){e.$config=n.mixin(e.$config,{bind:"task"}),"grid"==e.$config.id&&this.extendGantt(e),this._mouseDelegates=i(8)(t)},onInitialized:function(e){e.$getConfig().order_branch&&r.init(e.$gantt,e),this.initEvents(e,t),"grid"==e.$config.id&&this.extendDom(e)},onDestroyed:function(e){this.clearEvents(e,t)},initEvents:function(t,e){this._mouseDelegates.delegate("click","gantt_row",e.bind(function(i,n,r){var a=t.$getConfig();if(null!==n){var s=this.getTask(n);a.scroll_on_click&&!e._is_icon_open_click(i)&&this.showDate(s.start_date),e.callEvent("onTaskRowClick",[n,r])}},e),t.$grid),this._mouseDelegates.delegate("click","gantt_grid_head_cell",e.bind(function(i,n,r){var a=r.getAttribute("column_id");if(e.callEvent("onGridHeaderClick",[a,i])){var s=t.$getConfig();if("add"==a)return void e.$services.getService("mouseEvents").callHandler("click","gantt_add",t.$grid,[i,s.root_id]);if(s.sort){for(var o,l=a,d=0;d<s.columns.length;d++)if(s.columns[d].name==a){o=s.columns[d];break}if(o&&void 0!==o.sort&&!0!==o.sort&&!(l=o.sort))return;var c=this._sort&&this._sort.direction&&this._sort.name==a?this._sort.direction:"desc";this._sort={name:a,direction:c="desc"==c?"asc":"desc"},this.sort(l,"desc"==c)}}},e),t.$grid),this._mouseDelegates.delegate("click","gantt_add",e.bind(function(i,n,r){if(!t.$getConfig().readonly)return this.createTask({},n||e.config.root_id),!1},e),t.$grid)},clearEvents:function(t,e){this._mouseDelegates.destructor(),this._mouseDelegates=null},extendDom:function(e){t.$grid=e.$grid,t.$grid_scale=e.$grid_scale,t.$grid_data=e.$grid_data},extendGantt:function(e){t.getGridColumns=t.bind(e.getGridColumns,e),e.attachEvent("onColumnResizeStart",function(){return t.callEvent("onColumnResizeStart",arguments)}),e.attachEvent("onColumnResize",function(){return t.callEvent("onColumnResize",arguments)}),e.attachEvent("onColumnResizeEnd",function(){return t.callEvent("onColumnResizeEnd",arguments)}),e.attachEvent("onColumnResizeComplete",function(e,i){t.config.grid_width=i})}}}},function(t,e,i){var n=i(1);t.exports={init:function(t,e){function i(t){return n.locateAttribute(t,e.$config.item_attribute)}function r(){return t.getDatastore(e.$config.bind)}var a=t.$services.getService("dnd");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var s=new a(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(s.config.sensitivity=e.$getConfig().dnd_sensitivity),s.attachEvent("onBeforeDragStart",t.bind(function(n,a){var o=i(a);if(!o)return!1;t.hideQuickInfo&&t._hideQuickInfo();var l=o.getAttribute(e.$config.item_attribute),d=r().getItem(l);return!t.isReadonly(d)&&(s.config.initial_open_state=d.$open,!!t.callEvent("onRowDragStart",[l,a.target||a.srcElement,a])&&void 0)},t)),s.attachEvent("onAfterDragStart",t.bind(function(t,n){var a=i(n);s.config.marker.innerHTML=a.outerHTML;var o=s.config.marker.firstChild;o&&(o.style.position="static"),s.config.id=a.getAttribute(e.$config.item_attribute);var l=r(),d=l.getItem(s.config.id);s.config.index=l.getBranchIndex(s.config.id),s.config.parent=d.parent,d.$open=!1,d.$transparent=!0,this.refreshData()},t)),s.lastTaskOfLevel=function(t){for(var e=null,i=r().getItems(),n=0,a=i.length;n<a;n++)i[n].$level==t&&(e=i[n]);return e?e.id:null},s._getGridPos=t.bind(function(t){var i=n.getNodePosition(e.$grid_data),a=r(),s=i.x,o=t.pos.y-10,l=e.$getConfig();o<i.y&&(o=i.y);var d=a.countVisible()*l.row_height;return o>i.y+d-l.row_height&&(o=i.y+d-l.row_height),i.x=s,i.y=o,i},t),s._getTargetY=t.bind(function(t){var i=n.getNodePosition(e.$grid_data),r=t.pageY-i.y+(e.$state.scrollTop||0);return r<0&&(r=0),r},t),s._getTaskByY=t.bind(function(t,i){var n=e.$getConfig(),a=r();t=t||0;var s=Math.floor(t/n.row_height);return(s=i<s?s-1:s)>a.countVisible()-1?null:a.getIdByIndex(s)},t),s.attachEvent("onDragMove",t.bind(function(t,i){function n(t,e){return!d.isChildOf(_.id,e.id)&&(t.$level==e.$level||l.order_branch_free)}var a=s.config,o=s._getGridPos(i),l=e.$getConfig(),d=r();a.marker.style.left=o.x+10+"px",a.marker.style.top=o.y+"px";var c=d.getItem(s.config.id),h=s._getTargetY(i),u=s._getTaskByY(h,d.getIndexById(c.id));if(d.exists(u)||(u=s.lastTaskOfLevel(l.order_branch_free?c.$level:0))==s.config.id&&(u=null),d.exists(u)){var _=d.getItem(u);if(d.getIndexById(_.id)*l.row_height+l.row_height/2<h){var f=d.getIndexById(_.id),g=d.getNext(_.id),p=d.getItem(g);if(p){if(p.id==c.id)return l.order_branch_free&&d.isChildOf(c.id,_.id)&&1==d.getChildren(_.id).length?void d.move(c.id,d.getBranchIndex(_.id)+1,d.getParent(_.id)):void 0;_=p}else if(g=d.getIdByIndex(f),n(p=d.getItem(g),c)&&p.id!=c.id)return void d.move(c.id,-1,d.getParent(p.id))}else if(l.order_branch_free&&_.id!=c.id&&n(_,c)){if(!d.hasChild(_.id))return _.$open=!0,void d.move(c.id,-1,_.id);if(d.getIndexById(_.id)||l.row_height/3<h)return}f=d.getIndexById(_.id);for(var v=d.getIdByIndex(f-1),m=d.getItem(v),y=1;(!m||m.id==_.id)&&f-y>=0;)v=d.getIdByIndex(f-y),m=d.getItem(v),y++;if(c.id==_.id)return;n(_,c)&&c.id!=_.id?d.move(c.id,0,0,_.id):_.$level!=c.$level-1||d.getChildren(_.id).length?m&&n(m,c)&&c.id!=m.id&&d.move(c.id,-1,d.getParent(m.id)):d.move(c.id,0,_.id)}return!0},t)),s.attachEvent("onDragEnd",t.bind(function(){var t=r(),e=t.getItem(s.config.id);e.$transparent=!1,e.$open=s.config.initial_open_state,!1===this.callEvent("onBeforeRowDragEnd",[s.config.id,s.config.parent,s.config.index])?(t.move(s.config.id,s.config.index,s.config.parent),e.$drop_target=null):this.callEvent("onRowDragEnd",[s.config.id,e.$drop_target]),t.refresh(e.id)},t))}}}},function(t,e,i){var n=i(0),r=i(52),a=i(53),s=i(1);t.exports=function(t){var e=t.$services;return{onCreated:function(e){var s=e.$config;s.bind=n.defined(s.bind)?s.bind:"task",s.bindLinks=n.defined(s.bindLinks)?s.bindLinks:"link",e._linksDnD=a.createLinkDND(),e._tasksDnD=r.createTaskDND(),e._tasksDnD.extend(e),"timeline"==e.$config.id&&this.extendGantt(e),this._mouseDelegates=i(8)(t)},onInitialized:function(e){this._attachDomEvents(t),this._attachStateProvider(t,e),e._tasksDnD.init(e,t),e._linksDnD.init(e,t),"timeline"==e.$config.id&&this.extendDom(e)},onDestroyed:function(e){this._clearDomEvents(t),this._clearStateProvider(t)},extendDom:function(e){t.$task=e.$task,t.$task_scale=e.$task_scale,t.$task_data=e.$task_data,t.$task_bg=e.$task_bg,t.$task_links=e.$task_links,t.$task_bars=e.$task_bars},extendGantt:function(e){t.dateFromPos=t.bind(e.dateFromPos,e),t.posFromDate=t.bind(e.posFromDate,e),t.getRowTop=t.bind(e.getRowTop,e),t.getTaskTop=t.bind(e.getItemTop,e),t.getTaskPosition=t.bind(e.getItemPosition,e),t.getTaskHeight=t.bind(e.getItemHeight,e),t.columnIndexByDate=t.bind(e.columnIndexByDate,e),t.roundTaskDates=t.bind(e.roundTaskDates,e),t.getScale=t.bind(e.getScale,e),t.getTaskNode=function(t){return e._taskRenderer.rendered[t]},t.getLinkNode=function(t){return e._linkRenderer.rendered[t]}},_clearDomEvents:function(){this._mouseDelegates.destructor(),this._mouseDelegates=null},_attachDomEvents:function(t){function e(e,i){if(e&&this.callEvent("onLinkDblClick",[e,i])){var n=this.getLink(e);if(this.isReadonly(n))return;var r=this.locale.labels.link+" "+this.templates.link_description(this.getLink(e))+" "+this.locale.labels.confirm_link_deleting;window.setTimeout(function(){t._dhtmlx_confirm(r,"",function(){t.deleteLink(e)})},this.config.touch?300:1)}}this._mouseDelegates.delegate("click","gantt_task_link",t.bind(function(t,e){var i=this.locate(t,this.config.link_attribute);i&&this.callEvent("onLinkClick",[i,t])},t),this.$task),this._mouseDelegates.delegate("click","gantt_scale_cell",t.bind(function(e,i){var n=s.getRelativeEventPosition(e,t.$task_data),r=t.dateFromPos(n.x),a=Math.floor(t.columnIndexByDate(r)),o=t.getScale().trace_x[a];t.callEvent("onScaleClick",[e,o])},t),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_task_link",t.bind(function(i,n,r){n=this.locate(i,t.config.link_attribute),e.call(this,n,i)},t),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_link_point",t.bind(function(t,i,n){i=this.locate(t);var r=this.getTask(i),a=null;return n.parentNode&&s.getClassName(n.parentNode)&&(a=s.getClassName(n.parentNode).indexOf("_left")>-1?r.$target[0]:r.$source[0]),a&&e.call(this,a,t),!1},t),this.$task)},_attachStateProvider:function(t,i){var n=i;e.getService("state").registerProvider("tasksTimeline",function(){return{scale_unit:n._tasks?n._tasks.unit:void 0,scale_step:n._tasks?n._tasks.step:void 0}})},_clearStateProvider:function(){e.getService("state").unregisterProvider("tasksTimeline")}}}},function(t,e,i){var n=i(1),r=i(0),a=i(9);t.exports={createTaskDND:function(){var t;return{extend:function(e){e.roundTaskDates=function(e){t.round_task_dates(e)}},init:function(e,i){return t=function(t,e){var i=e.$services;return{drag:null,dragMultiple:{},_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this._domEvents=e._createDomEventScope(),this.clear_drag_state();var t=e.config.drag_mode;this.set_actions(),i.getService("state").registerProvider("tasksDnd",r.bind(function(){return{drag_id:this.drag?this.drag.id:void 0,drag_mode:this.drag?this.drag.mode:void 0,drag_from_start:this.drag?this.drag.left:void 0}},this));var n={before_start:"onBeforeTaskDrag",before_finish:"onBeforeTaskChanged",after_finish:"onAfterTaskDrag"};for(var a in this._events)for(var s in t)this._events[a][s]=n[a];this._handlers[t.move]=this._move,this._handlers[t.resize]=this._resize,this._handlers[t.progress]=this._resize_progress},set_actions:function(){var i=t.$task_data;this._domEvents.attach(i,"mousemove",e.bind(function(t){this.on_mouse_move(t||event)},this)),this._domEvents.attach(i,"mousedown",e.bind(function(t){this.on_mouse_down(t||event)},this)),this._domEvents.attach(i,"mouseup",e.bind(function(t){this.on_mouse_up(t||event)},this))},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null},this.dragMultiple={}},_resize:function(i,n,r){var a=t.$getConfig(),s=this._drag_task_coords(i,r);r.left?(i.start_date=e.dateFromPos(s.start+n),i.start_date||(i.start_date=new Date(e.getState().min_date))):(i.end_date=e.dateFromPos(s.end+n),i.end_date||(i.end_date=new Date(e.getState().max_date))),i.end_date-i.start_date<a.min_duration&&(r.left?i.start_date=e.calculateEndDate({start_date:i.end_date,duration:-1,task:i}):i.end_date=e.calculateEndDate({start_date:i.start_date,duration:1,task:i})),e._init_task_timing(i)},_resize_progress:function(e,i,n){var r=this._drag_task_coords(e,n),a=t.$getConfig(),s=Math.max(0,a.rtl?r.start-n.pos.x:n.pos.x-r.start);e.progress=Math.min(1,s/Math.abs(r.end-r.start))},_find_max_shift:function(t,i){var n;for(var r in t){var a=t[r],s=e.getTask(a.id),o=this._drag_task_coords(s,a),l=e.posFromDate(new Date(e.getState().min_date)),d=e.posFromDate(new Date(e.getState().max_date));if(o.end+i>d){var c=d-o.end;(c<n||void 0===n)&&(n=c)}else if(o.start+i<l){var h=l-o.start;(h<n||void 0===n)&&(n=h)}}return n},_move:function(t,i,n){var r=this._drag_task_coords(t,n),a=e.dateFromPos(r.start+i),s=e.dateFromPos(r.end+i);a?s?(t.start_date=a,t.end_date=s):(t.end_date=new Date(e.getState().max_date),t.start_date=e.dateFromPos(e.posFromDate(t.end_date)-(r.end-r.start))):(t.start_date=new Date(e.getState().min_date),t.end_date=e.dateFromPos(e.posFromDate(t.start_date)+(r.end-r.start)))},_drag_task_coords:function(t,i){return{start:i.obj_s_x=i.obj_s_x||e.posFromDate(t.start_date),end:i.obj_e_x=i.obj_e_x||e.posFromDate(t.end_date)}},_mouse_position_change:function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},_is_number:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},on_mouse_move:function(t){if(this.drag.start_drag){var i=n.getRelativeEventPosition(t,e.$task_data),r=this.drag.start_drag.start_x,s=this.drag.start_drag.start_y;(Date.now()-this.drag.timestamp>50||this._is_number(r)&&this._is_number(s)&&this._mouse_position_change({x:r,y:s},i)>20)&&this._start_dnd(t)}if(this.drag.mode){if(!a(this,40))return;this._update_on_move(t)}},_update_item_on_move:function(t,i,n,r,a){var s=e.getTask(i),o=e.mixin({},s),l=e.mixin({},s);this._handlers[n].apply(this,[l,t,r]),e.mixin(s,l,!0),e.callEvent("onTaskDrag",[s.id,n,l,o,a]),e.mixin(s,l,!0),e.refreshTask(i)},_update_on_move:function(i){var a=this.drag,s=t.$getConfig();if(a.mode){var o=n.getRelativeEventPosition(i,t.$task_data);if(a.pos&&a.pos.x==o.x)return;a.pos=o;var l=e.dateFromPos(o.x);if(!l||isNaN(l.getTime()))return;var d=o.x-a.start_x,c=e.getTask(a.id);if(this._handlers[a.mode]){if(e.isSummaryTask(c)&&e.config.drag_project&&a.mode==s.drag_mode.move){var h={};h[a.id]=r.copy(a);var u=this._find_max_shift(r.mixin(h,this.dragMultiple),d);for(var _ in void 0!==u&&(d=u),this._update_item_on_move(d,a.id,a.mode,a,i),this.dragMultiple){var f=this.dragMultiple[_];this._update_item_on_move(d,f.id,f.mode,f,i)}}else this._update_item_on_move(d,a.id,a.mode,a,i);e._update_parents(a.id)}}},on_mouse_down:function(i,r){if(2!=i.button||void 0===i.button){var a=t.$getConfig(),s=e.locate(i),o=null;if(e.isTaskExists(s)&&(o=e.getTask(s)),!e.isReadonly(o)&&!this.drag.mode){this.clear_drag_state();var l=n.getClassName(r=r||i.target||i.srcElement),d=this._get_drag_mode(l,r);if(!l||!d)return r.parentNode?this.on_mouse_down(i,r.parentNode):void 0;if(d)if(d.mode&&d.mode!=a.drag_mode.ignore&&a["drag_"+d.mode]){if(s=e.locate(r),o=e.copy(e.getTask(s)||{}),e.isReadonly(o))return this.clear_drag_state(),!1;if(e.isSummaryTask(o)&&!a.drag_project&&d.mode!=a.drag_mode.progress)return void this.clear_drag_state();d.id=s;var c=n.getRelativeEventPosition(i,e.$task_data);d.start_x=c.x,d.start_y=c.y,d.obj=o,this.drag.start_drag=d,this.drag.timestamp=Date.now()}else this.clear_drag_state();else if(e.checkEvent("onMouseDown")&&e.callEvent("onMouseDown",[l.split(" ")[0]])&&r.parentNode)return this.on_mouse_down(i,r.parentNode)}}},_fix_dnd_scale_time:function(i,n){function r(i){if(e.config.correct_work_time){var n=t.$getConfig();e.isWorkTime(i.start_date,void 0,i)||(i.start_date=e.calculateEndDate({start_date:i.start_date,duration:-1,unit:n.duration_unit,task:i}))}}var a=t.$getConfig(),s=e.getScale().unit,o=e.getScale().step;a.round_dnd_dates||(s="minute",o=a.time_step),n.mode==a.drag_mode.resize?n.left?(i.start_date=e.roundDate({date:i.start_date,unit:s,step:o}),r(i)):(i.end_date=e.roundDate({date:i.end_date,unit:s,step:o}),function(i){if(e.config.correct_work_time){var n=t.$getConfig();e.isWorkTime(new Date(i.end_date-1),void 0,i)||(i.end_date=e.calculateEndDate({start_date:i.end_date,duration:1,unit:n.duration_unit,task:i}))}}(i)):n.mode==a.drag_mode.move&&(i.start_date=e.roundDate({date:i.start_date,unit:s,step:o}),r(i),i.end_date=e.calculateEndDate(i))},_fix_working_times:function(i,n){var r=t.$getConfig();(n=n||{mode:r.drag_mode.move}).mode==r.drag_mode.resize?n.left?i.start_date=e.getClosestWorkTime({date:i.start_date,dir:"future",task:i}):i.end_date=e.getClosestWorkTime({date:i.end_date,dir:"past",task:i}):n.mode==r.drag_mode.move&&e.correctTaskWorkTime(i)},_finalize_mouse_up:function(t,i,n,r){var a=e.getTask(t);if(i.work_time&&i.correct_work_time&&this._fix_working_times(a,n),this._fix_dnd_scale_time(a,n),this._fireEvent("before_finish",n.mode,[t,n.mode,e.copy(n.obj),r])){var s=t;e._init_task_timing(a),this.clear_drag_state(),e.updateTask(a.id),this._fireEvent("after_finish",n.mode,[s,n.mode,r])}else this.clear_drag_state(),t==n.id&&(n.obj._dhx_changed=!1,e.mixin(a,n.obj,!0)),e.refreshTask(a.id)},on_mouse_up:function(i){var n=this.drag;if(n.mode&&n.id){var r=t.$getConfig(),a=e.getTask(n.id),s=this.dragMultiple;if(this._finalize_mouse_up(n.id,r,n,i),e.isSummaryTask(a)&&r.drag_project&&n.mode==r.drag_mode.move)for(var o in s)this._finalize_mouse_up(s[o].id,r,s[o],i)}this.clear_drag_state()},_get_drag_mode:function(e,i){var n=t.$getConfig().drag_mode,r={mode:null,left:null};switch((e||"").split(" ")[0]){case"gantt_task_line":case"gantt_task_content":r.mode=n.move;break;case"gantt_task_drag":r.mode=n.resize;var a=i.getAttribute("data-bind-property");r.left="start_date"==a;break;case"gantt_task_progress_drag":r.mode=n.progress;break;case"gantt_link_control":case"gantt_link_point":r.mode=n.ignore;break;default:r=null}return r},_start_dnd:function(i){var n=this.drag=this.drag.start_drag;delete n.start_drag;var r=t.$getConfig(),a=n.id;if(r["drag_"+n.mode]&&e.callEvent("onBeforeDrag",[a,n.mode,i])&&this._fireEvent("before_start",n.mode,[a,n.mode,i])){delete n.start_drag;var s=e.getTask(a);e.isSummaryTask(s)&&e.config.drag_project&&n.mode==r.drag_mode.move&&e.eachTask(function(t){this.dragMultiple[t.id]=e.mixin({id:t.id,obj:t},this.drag)},s.id,this),e.callEvent("onTaskDragStart",[])}else this.clear_drag_state()},_fireEvent:function(t,i,n){e.assert(this._events[t],"Invalid stage:{"+t+"}");var r=this._events[t][i];return e.assert(r,"Unknown after drop mode:{"+i+"}"),e.assert(n,"Invalid event arguments"),!e.checkEvent(r)||e.callEvent(r,n)},round_task_dates:function(e){var i=this.drag,n=t.$getConfig();i||(i={mode:n.drag_mode.move}),this._fix_dnd_scale_time(e,i)},destructor:function(){this._domEvents.detachAll()}}}(e,i),e._tasks_dnd=t,t.init(i)},destructor:function(){t.destructor(),t=null}}}}},function(t,e,i){var n=i(1),r=function(t,e){function i(){var e=t.getItemHeight();return Math.round(Math.sqrt(2*e*e))-2}function r(){return{link_source_id:g,link_target_id:_,link_from_start:p,link_to_start:f,link_landing_area:u}}function a(t,i,n,r,a){var o=s(t,function(t){return e.getTaskPosition(t)},r),l={x:o.x,y:o.y};i||(l.x=o.xEnd),l.y+=e.config.row_height/2;var d=function(t){return e.getTaskType(t.type)==e.config.types.milestone}(t)&&a?2:0;return n=n||0,r.rtl&&(n*=-1),l.x+=(i?-1:1)*n-d,l}function s(t,n,r){var a=n(t),s={x:a.left,y:a.top,width:a.width,height:a.height};if(r.rtl?(s.xEnd=s.x,s.x=s.xEnd+s.width):s.xEnd=s.x+s.width,s.yEnd=s.y+s.height,e.getTaskType(t.type)==e.config.types.milestone){var o=i();s.x+=o/2*(r.rtl?1:-1),s.xEnd+=o/2*(r.rtl?-1:1),s.width=a.xEnd-a.x}return s}function o(t){var i=r(),n=["gantt_link_tooltip"];i.link_source_id&&i.link_target_id&&(e.isLinkAllowed(i.link_source_id,i.link_target_id,i.link_from_start,i.link_to_start)?n.push("gantt_allowed_link"):n.push("gantt_invalid_link"));var a=e.templates.drag_link_class(i.link_source_id,i.link_from_start,i.link_target_id,i.link_to_start);a&&n.push(a);var s="<div class='"+a+"'>"+e.templates.drag_link(i.link_source_id,i.link_from_start,i.link_target_id,i.link_to_start)+"</div>";t.innerHTML=s}function l(){g=p=_=null,f=!0}function d(t,i,n,a){var s=h(),o=r(),l=["gantt_link_direction"];e.templates.link_direction_class&&l.push(e.templates.link_direction_class(o.link_source_id,o.link_from_start,o.link_target_id,o.link_to_start));var d=Math.sqrt(Math.pow(n-t,2)+Math.pow(a-i,2));if(d=Math.max(0,d-3)){s.className=l.join(" ");var u=Math.atan((a-i)/(n-t));2==c(t,n,i,a)?u+=Math.PI:3==c(t,n,i,a)&&(u-=Math.PI);var _=Math.sin(u),f=Math.cos(u),g=Math.round(i),p=Math.round(t),v=["-webkit-transform: rotate("+u+"rad)","-moz-transform: rotate("+u+"rad)","-ms-transform: rotate("+u+"rad)","-o-transform: rotate("+u+"rad)","transform: rotate("+u+"rad)","width:"+Math.round(d)+"px"];if(-1!=window.navigator.userAgent.indexOf("MSIE 8.0")){v.push('-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11 = '+f+",M12 = -"+_+",M21 = "+_+",M22 = "+f+",SizingMethod = 'auto expand')\"");var m=Math.abs(Math.round(t-n)),y=Math.abs(Math.round(a-i));switch(c(t,n,i,a)){case 1:g-=y;break;case 2:p-=m,g-=y;break;case 3:p-=m}}v.push("top:"+g+"px"),v.push("left:"+p+"px"),s.style.cssText=v.join(";")}}function c(t,e,i,n){return e>=t?n<=i?1:4:n<=i?2:3}function h(){return x._direction||(x._direction=document.createElement("div"),t.$task_links.appendChild(x._direction)),x._direction}var u,_,f,g,p,v=e.$services,m=v.getService("state"),y=v.getService("dnd");m.registerProvider("linksDnD",r);var x=new y(t.$task_bars,{sensitivity:0,updates_per_second:60});x.attachEvent("onBeforeDragStart",e.bind(function(i,r){var s=r.target||r.srcElement;if(l(),e.getState().drag_id)return!1;if(n.locateClassName(s,"gantt_link_point")){n.locateClassName(s,"task_start_date")&&(p=!0);var o=e.locate(r);g=o;var d=e.getTask(o);return e.isReadonly(d)?(l(),!1):(this._dir_start=a(d,!!p,0,t.$getConfig(),!0),!0)}return!1},this)),x.attachEvent("onAfterDragStart",e.bind(function(t,i){e.config.touch&&e.refreshData(),o(x.config.marker)},this)),x.attachEvent("onDragMove",e.bind(function(i,r){var s=x.config,l=x.getPosition(r);!function(t,e){t.style.left=e.x+5+"px",t.style.top=e.y+5+"px"}(s.marker,l);var c=!!n.locateClassName(r,"gantt_link_control"),h=_,g=u,p=f,v=e.locate(r),m=!0;if(c&&(m=!n.locateClassName(r,"task_end_date"),c=!!v),_=v,u=c,f=m,c){var y=e.getTask(v),b=t.$getConfig(),w=n.locateClassName(r,"gantt_link_control"),k=0;w&&(k=Math.floor(w.offsetWidth/2)),this._dir_end=a(y,!!f,k,b)}else this._dir_end=n.getRelativeEventPosition(r,t.$task_data);var $=!(g==c&&h==v&&p==m);return $&&(h&&e.refreshTask(h,!1),v&&e.refreshTask(v,!1)),$&&o(s.marker),d(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0},this)),x.attachEvent("onDragEnd",e.bind(function(){var t=r();if(t.link_source_id&&t.link_target_id&&t.link_source_id!=t.link_target_id){var i=e._get_link_type(t.link_from_start,t.link_to_start),n={source:t.link_source_id,target:t.link_target_id,type:i};n.type&&e.isLinkAllowed(n)&&e.addLink(n)}l(),e.config.touch?e.refreshData():(t.link_source_id&&e.refreshTask(t.link_source_id,!1),t.link_target_id&&e.refreshTask(t.link_target_id,!1)),x._direction&&(x._direction.parentNode&&x._direction.parentNode.removeChild(x._direction),x._direction=null)},this))};t.exports={createLinkDND:function(){return{init:r}}}},function(t,e){t.exports=function(t){return{getVerticalScrollbar:function(){return t.$ui.getView("scrollVer")},getHorizontalScrollbar:function(){return t.$ui.getView("scrollHor")},_legacyGridResizerClass:function(t){for(var e=t.getCellsByType("resizer"),i=0;i<e.length;i++){var n=e[i],r=!1,a=n.$parent.getPrevSibling(n.$id);if(a&&a.$config&&"grid"===a.$config.id)r=!0;else{var s=n.$parent.getNextSibling(n.$id);s&&s.$config&&"grid"===s.$config.id&&(r=!0)}r&&(n.$config.css=(n.$config.css?n.$config.css+" ":"")+"gantt_grid_resize_wrap")}},onCreated:function(e){var i=!0;this._legacyGridResizerClass(e),e.attachEvent("onBeforeResize",function(){var e=t.$ui.getView("timeline");e&&(e.$config.hidden=e.$parent.$config.hidden=!t.config.show_chart);var n=t.$ui.getView("grid");if(n){var r=t.config.show_grid;if(i){var a=n._getColsTotalWidth();!1!==a&&(t.config.grid_width=a),t.config.show_grid=r=r&&!!t.config.grid_width}if(n.$config.hidden=n.$parent.$config.hidden=!r,!n.$config.hidden){var s=n._getGridWidthLimits();s[0]&&t.config.grid_width<s[0]&&(t.config.grid_width=s[0]),s[1]&&t.config.grid_width>s[1]&&(t.config.grid_width=s[1]),n.$config.width=t.config.grid_width-1,i?(n.$parent.$config.width=t.config.grid_width,n.$parent.$config.group&&t.$layout._syncCellSizes(n.$parent.$config.group,n.$parent.$config.width)):n.$parent._setContentSize(n.$config.width,n.$config.height)}i=!1}}),t._getVerticalScrollbar=this.getVerticalScrollbar,t._getHorizontalScrollbar=this.getHorizontalScrollbar;var n=this.getVerticalScrollbar(),r=this.getHorizontalScrollbar();n&&n.attachEvent("onScroll",function(e,i,n){var r=t.getScrollState();t.callEvent("onGanttScroll",[r.x,e,r.x,i])}),r&&r.attachEvent("onScroll",function(e,i,n){var r=t.getScrollState();t.callEvent("onGanttScroll",[e,r.y,i,r.y])}),e.attachEvent("onResize",function(){n&&!t.$scroll_ver&&(t.$scroll_ver=n.$scroll_ver),r&&!t.$scroll_hor&&(t.$scroll_hor=r.$scroll_hor)})},onInitialized:function(e){var i=t.$ui.getView("grid");if(i&&i.$parent&&i.$parent.$parent&&i.$parent.$parent._xLayout){var n,r=i.$parent.$parent,a=r.getNextSibling(i.$parent.$id),s=!0;a&&"resizer"==a.$name||(a=r.getPrevSibling(i.$parent.$id),s=!1),a&&"resizer"==a.$name&&(a.attachEvent("onResizeStart",function(e,i){var r=t.$ui.getView("grid"),a=r?r.$parent:null;if(a){var o=r._getGridWidthLimits();r.$config.scrollable||(a.$config.minWidth=o[0]),a.$config.maxWidth=o[1]}return t.callEvent("onGridResizeStart",[n=s?e:i])}),a.attachEvent("onResize",function(e,i){return t.callEvent("onGridResize",[n,s?e:i])}),a.attachEvent("onResizeEnd",function(e,i,n,r){var a=s?e:i,o=s?n:r,l=t.$ui.getView("grid"),d=l?l.$parent:null;d&&(d.$config.minWidth=void 0);var c=t.callEvent("onGridResizeEnd",[a,o]);return c&&(t.config.grid_width=o),c}))}},onDestroyed:function(t){}}}},function(t,e){t.exports=function(t){delete t.addTaskLayer,delete t.addLinkLayer}},function(t,e,i){var n=i(0),r=i(57),a=i(17);t.exports=function(t){function e(e){if(t.isTaskExists(e.source)){var i=t.getTask(e.source);i.$source=i.$source||[],i.$source.push(e.id)}if(t.isTaskExists(e.target)){var n=t.getTask(e.target);n.$target=n.$target||[],n.$target.push(e.id)}}function s(e){if(t.isTaskExists(e.source))for(var i=t.getTask(e.source),n=0;n<i.$source.length;n++)if(i.$source[n]==e.id){i.$source.splice(n,1);break}if(t.isTaskExists(e.target)){var r=t.getTask(e.target);for(n=0;n<r.$target.length;n++)if(r.$target[n]==e.id){r.$target.splice(n,1);break}}}function o(){for(var i=null,n=t.$data.tasksStore.getItems(),r=0,a=n.length;r<a;r++)(i=n[r]).$source=[],i.$target=[];var s=t.$data.linksStore.getItems();for(r=0,a=s.length;r<a;r++)e(s[r])}function l(t){var e=t.source,i=t.target;for(var n in t.events)!function(t,n){e.attachEvent(t,function(){return i.callEvent(n,Array.prototype.slice.call(arguments))},n)}(n,t.events[n])}var d=r.create();n.mixin(t,d);var c=t.createDatastore({name:"task",type:"treeDatastore",rootId:function(){return t.config.root_id},initItem:n.bind(function(e){this.defined(e.id)||(e.id=this.uid()),e.start_date&&(e.start_date=t.date.parseDate(e.start_date,"xml_date")),e.end_date&&(e.end_date=t.date.parseDate(e.end_date,"xml_date"));var i=null;return(e.duration||0===e.duration)&&(e.duration=i=1*e.duration),i&&(e.start_date&&!e.end_date?e.end_date=this.calculateEndDate(e):!e.start_date&&e.end_date&&(e.start_date=this.calculateEndDate({start_date:e.end_date,duration:-e.duration,task:e}))),this._isAllowedUnscheduledTask(e)&&this._set_default_task_timing(e),this._init_task_timing(e),e.start_date&&e.end_date&&this.correctTaskWorkTime(e),e.$source=[],e.$target=[],void 0===e.parent&&this.setParent(e,this.config.root_id),e},t)}),h=t.createDatastore({name:"link",initItem:n.bind(function(t){return this.defined(t.id)||(t.id=this.uid()),t},t)});c.attachEvent("onBeforeRefreshAll",function(){for(var e=c.getVisibleItems(),i=0;i<e.length;i++){var n=e[i];n.$index=i,t.resetProjectDates(n)}}),c.attachEvent("onFilterItem",function(e,i){var n=null,r=null;if(t.config.start_date&&t.config.end_date){if(t._isAllowedUnscheduledTask(i))return!0;if(n=t.config.start_date.valueOf(),r=t.config.end_date.valueOf(),+i.start_date>r||+i.end_date<+n)return!1}return!0}),c.attachEvent("onIdChange",function(e,i){t._update_flags(e,i)}),c.attachEvent("onAfterUpdate",function(e){t._update_parents(e)}),c.attachEvent("onAfterItemMove",function(e,i,n){return t.getTask(e).$drop_target=null!==this.getNextSibling(e)?this.getNextSibling(e):null!==this.getPrevSibling(e)?"next:"+this.getPrevSibling(e):"next:null",!0}),c.attachEvent("onStoreUpdated",function(e,i,n){if("delete"==n&&t._update_flags(e,null),!t.$services.getService("state").getState("batchUpdate").batch_update){if(t.config.fit_tasks&&"paint"!==n){var r=t.getState();a(t);var s=t.getState();if(+r.min_date!=+s.min_date||+r.max_date!=+s.max_date)return t.render(),t.callEvent("onScaleAdjusted",[]),!0}"add"==n||"move"==n||"delete"==n?t.$layout.resize():e||h.refresh()}}),h.attachEvent("onAfterAdd",function(t,i){e(i)}),h.attachEvent("onAfterUpdate",function(t,e){o()}),h.attachEvent("onAfterDelete",function(t,e){s(e)}),h.attachEvent("onIdChange",function(i,n){s(t.mixin({id:i},t.$data.linksStore.getItem(n))),e(t.$data.linksStore.getItem(n))}),h.attachEvent("onFilterItem",function(e,i){return!!t.config.show_links&&!(!t.isTaskVisible(i.source)||!t.isTaskVisible(i.target)||t._isAllowedUnscheduledTask(t.getTask(i.source))||t._isAllowedUnscheduledTask(t.getTask(i.target)))&&t.callEvent("onBeforeLinkDisplay",[e,i])}),function(){var e=i(18),n={};t.attachEvent("onBeforeTaskDelete",function(i,r){return n[i]=e.getSubtreeLinks(t,i),!0}),t.attachEvent("onAfterTaskDelete",function(e,i){n[e]&&t.$data.linksStore.silent(function(){for(var i in n[e])t.$data.linksStore.removeItem(i),s(n[e][i]);n[e]=null})})}(),t.attachEvent("onAfterLinkDelete",function(e,i){t.refreshTask(i.source),t.refreshTask(i.target)}),t.attachEvent("onParse",o),l({source:h,target:t,events:{onItemLoading:"onLinkLoading",onBeforeAdd:"onBeforeLinkAdd",onAfterAdd:"onAfterLinkAdd",onBeforeUpdate:"onBeforeLinkUpdate",onAfterUpdate:"onAfterLinkUpdate",onBeforeDelete:"onBeforeLinkDelete",onAfterDelete:"onAfterLinkDelete",onIdChange:"onLinkIdChange"}}),l({source:c,target:t,events:{onItemLoading:"onTaskLoading",onBeforeAdd:"onBeforeTaskAdd",onAfterAdd:"onAfterTaskAdd",onBeforeUpdate:"onBeforeTaskUpdate",onAfterUpdate:"onAfterTaskUpdate",onBeforeDelete:"onBeforeTaskDelete",onAfterDelete:"onAfterTaskDelete",onIdChange:"onTaskIdChange",onBeforeItemMove:"onBeforeTaskMove",onAfterItemMove:"onAfterTaskMove",onFilterItem:"onBeforeTaskDisplay",onItemOpen:"onTaskOpened",onItemClose:"onTaskClosed",onBeforeSelect:"onBeforeTaskSelected",onAfterSelect:"onTaskSelected",onAfterUnselect:"onTaskUnselected"}}),t.$data={tasksStore:c,linksStore:h}}},function(t,e,i){function n(){for(var t=this.$services.getService("datastores"),e=[],i=0;i<t.length;i++)e.push(this.getDatastore(t[i]));return e}var r=i(0),a=i(58),s=i(59),o=i(15),l=i(60),d=i(61),c=i(62);t.exports={create:function(){var t=r.mixin({},{createDatastore:function(t){var e="treedatastore"==(t.type||"").toLowerCase()?l:o;if(t){var i=this;t.openInitially=function(){return i.config.open_tree_initially}}var n=new e(t);if(this.mixin(n,d()),t.name){this.$services.setService("datastore:"+t.name,function(){return n});var r=this.$services.getService("datastores");r||(r=[],this.$services.setService("datastores",function(){return r})),r.push(t.name),c.bindDataStore(t.name,this)}return n},getDatastore:function(t){return this.$services.getService("datastore:"+t)},refreshData:function(){var t=this.getScrollState();this.callEvent("onBeforeDataRender",[]);for(var e=n.call(this),i=0;i<e.length;i++)e[i].refresh();(t.x||t.y)&&this.scrollTo(t.x,t.y),this.callEvent("onDataRender",[])},isChildOf:function(t,e){return this.$data.tasksStore.isChildOf(t,e)},refreshTask:function(t,e){var i=this.getTask(t);if(i&&this.isTaskVisible(t)){if(this.$data.tasksStore.refresh(t,!!this.getState().drag_id),void 0!==e&&!e)return;for(var n=0;n<i.$source.length;n++)this.refreshLink(i.$source[n]);for(n=0;n<i.$target.length;n++)this.refreshLink(i.$target[n])}},refreshLink:function(t){this.$data.linksStore.refresh(t)},silent:function(t){var e=this;e.$data.tasksStore.silent(function(){e.$data.linksStore.silent(function(){t()})})},clearAll:function(){for(var t=n.call(this),e=0;e<t.length;e++)t[e].clearAll();this._update_flags(),this.userdata={},this.callEvent("onClear",[]),this.render()},_clear_data:function(){this.$data.tasksStore.clearAll(),this.$data.linksStore.clearAll(),this._update_flags(),this.userdata={}},selectTask:function(t){var e=this.$data.tasksStore;return!!this.config.select_task&&(t&&e.select(t),e.getSelectedId())},unselectTask:function(t){this.$data.tasksStore.unselect(t)},getSelectedId:function(){return this.$data.tasksStore.getSelectedId()}});return r.mixin(t,a()),r.mixin(t,s()),t}}},function(t,e,i){var n=i(0);t.exports=function(){return{getTask:function(t){this.assert(t,"Invalid argument for gantt.getTask");var e=this.$data.tasksStore.getItem(t);return this.assert(e,"Task not found id="+t),e},getTaskByTime:function(t,e){var i=this.$data.tasksStore.getItems(),n=[];if(t||e){t=+t||-1/0,e=+e||1/0;for(var r=0;r<i.length;r++){var a=i[r];+a.start_date<e&&+a.end_date>t&&n.push(a)}}else n=i;return n},isTaskExists:function(t){return this.$data.tasksStore.exists(t)},updateTask:function(t,e){n.defined(e)||(e=this.getTask(t)),this.$data.tasksStore.updateItem(t,e),this.refreshTask(t)},addTask:function(t,e,i){return n.defined(t.id)||(t.id=n.uid()),n.defined(e)||(e=this.getParent(t)||0),this.isTaskExists(e)||(e=0),this.setParent(t,e),this.$data.tasksStore.addItem(t,i,e)},deleteTask:function(t){return this.$data.tasksStore.removeItem(t)},getTaskCount:function(){return this.$data.tasksStore.count()},getVisibleTaskCount:function(){return this.$data.tasksStore.countVisible()},getTaskIndex:function(t){return this.$data.tasksStore.getBranchIndex(t)},getGlobalTaskIndex:function(t){return this.assert(t,"Invalid argument"),this.$data.tasksStore.getIndexById(t)},eachTask:function(t,e,i){return this.$data.tasksStore.eachItem(n.bind(t,i||this),e)},eachParent:function(t,e,i){return this.$data.tasksStore.eachParent(n.bind(t,i||this),e)},changeTaskId:function(t,e){this.$data.tasksStore.changeId(t,e);var i=this.$data.tasksStore.getItem(e),n=[];i.$source&&(n=n.concat(i.$source)),i.$target&&(n=n.concat(i.$target));for(var r=0;r<n.length;r++){var a=this.getLink(n[r]);a.source==t&&(a.source=e),a.target==t&&(a.target=e)}},calculateTaskLevel:function(t){return this.$data.tasksStore.calculateItemLevel(t)},getNext:function(t){return this.$data.tasksStore.getNext(t)},getPrev:function(t){return this.$data.tasksStore.getPrev(t)},getParent:function(t){return this.$data.tasksStore.getParent(t)},setParent:function(t,e,i){return this.$data.tasksStore.setParent(t,e,i)},getSiblings:function(t){return this.$data.tasksStore.getSiblings(t).slice()},getNextSibling:function(t){return this.$data.tasksStore.getNextSibling(t)},getPrevSibling:function(t){return this.$data.tasksStore.getPrevSibling(t)},getTaskByIndex:function(t){var e=this.$data.tasksStore.getIdByIndex(t);return this.isTaskExists(e)?this.getTask(e):null},getChildren:function(t){return this.$data.tasksStore.getChildren(t).slice()},hasChild:function(t){return this.$data.tasksStore.hasChild(t)},open:function(t){this.$data.tasksStore.open(t)},close:function(t){this.$data.tasksStore.close(t)},moveTask:function(t,e,i){this.$data.tasksStore.move.apply(this.$data.tasksStore,arguments)},sort:function(t,e,i,n){var r=!n;this.$data.tasksStore.sort(t,e,i),r&&this.render()}}}},function(t,e,i){var n=i(0);t.exports=function(){return{getLinkCount:function(){return this.$data.linksStore.count()},getLink:function(t){return this.$data.linksStore.getItem(t)},getLinks:function(){return this.$data.linksStore.getItems()},isLinkExists:function(t){return this.$data.linksStore.exists(t)},addLink:function(t){return this.$data.linksStore.addItem(t)},updateLink:function(t,e){n.defined(e)||(e=this.getLink(t)),this.$data.linksStore.updateItem(t,e)},deleteLink:function(t){return this.$data.linksStore.removeItem(t)},changeLinkId:function(t,e){return this.$data.linksStore.changeId(t,e)}}}},function(t,e,i){var n=i(16),r=i(0),a=i(2),s=i(15),o=function(t){return this._branches={},this.pull={},this.$initItem=t.initItem,this.$parentProperty=t.parentProperty||"parent",this.$getRootId="function"!=typeof t.rootId?function(t){return function(){return t}}(t.rootId||0):t.rootId,this.$openInitially=t.openInitially,this.visibleOrder=n.$create(),this.fullOrder=n.$create(),this._searchVisibleOrder={},this._skip_refresh=!1,a(this),this.attachEvent("onFilterItem",function(t,e){var i=!0;return this.eachParent(function(t){i=i&&t.$open},e),!!i}),this};o.prototype=r.mixin({_buildTree:function(t){for(var e=null,i=this.$getRootId(),n=0,a=t.length;n<a;n++)this.setParent(e=t[n],this.getParent(e)||i);for(n=0,a=t.length;n<a;n++)this._add_branch(e=t[n]),e.$level=this.calculateItemLevel(e),r.defined(e.$open)||(e.$open=r.defined(e.open)?e.open:this.$openInitially());this._updateOrder()},parse:function(t){this.callEvent("onBeforeParse",[t]);var e=this._parseInner(t);this._buildTree(e),this.filter(),this.callEvent("onParse",[e])},_addItemInner:function(t,e){var i=this.getParent(t);r.defined(i)||(i=this.$getRootId(),this.setParent(t,i));var n=this.getIndexById(i)+Math.min(Math.max(e,0),this.visibleOrder.length);1*n!==n&&(n=void 0),s.prototype._addItemInner.call(this,t,n),this.setParent(t,i),t.hasOwnProperty("$rendered_parent")&&this._move_branch(t,t.$rendered_parent),this._add_branch(t,e)},_changeIdInner:function(t,e){var i=this.getChildren(e);s.prototype._changeIdInner.call(this,t,e);var n=this.getParent(e);this._replace_branch_child(n,t,e);for(var r=0;r<i.length;r++)this.setParent(this.getItem[i[r]],e)},_traverseBranches:function(t,e){e=e||this.$getRootId();var i=this._branches[e];if(i)for(var n=0;n<i.length;n++){var r=i[n];t.call(this,r),this._branches[r]&&this._traverseBranches(t,r)}},_updateOrder:function(t){t&&s.prototype._updateOrder.call(this,t),this.fullOrder=n.$create(),this._traverseBranches(function(t){this.fullOrder.push(t)})},_removeItemInner:function(t){var e=[];this.eachItem(function(t){e.push(t)},t),e.push(this.getItem(t));for(var i=0;i<e.length;i++)this._move_branch(e[i],this.getParent(e[i]),null),s.prototype._removeItemInner.call(this,e[i].id),this._move_branch(e[i],this.getParent(e[i].id),null)},move:function(t,e,i){var n=arguments[3];if(n){if(n===t)return;i=this.getParent(n),e=this.getBranchIndex(n)}if(t!=i){i=i||this.$getRootId();var r=this.getItem(t),a=this.getParent(r.id),s=(this.getChildren(this.getParent(r.id)),this.getChildren(i));if(-1==e&&(e=s.length+1),a==i&&this.getBranchIndex(t)==e)return;if(!1!==this.callEvent("onBeforeItemMove",[t,i,e])){this._replace_branch_child(a,t),(s=this.getChildren(i))[e]?s=s.slice(0,e).concat([t]).concat(s.slice(e)):s.push(t),this.setParent(r,i),this._branches[i]=s;var o=this.calculateItemLevel(r)-r.$level;r.$level+=o,this.eachItem(function(t){t.$level+=o},r.id,this),this._moveInner(this.getIndexById(t),this.getIndexById(i)+e),this.callEvent("onAfterItemMove",[t,i,e])&&this.refresh()}}},getBranchIndex:function(t){for(var e=this.getChildren(this.getParent(t)),i=0;i<e.length;i++)if(e[i]==t)return i;return-1},hasChild:function(t){return r.defined(this._branches[t])&&this._branches[t].length},getChildren:function(t){return r.defined(this._branches[t])?this._branches[t]:n.$create()},isChildOf:function(t,e){if(!this.exists(t))return!1;if(e===this.$getRootId())return!0;for(var i=this.getItem(t),n=this.getParent(t);i&&this.exists(n);){if((i=this.getItem(n))&&i.id==e)return!0;n=this.getParent(i)}return!1},getSiblings:function(t){if(!this.exists(t))return n.$create();var e=this.getParent(t);return this.getChildren(e)},getNextSibling:function(t){for(var e=this.getSiblings(t),i=0,n=e.length;i<n;i++)if(e[i]==t)return e[i+1]||null;return null},getPrevSibling:function(t){for(var e=this.getSiblings(t),i=0,n=e.length;i<n;i++)if(e[i]==t)return e[i-1]||null;return null},getParent:function(t){var e;e=void 0!==t.id?t:this.getItem(t);var i=this.$getRootId();return e&&(i=e[this.$parentProperty]),i},clearAll:function(){this._branches={},s.prototype.clearAll.call(this)},calculateItemLevel:function(t){var e=0;return this.eachParent(function(){e++},t),e},_setParentInner:function(t,e,i){i||(t.hasOwnProperty("$rendered_parent")?this._move_branch(t,t.$rendered_parent,e):this._move_branch(t,t[this.$parentProperty],e))},setParent:function(t,e,i){this._setParentInner(t,e,i),t[this.$parentProperty]=e},eachItem:function(t,e){e=e||this.$getRootId();var i=this.getChildren(e);if(i)for(var n=0;n<i.length;n++){var r=this.pull[i[n]];t.call(this,r),this.hasChild(r.id)&&this.eachItem(t,r.id)}},eachParent:function(t,e){for(var i=e;this.getParent(i)&&this.exists(this.getParent(i));)i=this.getItem(this.getParent(i)),t.call(this,i)},_add_branch:function(t,e,i){var r=void 0===i?this.getParent(t):i;this.hasChild(r)||(this._branches[r]=n.$create());for(var a=this.getChildren(r),s=!1,o=0,l=a.length;o<l;o++)if(a[o]==t.id){s=!0;break}s||(1*e==e?a.splice(e,0,t.id):a.push(t.id),t.$rendered_parent=r)},_move_branch:function(t,e,i){this._replace_branch_child(e,t.id),this.exists(i)||i==this.$getRootId()?this._add_branch(t,void 0,i):delete this._branches[t.id],t.$level=this.calculateItemLevel(t),this.eachItem(function(t){t.$level=this.calculateItemLevel(t)},t.id)},_replace_branch_child:function(t,e,i){var r=this.getChildren(t);if(r){for(var a=n.$create(),s=0;s<r.length;s++)r[s]!=e?a.push(r[s]):i&&a.push(i);this._branches[t]=a}},sort:function(t,e,i){this.exists(i)||(i=this.$getRootId()),t||(t="order");var n="string"==typeof t?function(e,i){return e[t]==i[t]?0:e[t]>i[t]?1:-1}:t;if(e){var r=n;n=function(t,e){return r(e,t)}}var a=this.getChildren(i);if(a){for(var s=[],o=a.length-1;o>=0;o--)s[o]=this.getItem(a[o]);for(s.sort(n),o=0;o<s.length;o++)a[o]=s[o].id,this.sort(t,e,a[o])}},filter:function(t){for(var e in this.pull)this.pull[e].$rendered_parent!==this.getParent(this.pull[e])&&this._move_branch(this.pull[e],this.pull[e].$rendered_parent,this.getParent(this.pull[e]));return s.prototype.filter.apply(this,arguments)},open:function(t){this.exists(t)&&(this.getItem(t).$open=!0,this.callEvent("onItemOpen",[t]))},close:function(t){this.exists(t)&&(this.getItem(t).$open=!1,this.callEvent("onItemClose",[t]))},destructor:function(){s.prototype.destructor.call(this),this._branches=null}},s.prototype),t.exports=o},function(t,e){t.exports=function(){var t=null;return{select:function(e){if(e){if(t==e)return t;if(!this._skip_refresh&&!this.callEvent("onBeforeSelect",[e]))return!1;this.unselect(),t=e,this._skip_refresh||(this.refresh(e),this.callEvent("onAfterSelect",[e]))}return t},getSelectedId:function(){return t},unselect:function(e){(e=e||t)&&(t=null,this._skip_refresh||(this.refresh(e),this.callEvent("onAfterUnselect",[e])))}}}},function(t,e){t.exports={bindDataStore:function(t,e){function i(t){return!!t.$services.getService("state").getState("batchUpdate").batch_update}var n=e.getDatastore(t);n.attachEvent("onStoreUpdated",function(r,a,s){if(!i(e)){var o=e.$services.getService("layers").getDataRender(t);o&&(r&&"move"!=s&&"delete"!=s?(n.callEvent("onBeforeRefreshItem",[a.id]),function(t,e){var i=o.getLayers(),r=n.getItem(t);if(r&&n.isVisible(t))for(var a=0;a<i.length;a++)i[a].render_item(r)}(a.id),n.callEvent("onAfterRefreshItem",[a.id])):(n.callEvent("onBeforeRefreshAll",[]),function(t){for(var e=o.getLayers(),i=0;i<e.length;i++)e[i].clear();var r=n.getVisibleItems();for(i=0;i<e.length;i++)e[i].render_items(r)}(),n.callEvent("onAfterRefreshAll",[])))}}),n.attachEvent("onItemOpen",function(){e.render()}),n.attachEvent("onItemClose",function(){e.render()}),n.attachEvent("onIdChange",function(r,a){i(e)||function(t,e,i,n){for(var r=0;r<t.length;r++)t[r].change_id(e,i)}(e.$services.getService("layers").getDataRender(t).getLayers(),r,a,n.getItem(a))})}}},function(t,e,i){var n=i(64),r=i(3),a=i(6);t.exports=function(t){function e(t,e){function n(i){for(var n=e.updatedRows.slice(),r=!1,a=0;a<n.length&&!e._in_progress[i];a++)n[a]==i&&("inserted"==t.getUserData(i,"!nativeeditor_status")&&(r=!0),e.setUpdated(i,!1));return r}o.push(this.attachEvent("onAfterTaskAdd",function(t,i){e.setGanttMode("tasks"),e.setUpdated(t,!0,"inserted")})),o.push(this.attachEvent("onAfterTaskUpdate",function(i,n){e.setGanttMode("tasks"),e.setUpdated(i,!0),t._sendTaskOrder(i,n)}));var r=i(18),a={};o.push(this.attachEvent("onBeforeTaskDelete",function(e,i){return!t.config.cascade_delete||(a[e]={tasks:r.getSubtreeTasks(t,e),links:r.getSubtreeLinks(t,e)},!0)})),o.push(this.attachEvent("onAfterTaskDelete",function(i,r){if(e.setGanttMode("tasks"),!n(i)){if(t.config.cascade_delete&&a[i]){var s=e.updateMode;e.setUpdateMode("off");var o=a[i];for(var l in o.tasks)n(l)||e.setUpdated(l,!0,"deleted");for(var l in e.setGanttMode("links"),o.links)n(l)||e.setUpdated(l,!0,"deleted");a[i]=null,"off"!=s&&e.sendAllData(),e.setGanttMode("tasks"),e.setUpdateMode(s)}e.setUpdated(i,!0,"deleted"),"off"==e.updateMode||e._tSend||e.sendAllData()}})),o.push(this.attachEvent("onAfterLinkUpdate",function(t,i){e.setGanttMode("links"),e.setUpdated(t,!0)})),o.push(this.attachEvent("onAfterLinkAdd",function(t,i){e.setGanttMode("links"),e.setUpdated(t,!0,"inserted")})),o.push(this.attachEvent("onAfterLinkDelete",function(t,i){e.setGanttMode("links"),!n(t)&&e.setUpdated(t,!0,"deleted")})),o.push(this.attachEvent("onRowDragEnd",function(e,i){t._sendTaskOrder(e,t.getTask(e))}));var s=null,l=null;o.push(this.attachEvent("onTaskIdChange",function(i,n){if(e._waitMode){var r=t.getChildren(n);if(r.length){s=s||{};for(var a=0;a<r.length;a++){var o=this.getTask(r[a]);s[o.id]=o}}var d=function(t){var e=[];return t.$source&&(e=e.concat(t.$source)),t.$target&&(e=e.concat(t.$target)),e}(this.getTask(n));if(d.length)for(l=l||{},a=0;a<d.length;a++){var c=this.getLink(d[a]);l[c.id]=c}}})),e.attachEvent("onAfterUpdateFinish",function(){(s||l)&&(t.batchUpdate(function(){for(var e in s)t.updateTask(s[e].id);for(var e in l)t.updateLink(l[e].id);s=null,l=null}),t._dp.setGanttMode(s?"tasks":"links"))}),e.attachEvent("onBeforeDataSending",function(){var e=this._serverProcessor;if("REST"==this._tMode){var i=this._ganttMode.substr(0,this._ganttMode.length-1);e=e.substring(0,e.indexOf("?")>-1?e.indexOf("?"):e.length),this.serverProcessor=e+("/"==e.slice(-1)?"":"/")+i}else this.serverProcessor=e+t.ajax.urlSeparator(e)+"gantt_mode="+this._ganttMode;return!0})}t.dataProcessor=i(65);var s,o=[];t._dp_init=function(i){t.assert(!this._dp,"The dataProcessor is already attached to this gantt instance"),i.setTransactionMode("POST",!0),i.serverProcessor+=(-1!=i.serverProcessor.indexOf("?")?"&":"?")+"editing=true",i._serverProcessor=i.serverProcessor,i.$gantt=this,i.styles={updated:"gantt_updated",order:"gantt_updated",inserted:"gantt_inserted",deleted:"gantt_deleted",invalid:"gantt_invalid",error:"gantt_error",clear:""},i._methods=["_row_style","setCellTextStyle","_change_id","_delete_task"],(function(t,e){e.setGanttMode=function(t){var i=e.modes||{};e._ganttMode&&(i[e._ganttMode]={_in_progress:e._in_progress,_invalid:e._invalid,updatedRows:e.updatedRows});var n=i[t];n||(n=i[t]={_in_progress:{},_invalid:{},updatedRows:[]}),e._in_progress=n._in_progress,e._invalid=n._invalid,e.updatedRows=n.updatedRows,e.modes=i,e._ganttMode=t},s=e.afterUpdate,e.afterUpdate=function(){var t,i=(3==arguments.length?arguments[1]:arguments[4]).filePath;t="REST"!=this._tMode?-1!=i.indexOf("gantt_mode=links")?"links":"tasks":i.indexOf("/link")>i.indexOf("/task")?"links":"tasks",e.setGanttMode(t);var n=s.apply(e,arguments);return e.setGanttMode(t),n},e._getRowData=t.bind(function(i,n){var a;a="tasks"==e._ganttMode?this.isTaskExists(i)?this.getTask(i):{id:i}:this.isLinkExists(i)?this.getLink(i):{id:i},a=t.copy(a);var s={};for(var o in a)if("$"!=o.substr(0,1)){var l=a[o];s[o]=r.isDate(l)?this.templates.xml_format(l):null===l?"":l}var d=this._get_task_timing_mode(a);return d.$no_start&&(a.start_date="",a.duration=""),d.$no_end&&(a.end_date="",a.duration=""),s[e.action_param]=this.getUserData(i,e.action_param),s},t)}).call(this,t,i),(function(t,e){t._change_id=t.bind(function(t,i){"tasks"!=e._ganttMode?this.changeLinkId(t,i):this.changeTaskId(t,i)},this),t._row_style=function(i,n){"tasks"==e._ganttMode&&t.isTaskExists(i)&&(t.getTask(i).$dataprocessor_class=n,t.refreshTask(i))},t._delete_task=function(t,e){},t._sendTaskOrder=function(t,i){i.$drop_target&&(e.setGanttMode("tasks"),this.getTask(t).target=i.$drop_target,e.setUpdated(t,!0,"order"),delete this.getTask(t).$drop_target)},this._dp=e}).call(this,t,i),e.call(this,t,i),i.attachEvent("onDestroy",function(){!function(t,e){delete e.$gantt,delete e.setGanttMode,delete e._getRowData,e.afterUpdate=s,delete t._dp,delete t._change_id,delete t._row_style,delete t._delete_task,delete t._sendTaskOrder,a.forEach(o,function(e){t.detachEvent(e)}),o=[]}(t,i)}),n(t,i)},t.getUserData=function(t,e){return this.userdata||(this.userdata={}),this.userdata[t]&&this.userdata[t][e]?this.userdata[t][e]:""},t.setUserData=function(t,e,i){this.userdata||(this.userdata={}),this.userdata[t]||(this.userdata[t]={}),this.userdata[t][e]=i}}},function(t,e,i){function n(t,e,i,n){var r=t.data||this.xml._xmlNodeToJSON(t.firstChild),a={add:this.addTask,isExist:this.isTaskExists};"links"==n&&(a.add=this.addLink,a.isExist=this.isLinkExists),a.isExist.call(this,e)||(r.id=e,a.add.call(this,r))}function r(t,e,i,n){var r={delete:this.deleteTask,isExist:this.isTaskExists};"links"==n&&(r.delete=this.deleteLink,r.isExist=this.isLinkExists),r.isExist.call(this,e)&&r.delete.call(this,e)}var a=i(0);t.exports=function(t,e){e.attachEvent("insertCallback",a.bind(n,t)),e.attachEvent("updateCallback",a.bind(r,t)),e.attachEvent("deleteCallback",a.bind(r,t))}},function(t,e,i){var n=i(0),r=i(2),a=function(t){return this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),r(this),this};a.prototype={setTransactionMode:function(t,e){"object"==typeof t?(this._tMode=t.mode||this._tMode,n.defined(t.headers)&&(this._headers=t.headers),n.defined(t.payload)&&(this._payload=t.payload)):(this._tMode=t,this._tSend=e),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"==this._tMode&&(this._tSend=!1,this._endnm=!0,this._headers=this._headers||{},this._headers["Content-type"]="application/json")},escape:function(t){return this._utf?encodeURIComponent(t):escape(t)},enableUTFencoding:function(t){this._utf=!!t},setDataColumns:function(t){this._columns="string"==typeof t?t.split(","):t},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(t){this._endnm=!!t},enablePartialDataSend:function(t){this._changed=!!t},setUpdateMode:function(t,e){this.autoUpdate="cell"==t,this.updateMode=t,this.dnd=e},ignore:function(t,e){this._silent_mode=!0,t.call(e||window),this._silent_mode=!1},setUpdated:function(t,e,i){if(!this._silent_mode){var n=this.findRow(t);i=i||"updated";var r=this.obj.getUserData(t,this.action_param);r&&"updated"==i&&(i=r),e?(this.set_invalid(t,!1),this.updatedRows[n]=t,this.obj.setUserData(t,this.action_param,i),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(n,1),this.obj.setUserData(t,this.action_param,"")),e||this._clearUpdateFlag(t),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}},_clearUpdateFlag:function(t){},markRow:function(t,e,i){var n="",r=this.is_invalid(t);if(r&&(n=this.styles[r],e=!0),this.callEvent("onRowMark",[t,e,i,r])&&(this.obj[this._methods[0]](t,n=this.styles[e?i:"clear"]+n),r&&r.details)){n+=this.styles[r+"_cell"];for(var a=0;a<r.details.length;a++)r.details[a]&&this.obj[this._methods[1]](t,a,n)}},getState:function(t){return this.obj.getUserData(t,this.action_param)},is_invalid:function(t){return this._invalid[t]},set_invalid:function(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e},checkBeforeUpdate:function(t){return!0},sendData:function(t){if(!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2){if(this.obj.editStop&&this.obj.editStop(),void 0===t||this._tSend)return this.sendAllData();if(this._in_progress[t])return!1;if(this.messages=[],!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))return!1;this._beforeSendData(this._getRowData(t),t)}},_beforeSendData:function(t,e){if(!this.callEvent("onBeforeUpdate",[e,this.getState(e),t]))return!1;this._sendData(t,e)},serialize:function(t,e){if("string"==typeof t)return t;if(void 0!==e)return this.serialize_one(t,"");var i=[],n=[];for(var r in t)t.hasOwnProperty(r)&&(i.push(this.serialize_one(t[r],r+this.post_delim)),n.push(r));return i.push("ids="+this.escape(n.join(","))),this.$gantt.security_key&&i.push("dhx_security="+this.$gantt.security_key),i.join("&")},serialize_one:function(t,e){if("string"==typeof t)return t;var i=[];for(var n in t)if(t.hasOwnProperty(n)){if(("id"==n||n==this.action_param)&&"REST"==this._tMode)continue;i.push(this.escape((e||"")+n)+"="+this.escape(t[n]))}return i.join("&")},_applyPayload:function(t){var e=this.$gantt.ajax;if(this._payload)for(var i in this._payload)t=t+e.urlSeparator(t)+this.escape(i)+"="+this.escape(this._payload[i]);return t},_sendData:function(t,e){if(t){if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(new Date).valueOf());var i=this,n=function(n){var r=[];if(e)r.push(e);else if(t)for(var a in t)r.push(a);return i.afterUpdate(i,n,r)},r=this.$gantt.ajax,a=this.serverProcessor+(this._user?r.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),s=this._applyPayload(a);if("GET"==this._tMode)r.query({url:s+r.urlSeparator(s)+this.serialize(t,e),method:"GET",callback:n,headers:this._headers});else if("POST"==this._tMode)r.query({url:s,method:"POST",headers:this._headers,data:this.serialize(t,e),callback:n});else if("JSON"==this._tMode){var o=t[this.action_param],l={};for(var d in t)l[d]=t[d];delete l[this.action_param],delete l.id,delete l.gr_id,r.query({url:s,method:"POST",headers:this._headers,callback:n,data:JSON.stringify({id:e,action:o,data:l})})}else if("REST"==this._tMode){var c=this.getState(e),h=a.replace(/(\&|\?)editing\=true/,""),u=(l="","post");"inserted"==c?l=this.serialize(t,e):"deleted"==c?(u="DELETE",h=h+("/"==h.slice(-1)?"":"/")+e):(u="PUT",l=this.serialize(t,e),h=h+("/"==h.slice(-1)?"":"/")+e),h=this._applyPayload(h),r.query({url:h,method:u,headers:this._headers,data:l,callback:n})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var t=!0,e=0;e<this.updatedRows.length;e++)t&=this.checkBeforeUpdate(this.updatedRows[e]);if(!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(e=0;e<this.updatedRows.length;e++)if(!this._in_progress[this.updatedRows[e]]){if(this.is_invalid(this.updatedRows[e]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[e]),this.updatedRows[e]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(t){for(var e={},i=!1,n=0;n<this.updatedRows.length;n++){var r=this.updatedRows[n];if(!this._in_progress[r]&&!this.is_invalid(r)){var a=this._getRowData(r);this.callEvent("onBeforeUpdate",[r,this.getState(r),a])&&(e[r]=a,i=!0,this._in_progress[r]=(new Date).valueOf())}}return i?e:null},setVerificator:function(t,e){this.mandatoryFields[t]=e||function(t){return""!==t}},clearVerificator:function(t){this.mandatoryFields[t]=!1},findRow:function(t){var e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e},defineAction:function(t,e){this._uActions||(this._uActions=[]),this._uActions[t]=e},afterUpdateCallback:function(t,e,i,n){var r=t,a="error"!=i&&"invalid"!=i;if(a||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](n))return delete this._in_progress[r];"wait"!=this._in_progress[r]&&this.setUpdated(t,!1);var s=t;switch(i){case"inserted":case"insert":e!=t&&(this.setUpdated(t,!1),this.obj[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":return this.obj.setUserData(t,this.action_param,"true_deleted"),this.obj[this._methods[3]](t),delete this._in_progress[r],this.callEvent("onAfterUpdate",[t,i,e,n])}"wait"!=this._in_progress[r]?(a&&this.obj.setUserData(t,this.action_param,""),delete this._in_progress[r]):(delete this._in_progress[r],this.setUpdated(e,!0,this.obj.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[s,i,e,n])},afterUpdate:function(t,e,i){var n=this.$gantt.ajax;if(window.JSON){var r;try{r=JSON.parse(e.xmlDoc.responseText)}catch(t){e.xmlDoc.responseText.length||(r={})}if(r){var a=r.action||this.getState(i)||"updated";return t.afterUpdateCallback(c=r.sid||i[0],h=r.tid||i[0],a,r),void t.finalizeUpdate()}}var s=n.xmltop("data",e.xmlDoc);if(!s)return this.cleanUpdate(i);var o=n.xpath("//data/action",s);if(!o.length)return this.cleanUpdate(i);for(var l=0;l<o.length;l++){var d=o[l],c=(a=d.getAttribute("type"),d.getAttribute("sid")),h=d.getAttribute("tid");t.afterUpdateCallback(c,h,a,d)}t.finalizeUpdate()},cleanUpdate:function(t){if(t)for(var e=0;e<t.length;e++)delete this._in_progress[t[e]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(t){this.obj=t,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(t){this.attachEvent("onAfterUpdate",t)},enableDebug:function(t){},setOnBeforeUpdateHandler:function(t){this.attachEvent("onBeforeDataSending",t)},setAutoUpdate:function(t,e){t=t||2e3,this._user=e||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(t,e,i,n){this.afterAutoUpdate(t,e,i,n)}),this.attachEvent("onFullSync",function(){this.fullSync()});var i=this;window.setInterval(function(){i.loadUpdate()},t)},afterAutoUpdate:function(t,e,i,n){return"collision"!=e||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(t,e){var i=this.$gantt.ajax;if(this._update_busy)return!1;this._update_busy=!0,i.get(t,e)},_v:function(t){return t.firstChild?t.firstChild.nodeValue:""},_a:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=this._v(t[i]);return e},loadUpdate:function(){var t=this.$gantt.ajax,e=this,i=this.obj.getUserData(0,"version"),n=this.serverProcessor+t.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+i].join("&");n=n.replace("editing=true&",""),this.getUpdates(n,function(i){var n=t.xpath("//userdata",i);e.obj.setUserData(0,"version",e._v(n[0]));var r=t.xpath("//update",i);if(r.length){e._silent_mode=!0;for(var a=0;a<r.length;a++){var s=r[a].getAttribute("status"),o=r[a].getAttribute("id"),l=r[a].getAttribute("parent");switch(s){case"inserted":e.callEvent("insertCallback",[r[a],o,l]);break;case"updated":e.callEvent("updateCallback",[r[a],o,l]);break;case"deleted":e.callEvent("deleteCallback",[r[a],o,l])}}e._silent_mode=!1}e._update_busy=!1,e=null})},destructor:function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._headers=null,this._payload=null,this.obj=null}},t.exports=a},function(t,e,i){t.exports=function(t){for(var e=[i(67),i(68),i(69),i(70),i(71),i(72)],n=0;n<e.length;n++)e[n]&&e[n](t)}},function(t,e,i){var n=i(1);t.exports=function(t){function e(){var e=!!document.querySelector(".gantt_drag_marker"),i=!!document.querySelector(".gantt_drag_marker.gantt_grid_resize_area"),n=!!document.querySelector(".gantt_link_direction");return _=e&&!i&&!n,!(!t.getState().drag_mode&&!e||i)}function i(e){if(f&&(clearTimeout(f),f=null),e){var i=t.config.autoscroll_speed;i&&i<10&&(i=10),f=setTimeout(function(){u=setInterval(s,i||h),n.getNodePosition(t.$task)},t.config.autoscroll_delay||c)}}function r(t){t?(i(!0),g.started||(g.x=p.x,g.y=p.y,g.started=!0)):(u&&(clearInterval(u),u=null),i(!1),g.started=!1)}function a(i){var n=e();if(!u&&!f||n||r(!1),!t.config.autoscroll||!n)return!1;p={x:i.clientX,y:i.clientY},!u&&n&&r(!0)}function s(){if(!e())return r(!1),!1;var i=n.getNodePosition(t.$task),a=p.y-i.y,s=_?0:o(p.x-i.x,i.width,g.x-i.x),l=o(a,i.height,g.y-i.y),c=t.getScrollState(),h=c.y,u=c.inner_height,f=c.x,v=c.inner_width;l&&!u?l=0:l<0&&!h?l=0:l>0&&h+u>=c.height+2&&(l=0),s&&!v?s=0:s<0&&!f?s=0:s>0&&f+v>=c.width&&(s=0);var m=t.config.autoscroll_step;m&&m<2&&(m=2),s*=m||d,l*=m||d,(s||l)&&function(e,i){var n=t.getScrollState(),r=null,a=null;e&&(r=n.x+e,r=Math.min(n.width,r),r=Math.max(0,r)),i&&(a=n.y+i,a=Math.min(n.height,a),a=Math.max(0,a)),t.scrollTo(r,a)}(s,l)}function o(t,e,i){return t-l<0&&t<i?-1:t>e-l&&t>i?1:0}var l=50,d=30,c=10,h=50,u=null,_=!1,f=null,g={started:!1},p={};t.attachEvent("onGanttReady",function(){t.eventRemove(document.body,"mousemove",a),t.event(document.body,"mousemove",a)})}},function(t,e){t.exports=function(t){t.batchUpdate=function(t){function e(t,e){e="function"==typeof e?e:function(){},s[t]||(s[t]=this[t],this[t]=e)}function i(t){s[t]&&(this[t]=s[t],s[t]=null)}function n(t){for(var i in t)e.call(this,i,t[i])}function r(){for(var t in s)i.call(this,t)}function a(t){try{t()}catch(t){window.console.error(t)}}var s={},o=!1;return t.$services.getService("state").registerProvider("batchUpdate",function(){return{batch_update:o}},!0),function(t,e){if(o)a(t);else{var i,s=this._dp&&"off"!=this._dp.updateMode;s&&(i=this._dp.updateMode,this._dp.setUpdateMode("off"));var l={},d={render:!0,refreshData:!0,refreshTask:!0,refreshLink:!0,resetProjectDates:function(t){l[t.id]=t}};for(var c in n.call(this,d),o=!0,this.callEvent("onBeforeBatchUpdate",[]),a(t),this.callEvent("onAfterBatchUpdate",[]),r.call(this),l)this.resetProjectDates(l[c]);o=!1,e||this.render(),s&&(this._dp.setUpdateMode(i),this._dp.setGanttMode("tasks"),this._dp.sendData(),this._dp.setGanttMode("links"),this._dp.sendData())}}}(t)}},function(t,e){t.exports=function(t){var e=function(t){return{_needRecalc:!0,reset:function(){this._needRecalc=!0},_isRecalcNeeded:function(){return!this._isGroupSort()&&this._needRecalc},_isGroupSort:function(){return!(!t._groups||!t._groups.is_active())},_getWBSCode:function(t){return t?(this._isRecalcNeeded()&&this._calcWBS(),t.$virtual?"":this._isGroupSort()?t.$wbs||"":(t.$wbs||(this.reset(),this._calcWBS()),t.$wbs)):""},_setWBSCode:function(t,e){t.$wbs=e},getWBSCode:function(t){return this._getWBSCode(t)},_calcWBS:function(){if(this._isRecalcNeeded()){var e=!0;t.eachTask(function(i){if(e)return e=!1,void this._setWBSCode(i,"1");var n=t.getPrevSibling(i.id);if(null!==n){var r=t.getTask(n).$wbs;r&&((r=r.split("."))[r.length-1]++,this._setWBSCode(i,r.join(".")))}else{var a=t.getParent(i.id);this._setWBSCode(i,t.getTask(a).$wbs+".1")}},t.config.root_id,this),this._needRecalc=!1}}}}(t);t.getWBSCode=function(t){return e.getWBSCode(t)},t.attachEvent("onAfterTaskMove",function(){return e.reset(),!0}),t.attachEvent("onBeforeParse",function(){return e.reset(),!0}),t.attachEvent("onAfterTaskDelete",function(){return e.reset(),!0}),t.attachEvent("onAfterTaskAdd",function(){return e.reset(),!0})}},function(t,e){window.jQuery&&function(t){var e=[];t.fn.dhx_gantt=function(i){if("string"!=typeof(i=i||{})){var n=[];return this.each(function(){if(this&&this.getAttribute)if(this.gantt||window.gantt.$root==this)n.push("object"==typeof this.gantt?this.gantt:window.gantt);else{var t=window.gantt.$container&&window.Gantt?window.Gantt.getGanttInstance():window.gantt;for(var e in i)"data"!=e&&(t.config[e]=i[e]);t.init(this),i.data&&t.parse(i.data),n.push(t)}}),1===n.length?n[0]:n}if(e[i])return e[i].apply(this,[]);t.error("Method "+i+" does not exist on jQuery.dhx_gantt")}}(jQuery),t.exports=null},function(t,e){window.dhtmlx&&(dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachGantt=function(t,e,i){var n=document.createElement("DIV");i=i||window.gantt,n.id="gantt_"+i.uid(),n.style.width="100%",n.style.height="100%",n.cmp="grid",document.body.appendChild(n),this.attachObject(n.id),this.dataType="gantt",this.dataObj=i;var r=this.vs[this.av];return r.grid=i,i.init(n.id,t,e),n.firstChild.style.border="none",r.gridId=n.id,r.gridObj=n,this.vs[this._viewRestore()].grid}),void 0!==window.dhtmlXCellObject&&(dhtmlXCellObject.prototype.attachGantt=function(t,e,i){i=i||window.gantt;var n=document.createElement("DIV");return n.id="gantt_"+i.uid(),n.style.width="100%",n.style.height="100%",n.cmp="grid",document.body.appendChild(n),this.attachObject(n.id),this.dataType="gantt",this.dataObj=i,i.init(n.id,t,e),n.firstChild.style.border="none",n=null,this.callEvent("_onContentAttach",[]),this.dataObj}),t.exports=null},function(t,e){t.exports=function(t){var e=function(t){function e(t,e){return"function"==typeof t?i(t):e instanceof Array?n(t,e):n(t,[e])}function i(e){var i=[];return t.eachTask(function(t){e(t)&&i.push(t)}),i}function n(e,i){for(var n,r=i.join("_")+"_"+e,a={},o=0;o<i.length;o++)a[i[o]]=!0;return s[r]?n=s[r]:(n=s[r]=[],t.eachTask(function(i){a[i[e]]&&i.type!=t.config.types.project&&n.push(i)})),n}function r(t,e,i){var n=[t,e,i.unit,i.step].join("_");return s[n]?s[n]:s[n]=a(t,e,i)}function a(i,n,r){for(var a=e(i,n),s=r.unit,o={},l=0;l<a.length;l++)for(var d=a[l],c=t.date[s+"_start"](new Date(d.start_date));c<d.end_date;){var h=c;if(c=t.date.add(c,1,s),t.isWorkTime({date:h,task:d})){var u=h.valueOf();o[u]||(o[u]={tasks:[]}),o[u].tasks.push(d)}}var _,f,g=[];for(var l in o)_=new Date(1*l),f=t.date.add(_,1,s),g.push({start_date:_,end_date:f,tasks:o[l].tasks});return g}var s={};return t.$data.tasksStore.attachEvent("onStoreUpdated",function(){s={}}),{renderLine:function(t,e){for(var i=e.$getConfig(),n=e.$getTemplates(),a=r(i.resource_property,t.id,e.getScale()),s=[],o=0;o<a.length;o++){var l=a[o],d=n.resource_cell_class(l.start_date,l.end_date,t,l.tasks),c=n.resource_cell_value(l.start_date,l.end_date,t,l.tasks);if(d||c){var h=e.getItemPosition(t,l.start_date,l.end_date),u=document.createElement("div");u.className=["gantt_resource_marker",d].join(" "),u.style.cssText=["left:"+h.left+"px","width:"+h.width+"px","height:"+(i.row_height-1)+"px","line-height:"+(i.row_height-1)+"px","top:"+h.top+"px"].join(";"),c&&(u.innerHTML=c),s.push(u)}}var _=null;if(s.length)for(_=document.createElement("div"),o=0;o<s.length;o++)_.appendChild(s[o]);return _},filterTasks:e}}(t);t.getTaskBy=e.filterTasks,t.$ui.layers.resourceRow=e.renderLine,t.config.resource_property="owner_id",t.config.resource_store="resource",t.templates.resource_cell_class=function(t,e,i,n){return n.length<=1?"gantt_resource_marker_ok":"gantt_resource_marker_overtime"},t.templates.resource_cell_value=function(t,e,i,n){return 8*n.length}}},function(t,e){t.exports=function(t){}},function(t,e){t.exports=function(t){t.getGridColumn=function(e){for(var i=t.config.columns,n=0;n<i.length;n++)if(i[n].name==e)return i[n];return null}}},function(t,e){t.exports=function(t){function e(t){return(t+"").replace(r," ").replace(a," ")}function i(t){return(t+"").replace(s,"&#39;")}function n(){return!t.config.wai_aria_attributes}var r=new RegExp("<(?:.|\n)*?>","gm"),a=new RegExp(" +","gm"),s=new RegExp("'","gm");for(var o in t._waiAria={getAttributeString:function(t){var n=[" "];for(var r in t){var a=i(e(t[r]));n.push(r+"='"+a+"'")}return n.push(" "),n.join(" ")},getTimelineCellAttr:function(e){return t._waiAria.getAttributeString({"aria-label":e})},_taskCommonAttr:function(i,n){i.start_date&&i.end_date&&(n.setAttribute("aria-label",e(t.templates.tooltip_text(i.start_date,i.end_date,i))),t.isReadonly(i)&&n.setAttribute("aria-readonly",!0),i.$dataprocessor_class&&n.setAttribute("aria-busy",!0),n.setAttribute("aria-selected",t.getState().selected_task==i.id||t.isSelectedTask&&t.isSelectedTask(i.id)?"true":"false"))},setTaskBarAttr:function(e,i){this._taskCommonAttr(e,i),!t.isReadonly(e)&&t.config.drag_move&&(e.id!=t.getState().drag_id?i.setAttribute("aria-grabbed",!1):i.setAttribute("aria-grabbed",!0))},taskRowAttr:function(e,i){this._taskCommonAttr(e,i),!t.isReadonly(e)&&t.config.order_branch&&i.setAttribute("aria-grabbed",!1),i.setAttribute("role","row"),i.setAttribute("aria-level",e.$level),t.hasChild(e.id)&&i.setAttribute("aria-expanded",e.$open?"true":"false")},linkAttr:function(i,n){var r=t.config.links,a=t.locale.labels.link+" "+t.templates.drag_link(i.source,i.type==r.start_to_start||i.type==r.start_to_finish,i.target,i.type==r.finish_to_start||i.type==r.start_to_start);n.setAttribute("aria-label",e(a)),t.isReadonly(i)&&n.setAttribute("aria-readonly",!0)},gridSeparatorAttr:function(t){t.setAttribute("role","separator")},lightboxHiddenAttr:function(t){t.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},lightboxAttr:function(t){t.setAttribute("role","dialog"),t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":t.locale.labels[e],tabindex:"0"})},lightboxHeader:function(t,e){t.setAttribute("aria-label",e)},lightboxSelectAttrString:function(e){var i="";switch(e){case"%Y":i=t.locale.labels.years;break;case"%m":i=t.locale.labels.months;break;case"%d":i=t.locale.labels.days;break;case"%H:%i":i=t.locale.labels.hours+t.locale.labels.minutes}return t._waiAria.getAttributeString({"aria-label":i})},lightboxDurationInputAttrString:function(e){return this.getAttributeString({"aria-label":t.locale.labels.column_duration,"aria-valuemin":"0"})},gridAttrString:function(){return[" role='treegrid'",t.config.multiselect?"aria-multiselectable='true'":"aria-multiselectable='false'"," "].join(" ")},gridScaleRowAttrString:function(){return"role='row'"},gridScaleCellAttrString:function(e,i){var n="";if("add"==e.name)n=this.getAttributeString({role:"button","aria-label":t.locale.labels.new_task});else{var r={role:"columnheader","aria-label":i};t._sort&&t._sort.name==e.name&&(r["aria-sort"]="asc"==t._sort.direction?"ascending":"descending"),n=this.getAttributeString(r)}return n},gridDataAttrString:function(){return"role='rowgroup'"},gridCellAttrString:function(t,e){return this.getAttributeString({role:"gridcell","aria-label":e})},gridAddButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":t.locale.labels.new_task})},messageButtonAttrString:function(t){return"tabindex='0' role='button' aria-label='"+t+"'"},messageInfoAttr:function(t){t.setAttribute("role","alert")},messageModalAttr:function(t,e){t.setAttribute("role","dialog"),e&&t.setAttribute("aria-labelledby",e)},quickInfoAttr:function(t){t.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(t,e){t.setAttribute("aria-label",e)},quickInfoButtonAttrString:function(e){return t._waiAria.getAttributeString({role:"button","aria-label":e,tabindex:"0"})},tooltipAttr:function(t){t.setAttribute("role","tooltip")},tooltipVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(t){t.setAttribute("aria-hidden","true")}},t._waiAria)t._waiAria[o]=function(t){return function(){return n()?"":t.apply(this,arguments)}}(t._waiAria[o])}},function(t,e){t.exports=function(t){t.isReadonly=function(t){return(!t||!t[this.config.editable_property])&&(t&&t[this.config.readonly_property]||this.config.readonly)}}},function(t,e,i){var n=(i(0),i(3));t.exports=function(t){t.load=function(e,i,n){this._load_url=e,this.assert(arguments.length,"Invalid load arguments");var r="json",a=null;arguments.length>=3?(r=i,a=n):"string"==typeof arguments[1]?r=arguments[1]:"function"==typeof arguments[1]&&(a=arguments[1]),this._load_type=r,this.callEvent("onLoadStart",[e,r]),this.ajax.get(e,t.bind(function(t){this.on_load(t,r),this.callEvent("onLoadEnd",[e,r]),"function"==typeof a&&a.call(this)},this))},t.parse=function(t,e){this.on_load({xmlDoc:{responseText:t}},e)},t.serialize=function(t){return this[t=t||"json"].serialize()},t.on_load=function(t,e){this.callEvent("onBeforeParse",[]),e||(e="json"),this.assert(this[e],"Invalid data type:'"+e+"'");var i=this[e].parse(t.xmlDoc.responseText,t);this._process_loading(i)},t._process_loading=function(t){if(t.collections&&this._load_collections(t.collections),this.$data.tasksStore.parse(t.data),this.$data.linksStore.parse(t.links||(t.collections?t.collections.links:[])),this.callEvent("onParse",[]),this.render(),this.config.initial_scroll){var e=this.getTaskByIndex(0),i=e?e.id:this.config.root_id;this.isTaskExists(i)&&this.showTask(i)}},t._load_collections=function(t){var e=!1;for(var i in t)if(t.hasOwnProperty(i)){e=!0;var n=t[i],r=this.serverList[i];if(!r)continue;r.splice(0,r.length);for(var a=0;a<n.length;a++){var s=n[a],o=this.copy(s);for(var l in o.key=o.value,s)if(s.hasOwnProperty(l)){if("value"==l||"label"==l)continue;o[l]=s[l]}r.push(o)}}e&&this.callEvent("onOptionsLoad",[])},t.attachEvent("onBeforeTaskDisplay",function(t,e){return!e.$ignore}),t.json={parse:function(e){return t.assert(e,"Invalid data"),"string"==typeof e&&(window.JSON?e=JSON.parse(e):t.assert(!1,"JSON is not supported")),e.dhx_security&&(t.security_key=e.dhx_security),e},serializeTask:function(t){return this._copyObject(t)},serializeLink:function(t){return this._copyLink(t)},_copyLink:function(t){var e={};for(var i in t)e[i]=t[i];return e},_copyObject:function(e){var i={};for(var r in e)"$"!=r.charAt(0)&&(i[r]=e[r],n.isDate(i[r])&&(i[r]=t.templates.xml_format(i[r])));return i},serialize:function(){var e=[],i=[];t.eachTask(function(i){t.resetProjectDates(i),e.push(this.serializeTask(i))},t.config.root_id,this);for(var n=t.getLinks(),r=0;r<n.length;r++)i.push(this.serializeLink(n[r]));return{data:e,links:i}}},t.xml={_xmlNodeToJSON:function(t,e){for(var i={},n=0;n<t.attributes.length;n++)i[t.attributes[n].name]=t.attributes[n].value;if(!e){for(n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];1==r.nodeType&&(i[r.tagName]=r.firstChild?r.firstChild.nodeValue:"")}i.text||(i.text=t.firstChild?t.firstChild.nodeValue:"")}return i},_getCollections:function(e){for(var i={},n=t.ajax.xpath("//coll_options",e),r=0;r<n.length;r++)for(var a=i[n[r].getAttribute("for")]=[],s=t.ajax.xpath(".//item",n[r]),o=0;o<s.length;o++){for(var l=s[o].attributes,d={key:s[o].getAttribute("value"),label:s[o].getAttribute("label")},c=0;c<l.length;c++){var h=l[c];"value"!=h.nodeName&&"label"!=h.nodeName&&(d[h.nodeName]=h.nodeValue)}a.push(d)}return i},_getXML:function(e,i,n){n=n||"data",i.getXMLTopNode||(i=t.ajax.parse(i));var r=t.ajax.xmltop(n,i.xmlDoc);if(!r||r.tagName!=n)throw"Invalid XML data";var a=r.getAttribute("dhx_security");return a&&(t.security_key=a),r},parse:function(e,i){i=this._getXML(e,i);for(var n={},r=n.data=[],a=t.ajax.xpath("//task",i),s=0;s<a.length;s++)r[s]=this._xmlNodeToJSON(a[s]);return n.collections=this._getCollections(i),n},_copyLink:function(t){return"<item id='"+t.id+"' source='"+t.source+"' target='"+t.target+"' type='"+t.type+"' />"},_copyObject:function(t){return"<task id='"+t.id+"' parent='"+(t.parent||"")+"' start_date='"+t.start_date+"' duration='"+t.duration+"' open='"+!!t.open+"' progress='"+t.progress+"' end_date='"+t.end_date+"'><![CDATA["+t.text+"]]></task>"},serialize:function(){for(var e=[],i=[],n=t.json.serialize(),r=0,a=n.data.length;r<a;r++)e.push(this._copyObject(n.data[r]));for(r=0,a=n.links.length;r<a;r++)i.push(this._copyLink(n.links[r]));return"<data>"+e.join("")+"<coll_options for='links'>"+i.join("")+"</coll_options></data>"}},t.oldxml={parse:function(e,i){i=t.xml._getXML(e,i,"projects");for(var n={collections:{links:[]}},r=n.data=[],a=t.ajax.xpath("//task",i),s=0;s<a.length;s++){r[s]=t.xml._xmlNodeToJSON(a[s]);var o=a[s].parentNode;r[s].parent="project"==o.tagName?"project-"+o.getAttribute("id"):o.parentNode.getAttribute("id")}for(a=t.ajax.xpath("//project",i),s=0;s<a.length;s++)(l=t.xml._xmlNodeToJSON(a[s],!0)).id="project-"+l.id,r.push(l);for(s=0;s<r.length;s++){var l;(l=r[s]).start_date=l.startdate||l.est,l.end_date=l.enddate,l.text=l.name,l.duration=l.duration/8,l.open=1,l.duration||l.end_date||(l.duration=1),l.predecessortasks&&n.collections.links.push({target:l.id,source:l.predecessortasks,type:t.config.links.finish_to_start})}return n},serialize:function(){t.message("Serialization to 'old XML' is not implemented")}},t.serverList=function(t,e){return e?this.serverList[t]=e.slice(0):this.serverList[t]||(this.serverList[t]=[]),this.serverList[t]}}},function(t,e,i){var n=i(79),r=i(82),a=i(84),s=i(0);t.exports=function(t){var e=new n(t),i=new r(e),o=a.create(e,i);s.mixin(t,o)}},function(t,e,i){function n(t){this.$gantt=t,this._calendars={}}var r=i(0),a=i(19),s=i(80);n.prototype={_calendars:{},_getDayHoursForMultiple:function(t,e){for(var i=[],n=!0,r=0,a=this.$gantt.date.day_start(new Date(e)),s=0;s<24;s++)t.reduce(function(t,e){return t&&e._is_work_hour(a)},!0)?(n?(i[r]=s,i[r+1]=s+1,r+=2):i[r-1]+=1,n=!1):n||(n=!0),a=this.$gantt.date.add(a,1,"hour");return i.length||(i=!1),i},mergeCalendars:function(){var t,e=this.createCalendar(),i=[],n=Array.prototype.slice.call(arguments,0);e.worktime.hours=[0,24],e.worktime.dates={};var r=this.$gantt.date.day_start(new Date(2592e5));for(t=0;t<7;t++)i=this._getDayHoursForMultiple(n,r),e.worktime.dates[t]=i,r=this.$gantt.date.add(r,1,"day");for(var a=0;a<n.length;a++)for(var s in n[a].worktime.dates)+s>1e4&&(i=this._getDayHoursForMultiple(n,new Date(+s)),e.worktime.dates[s]=i);return e},_convertWorktimeSettings:function(t){var e=t.days;if(e){t.dates=t.dates||{};for(var i=0;i<e.length;i++)t.dates[i]=e[i],e[i]instanceof Array||(t.dates[i]=!!e[i]);delete t.days}return t},createCalendar:function(t){var e;t||(t={}),e=r.copy(t.worktime?t.worktime:t);var i=r.copy(this.defaults.fulltime.worktime);r.mixin(e,i);var n={id:r.uid()+"",worktime:this._convertWorktimeSettings(e)},o=new s(this.$gantt,a(this.$gantt));return r.mixin(o,n),o._tryChangeCalendarSettings(function(){})?o:null},getCalendar:function(t){return t=t||"global",this.createDefaultCalendars(),this._calendars[t]},getCalendars:function(){var t=[];for(var e in this._calendars)t.push(this.getCalendar(e));return t},getTaskCalendar:function(t){var e=this.$gantt.$services.config();if(!t)return this.getCalendar();if(t[e.calendar_property])return this.getCalendar(t[e.calendar_property]);if(e.resource_calendars)for(var i in e.resource_calendars)if(t[i]){var n=e.resource_calendars[i][t[i]];if(n)return this.getCalendar(n)}return this.getCalendar()},addCalendar:function(t){if(!(t instanceof s)){var e=t.id;(t=this.createCalendar(t)).id=e}var i=this.$gantt.$services.config();return t.id=t.id||r.uid(),this._calendars[t.id]=t,i.worktimes||(i.worktimes={}),i.worktimes[t.id]=t.worktime,t.id},deleteCalendar:function(t){var e=this.$gantt.$services.config();return!!t&&!!this._calendars[t]&&(delete this._calendars[t],e.worktimes&&e.worktimes[t]&&delete e.worktimes[t],!0)},restoreConfigCalendars:function(t){for(var e in t)if(!this._calendars[e]){var i=this.createCalendar(t[e]);i.id=e,this.addCalendar(i)}},defaults:{global:{id:"global",worktime:{hours:[8,17],days:[0,1,1,1,1,1,0]}},fulltime:{id:"fulltime",worktime:{hours:[0,24],days:[1,1,1,1,1,1,1]}}},createDefaultCalendars:function(){var t=this.$gantt.$services.config();this.restoreConfigCalendars(this.defaults),this.restoreConfigCalendars(t.worktimes)}},t.exports=n},function(t,e,i){function n(t,e){this.argumentsHelper=e,this.$gantt=t,this._workingUnitsCache=new r}var r=i(81),a=i(0);n.prototype={units:["year","month","week","day","hour","minute"],_getUnitOrder:function(t){for(var e=0,i=this.units.length;e<i;e++)if(this.units[e]==t)return e},_timestamp:function(t){var e=null;return t.day||0===t.day?e=t.day:t.date&&(e=Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate())),e},_checkIfWorkingUnit:function(t,e,i){return void 0===i&&(i=this._getUnitOrder(e)),void 0===i||!(i&&!this._isWorkTime(t,this.units[i-1],i-1))&&(!this["_is_work_"+e]||this["_is_work_"+e](t))},_is_work_day:function(t){var e=this._getWorkHours(t);return e instanceof Array&&e.length>0},_is_work_hour:function(t){for(var e=this._getWorkHours(t),i=t.getHours(),n=0;n<e.length;n+=2){if(void 0===e[n+1])return e[n]==i;if(i>=e[n]&&i<e[n+1])return!0}return!1},_internDatesPull:{},_nextDate:function(t,e,i){return this.$gantt.date.add(t,i,e)},_getWorkUnitsBetweenGeneric:function(t,e,i,n){var r=this.$gantt.date,a=new Date(t),s=new Date(e);n=n||1;var o,l,d=0,c=null,h=!1;(o=r[i+"_start"](new Date(a))).valueOf()!=a.valueOf()&&(h=!0);var u=!1;(l=r[i+"_start"](new Date(e))).valueOf()!=e.valueOf()&&(u=!0);for(var _=!1;a.valueOf()<s.valueOf();)_=(c=this._nextDate(a,i,n)).valueOf()>s.valueOf(),this._isWorkTime(a,i)&&((h||u&&_)&&(o=r[i+"_start"](new Date(a)),l=r.add(o,n,i)),h?(h=!1,c=this._nextDate(o,i,n),d+=(l.valueOf()-a.valueOf())/(l.valueOf()-o.valueOf())):u&&_?(u=!1,d+=(s.valueOf()-a.valueOf())/(l.valueOf()-o.valueOf())):d++),a=c;return d},_getHoursPerDay:function(t){for(var e=this._getWorkHours(t),i=0,n=0;n<e.length;n+=2)i+=e[n+1]-e[n]||0;return i},_getWorkHoursForRange:function(t,e){for(var i=0,n=new Date(t),r=new Date(e);n.valueOf()<r.valueOf();)this._isWorkTime(n,"day")&&(i+=this._getHoursPerDay(n)),n=this._nextDate(n,"day",1);return i},_getWorkUnitsBetweenHours:function(t,e,i,n){var r=new Date(t),a=new Date(e);n=n||1;var s=new Date(r),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(r)),1,"day");if(a.valueOf()<=o.valueOf())return this._getWorkUnitsBetweenGeneric(t,e,i,n);var l=this.$gantt.date.day_start(new Date(a)),d=a,c=this._getWorkUnitsBetweenGeneric(s,o,i,n),h=this._getWorkUnitsBetweenGeneric(l,d,i,n);return this._getWorkHoursForRange(o,l)/n+c+h},_getCalendar:function(){return this.worktime},_setCalendar:function(t){this.worktime=t},_tryChangeCalendarSettings:function(t){var e=JSON.stringify(this._getCalendar());return t(),!this._isEmptyCalendar(this._getCalendar())||(this.$gantt.assert(!1,"Invalid calendar settings, no worktime available"),this._setCalendar(JSON.parse(e)),this._workingUnitsCache.clear(),!1)},_isEmptyCalendar:function(t){var e=!1,i=[],n=!0;for(var r in t.dates)e|=!!t.dates[r],i.push(r);var a=[];for(r=0;r<i.length;r++)i[r]<10&&a.push(i[r]);for(a.sort(),r=0;r<7;r++)a[r]!=r&&(n=!1);return n?!e:!(e||t.hours)},getWorkHours:function(){var t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments);return this._getWorkHours(t.date)},_getWorkHours:function(t){var e=this._timestamp({date:t}),i=!0,n=this._getCalendar();return void 0!==n.dates[e]?i=n.dates[e]:void 0!==n.dates[t.getDay()]&&(i=n.dates[t.getDay()]),!0===i?n.hours:i||[]},setWorkTime:function(t){return this._tryChangeCalendarSettings(a.bind(function(){var e=void 0===t.hours||t.hours,i=this._timestamp(t);null!==i?this._getCalendar().dates[i]=e:this._getCalendar().hours=e,this._workingUnitsCache.clear()},this))},unsetWorkTime:function(t){return this._tryChangeCalendarSettings(a.bind(function(){if(t){var e=this._timestamp(t);null!==e&&delete this._getCalendar().dates[e]}else this.reset_calendar();this._workingUnitsCache.clear()},this))},_isWorkTime:function(t,e,i){var n=this._workingUnitsCache.get(e,t);return-1==n&&(n=this._checkIfWorkingUnit(t,e,i),this._workingUnitsCache.put(e,t,n)),n},isWorkTime:function(){var t=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._isWorkTime(t.date,t.unit)},calculateDuration:function(){var t,e=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return!!e.unit&&(t="hour"==e.unit?this._getWorkUnitsBetweenHours(e.start_date,e.end_date,e.unit,e.step):this._getWorkUnitsBetweenGeneric(e.start_date,e.end_date,e.unit,e.step),Math.round(t))},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.end_date,n=t.unit,r=t.step;if(!n)return!1;var a=new Date(e),s=new Date(i);for(r=r||1;a.valueOf()<s.valueOf();){if(this._isWorkTime(a,n))return!0;a=this._nextDate(a,n,r)}return!1},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments);return this._calculateEndDate(t.start_date,t.duration,t.unit,t.step*(t.duration>=0?1:-1))},_calculateEndDate:function(t,e,i,n){if(!i)return!1;var r=new Date(t),a=0;for(n=n||1,e=Math.abs(1*e);a<e;){var s=this._nextDate(r,i,n);this._isWorkTime(n>0?new Date(s.valueOf()-1):new Date(s.valueOf()+1),i)&&a++,r=s}return r},getClosestWorkTime:function(){var t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getClosestWorkTime(t)},_getClosestWorkTime:function(t){if(this._isWorkTime(t.date,t.unit))return t.date;var e=t.unit,i=this.$gantt.date[e+"_start"](t.date),n=new Date(i),r=new Date(i),a=!0,s=0,o="any"==t.dir||!t.dir,l=1;for("past"==t.dir&&(l=-1);!this._isWorkTime(i,e);){o&&(i=a?n:r,l*=-1);var d=i.getTimezoneOffset();if(i=this.$gantt.date.add(i,l,e),i=this.$gantt._correct_dst_change(i,d,l,e),this.$gantt.date[e+"_start"]&&(i=this.$gantt.date[e+"_start"](i)),o&&(a?n=i:r=i),a=!a,++s>3e3)return this.$gantt.assert(!1,"Invalid working time check"),!1}return i!=r&&"past"!=t.dir||(i=this.$gantt.date.add(i,1,e)),i}},t.exports=n},function(t,e){function i(){this._cache={}}i.prototype={get:function(t,e){var i=-1,n=this._cache;if(n&&n[t]){var r=n[t],a=e.getTime();void 0!==r[a]&&(i=r[a])}return i},put:function(t,e,i){if(!t||!e)return!1;var n=this._cache,r=e.getTime();return i=!!i,!!n&&(n[t]||(n[t]={}),n[t][r]=i,!0)},clear:function(){this._cache={}}},t.exports=i},function(t,e,i){function n(t){this.$gantt=t.$gantt,this.argumentsHelper=r(this.$gantt),this.calendarManager=t,this.$disabledCalendar=new a(this.$gantt,this.argumentsHelper)}var r=i(19),a=i(83);n.prototype={_getCalendar:function(t){var e;if(this.$gantt.$services.config().work_time){var i=this.calendarManager;t.task?e=i.getTaskCalendar(t.task):t.id?e=i.getTaskCalendar(t):t.calendar&&(e=t.calendar),e||(e=i.getTaskCalendar())}else e=this.$disabledCalendar;return e},getWorkHours:function(t){return t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getWorkHours(t.date)},setWorkTime:function(t,e){return t=this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.setWorkTime(t)},unsetWorkTime:function(t,e){return t=this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.unsetWorkTime(t)},isWorkTime:function(t,e,i,n){var r=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(r).isWorkTime(r)},getClosestWorkTime:function(t){return t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getClosestWorkTime(t)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).calculateDuration(t)},hasDuration:function(){var t=this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).hasDuration(t)},calculateEndDate:function(t){return t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).calculateEndDate(t)}},t.exports=n},function(t,e){function i(t,e){this.argumentsHelper=e,this.$gantt=t}i.prototype={getWorkHours:function(){return[0,24]},setWorkTime:function(){return!0},unsetWorkTime:function(){return!0},isWorkTime:function(){return!0},getClosestWorkTime:function(t){return this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments).date},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._calculateDuration(t.start_date,t.end_date,t.unit,t.step)},_calculateDuration:function(t,e,i,n){var r=this.$gantt.date,a={week:6048e5,day:864e5,hour:36e5,minute:6e4},s=0;if(a[i])s=Math.round((e-t)/(n*a[i]));else{for(var o=new Date(t),l=new Date(e);o.valueOf()<l.valueOf();)s+=1,o=r.add(o,n,i);o.valueOf()!=e.valueOf()&&(s+=(l-o)/(r.add(o,n,i)-o))}return Math.round(s)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.end_date;return!!t.unit&&(e=new Date(e),i=new Date(i),e.valueOf()<i.valueOf())},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments);return this.$gantt.date.add(t.start_date,t.step*t.duration,t.unit)}},t.exports=i},function(t,e,i){var n=i(0);t.exports={create:function(t,e){return{getWorkHours:function(t){return e.getWorkHours(t)},setWorkTime:function(t){return e.setWorkTime(t)},unsetWorkTime:function(t){e.unsetWorkTime(t)},isWorkTime:function(t,i,n){return e.isWorkTime(t,i,n)},getClosestWorkTime:function(t){return e.getClosestWorkTime(t)},calculateDuration:function(t,i,n){return e.calculateDuration(t,i,n)},_hasDuration:function(t,i,n){return e.hasDuration(t,i,n)},calculateEndDate:function(t,i,n,r){return e.calculateEndDate(t,i,n,r)},createCalendar:n.bind(t.createCalendar,t),addCalendar:n.bind(t.addCalendar,t),getCalendar:n.bind(t.getCalendar,t),getCalendars:n.bind(t.getCalendars,t),getTaskCalendar:n.bind(t.getTaskCalendar,t),deleteCalendar:n.bind(t.deleteCalendar,t)}}}},function(t,e,i){var n=i(3);i(6),t.exports=function(t){t.isUnscheduledTask=function(t){return!!t.unscheduled||!t.start_date},t._isAllowedUnscheduledTask=function(e){return!(!e.unscheduled||!t.config.show_unscheduled)},t.isTaskVisible=function(e){if(!this.isTaskExists(e))return!1;var i=this.getTask(e);return this.getTaskType(i.type),!!(+i.start_date<=+this._max_date&&+i.end_date>=+this._min_date||t._isAllowedUnscheduledTask(i))&&!!(t.getGlobalTaskIndex(e)>=0)},t._defaultTaskDate=function(e,i){var n=!(!i||i==this.config.root_id)&&this.getTask(i),r="";if(n)r=n.start_date;else{var a=this.getTaskByIndex(0);r=a?a.start_date?a.start_date:a.end_date?this.calculateEndDate({start_date:a.end_date,duration:-this.config.duration_step}):"":this.config.start_date||this.getState().min_date}return t.assert(r,"Invalid dates"),new Date(r)},t._set_default_task_timing=function(e){e.start_date=e.start_date||t._defaultTaskDate(e,this.getParent(e)),e.duration=e.duration||this.config.duration_step,e.end_date=e.end_date||this.calculateEndDate(e)},t.createTask=function(e,i,n){return t.defined((e=e||{}).id)||(e.id=t.uid()),e.start_date||(e.start_date=t._defaultTaskDate(e,i)),void 0===e.text&&(e.text=t.locale.labels.new_task),void 0===e.duration&&(e.duration=1),i&&(this.setParent(e,i,!0),this.getTask(i).$open=!0),this.callEvent("onTaskCreated",[e])?(this.config.details_on_create?(e.$new=!0,this.silent(function(){t.$data.tasksStore.addItem(e,n)}),this.selectTask(e.id),this.refreshData(),this.showLightbox(e.id)):this.addTask(e,i,n)&&(this.showTask(e.id),this.selectTask(e.id)),e.id):null},t._update_flags=function(e,i){var n=t.$data.tasksStore;void 0===e?(this._lightbox_id=null,n.silent(function(){n.unselect()}),this._tasks_dnd&&this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==e&&(this._lightbox_id=i),n.getSelectedId()==e&&n.silent(function(){n.unselect(e),n.select(i)}),this._tasks_dnd&&this._tasks_dnd.drag&&this._tasks_dnd.drag.id==e&&(this._tasks_dnd.drag.id=i))},t._get_task_timing_mode=function(t,e){var i=this.getTaskType(t.type),n={type:i,$no_start:!1,$no_end:!1};return e||i!=t.$rendered_type?(i==this.config.types.project?n.$no_end=n.$no_start=!0:i!=this.config.types.milestone&&(n.$no_end=!(t.end_date||t.duration),n.$no_start=!t.start_date,this._isAllowedUnscheduledTask(t)&&(n.$no_end=n.$no_start=!1)),n):(n.$no_start=t.$no_start,n.$no_end=t.$no_end,n)},t._init_task_timing=function(e){var i=t._get_task_timing_mode(e,!0),n=e.$rendered_type!=i.type,r=i.type;n&&(e.$no_start=i.$no_start,e.$no_end=i.$no_end,e.$rendered_type=i.type),n&&r!=this.config.types.milestone&&r==this.config.types.project&&this._set_default_task_timing(e),r==this.config.types.milestone&&(e.end_date=e.start_date),e.start_date&&e.end_date&&(e.duration=this.calculateDuration(e)),e.duration=e.duration||0},t.isSummaryTask=function(e){var i=t._get_task_timing_mode(e);return!(!i.$no_end&&!i.$no_start)},t.resetProjectDates=function(t){var e=this._get_task_timing_mode(t);if(e.$no_end||e.$no_start){var i=this.getSubtaskDates(t.id);this._assign_project_dates(t,i.start_date,i.end_date)}},t.getSubtaskDuration=function(e){var i=0;return this.eachTask(function(e){this.getTaskType(e.type)==t.config.types.project||this.isUnscheduledTask(e)||(i+=e.duration)},void 0!==e?e:t.config.root_id),i},t.getSubtaskDates=function(e){var i=null,n=null;return this.eachTask(function(e){this.getTaskType(e.type)==t.config.types.project||this.isUnscheduledTask(e)||(e.start_date&&!e.$no_start&&(!i||i>e.start_date.valueOf())&&(i=e.start_date.valueOf()),e.end_date&&!e.$no_end&&(!n||n<e.end_date.valueOf())&&(n=e.end_date.valueOf()))},void 0!==e?e:t.config.root_id),{start_date:i?new Date(i):null,end_date:n?new Date(n):null}},t._assign_project_dates=function(t,e,i){var n=this._get_task_timing_mode(t);n.$no_start&&(t.start_date=e&&e!=1/0?new Date(e):this._defaultTaskDate(t,this.getParent(t))),n.$no_end&&(t.end_date=i&&i!=-1/0?new Date(i):this.calculateEndDate({start_date:t.start_date,duration:this.config.duration_step,task:t})),(n.$no_start||n.$no_end)&&this._init_task_timing(t)},t._update_parents=function(e,i){if(e){var n=this.getTask(e),r=this.getParent(n),a=this._get_task_timing_mode(n),s=!0;if(a.$no_start||a.$no_end){var o=n.start_date.valueOf(),l=n.end_date.valueOf();t.resetProjectDates(n),o==n.start_date.valueOf()&&l==n.end_date.valueOf()&&(s=!1),s&&!i&&this.refreshTask(n.id,!0)}s&&r&&this.isTaskExists(r)&&this._update_parents(r,i)}},t.roundDate=function(e){n.isDate(e)&&(e={date:e,unit:t.getScale().unit,step:t.getScale().step});var i,r,a,s=e.date,o=e.step,l=e.unit,d=t.getScale();if(l==d.unit&&o==d.step&&+s>=+t._min_date&&+s<=+t._max_date)a=Math.floor(t.columnIndexByDate(s)),t.getScale().trace_x[a]||(a-=1,d.rtl&&(a=0)),r=new Date(t.getScale().trace_x[a]),i=t.date.add(r,o,l);else{for(a=Math.floor(t.columnIndexByDate(s)),i=t.date[l+"_start"](new Date(this._min_date)),d.trace_x[a]&&(i=t.date[l+"_start"](d.trace_x[a]));+i<+s;){var c=(i=t.date[l+"_start"](t.date.add(i,o,l))).getTimezoneOffset();i=t._correct_dst_change(i,c,i,l),t.date[l+"_start"]&&(i=t.date[l+"_start"](i))}r=t.date.add(i,-1*o,l)}return e.dir&&"future"==e.dir?i:e.dir&&"past"==e.dir?r:Math.abs(s-r)<Math.abs(i-s)?r:i},t.correctTaskWorkTime=function(e){t.config.work_time&&t.config.correct_work_time&&(this.isWorkTime(e.start_date,void 0,e)?this.isWorkTime(new Date(+e.end_date-1),void 0,e)||(e.end_date=this.calculateEndDate(e)):(e.start_date=this.getClosestWorkTime({date:e.start_date,dir:"future",task:e}),e.end_date=this.calculateEndDate(e)))},t.attachEvent("onBeforeTaskUpdate",function(e,i){return t._init_task_timing(i),!0}),t.attachEvent("onBeforeTaskAdd",function(e,i){return t._init_task_timing(i),!0})}},function(t,e,i){t.exports=function(t){var e=i(1),n=i(6);t._lightbox_methods={},t._lightbox_template="<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>",t.$services.getService("state").registerProvider("lightbox",function(){return{lightbox:t._lightbox_id}}),t.showLightbox=function(e){if(e&&!t.isReadonly(this.getTask(e))&&this.callEvent("onBeforeLightbox",[e])){var i=this.getTask(e),n=this.getLightbox(this.getTaskType(i.type));this._center_lightbox(n),this.showCover(),this._fill_lightbox(e,n),this._waiAria.lightboxVisibleAttr(n),this.callEvent("onLightbox",[e])}},t._get_timepicker_step=function(){if(this.config.round_dnd_dates){var e=t.getScale(),i=n.getSecondsInUnit(e.unit)*e.step/60;return(i>=1440||!function(t){var e=t.$ui.getView("timeline");return!(!e||!e.isVisible())}(this))&&(i=this.config.time_step),i}return this.config.time_step},t.getLabel=function(t,e){for(var i=this._get_typed_lightbox_config(),n=0;n<i.length;n++)if(i[n].map_to==t)for(var r=i[n].options,a=0;a<r.length;a++)if(r[a].key==e)return r[a].label;return""},t.updateCollection=function(e,i){i=i.slice(0);var n=t.serverList(e);if(!n)return!1;n.splice(0,n.length),n.push.apply(n,i||[]),t.resetLightbox()},t.getLightboxType=function(){return this.getTaskType(this._lightbox_type)},t.getLightbox=function(e){if(void 0===e&&(e=this.getLightboxType()),!this._lightbox||this.getLightboxType()!=this.getTaskType(e)){this._lightbox_type=this.getTaskType(e);var i=document.createElement("DIV");i.className="gantt_cal_light";var n=this._is_lightbox_timepicker();(t.config.wide_form||n)&&(i.className+=" gantt_cal_light_wide"),n&&(t.config.wide_form=!0,i.className+=" gantt_cal_light_full"),i.style.visibility="hidden";for(var r=this._lightbox_template,a=this.config.buttons_left,s=0;s<a.length;s++)r+="<div "+this._waiAria.lightboxButtonAttrString(o=this.config._migrate_buttons[a[s]]?this.config._migrate_buttons[a[s]]:a[s])+" class='gantt_btn_set gantt_left_btn_set "+o+"_set'><div dhx_button='1' class='"+o+"'></div><div>"+this.locale.labels[o]+"</div></div>";for(a=this.config.buttons_right,s=0;s<a.length;s++){var o;r+="<div "+this._waiAria.lightboxButtonAttrString(o=this.config._migrate_buttons[a[s]]?this.config._migrate_buttons[a[s]]:a[s])+" class='gantt_btn_set gantt_right_btn_set "+o+"_set' style='float:right;'><div dhx_button='1' class='"+o+"'></div><div>"+this.locale.labels[o]+"</div></div>"}i.innerHTML=r+="</div>",t._waiAria.lightboxAttr(i),t.config.drag_lightbox&&(i.firstChild.onmousedown=t._ready_to_dnd,i.firstChild.onselectstart=function(){return!1},i.firstChild.style.cursor="pointer",t._init_dnd_events()),document.body.insertBefore(i,document.body.firstChild),this._lightbox=i;var l=this._get_typed_lightbox_config(e);r=this._render_sections(l);var d=i.getElementsByTagName("div");for(s=0;s<d.length;s++){var c=d[s];if("gantt_cal_larea"==c.className){c.innerHTML=r;break}}for(s=0;s<l.length;s++){var h=l[s];if(h.id&&document.getElementById(h.id)){var u=document.getElementById(h.id),_=u.querySelector("label"),f=u.nextSibling;if(f){var g=f.querySelector("input, select, textarea");g&&(h.inputId=g.id||"input_"+t.uid(),g.id||(g.id=h.inputId),_.setAttribute("for",h.inputId))}}}this.resizeLightbox(),this._init_lightbox_events(this),i.style.display="none",i.style.visibility="visible"}return this._lightbox},t._render_sections=function(t){for(var e="",i=0;i<t.length;i++){var n=this.form_blocks[t[i].type];if(n){t[i].id="area_"+this.uid();var r="";t[i].button&&(r="<div class='gantt_custom_button' index='"+i+"'><div class='gantt_custom_button_"+t[i].button+"'></div><div class='gantt_custom_button_label'>"+this.locale.labels["button_"+t[i].button]+"</div></div>"),this.config.wide_form&&(e+="<div class='gantt_wrap_section' "+(t[i].hidden?" style='display:none'":"")+">"),e+="<div id='"+t[i].id+"' class='gantt_cal_lsection'><label>"+r+this.locale.labels["section_"+t[i].name]+"</label></div>"+n.render.call(this,t[i]),e+="</div>"}}return e},t.resizeLightbox=function(){var t=this._lightbox;if(t){var e=t.childNodes[1];e.style.height="0px",e.style.height=e.scrollHeight+"px",t.style.height=e.scrollHeight+this.config.lightbox_additional_height+"px",e.style.height=e.scrollHeight+"px"}},t._center_lightbox=function(t){if(t){t.style.display="block";var e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,i=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,n=window.innerHeight||document.documentElement.clientHeight;t.style.top=e?Math.round(e+Math.max((n-t.offsetHeight)/2,0))+"px":Math.round(Math.max((n-t.offsetHeight)/2,0)+9)+"px",t.style.left=document.documentElement.scrollWidth>document.body.offsetWidth?Math.round(i+(document.body.offsetWidth-t.offsetWidth)/2)+"px":Math.round((document.body.offsetWidth-t.offsetWidth)/2)+"px"}},t.showCover=function(){if(!this._cover){this._cover=document.createElement("DIV"),this._cover.className="gantt_cal_cover";var t=void 0!==document.height?document.height:document.body.offsetHeight,e=document.documentElement?document.documentElement.scrollHeight:0;this._cover.style.height=Math.max(t,e)+"px",document.body.appendChild(this._cover)}},t._init_lightbox_events=function(){t.lightbox_events={},t.lightbox_events.gantt_save_btn=function(e){t._save_lightbox()},t.lightbox_events.gantt_delete_btn=function(e){t.callEvent("onLightboxDelete",[t._lightbox_id])&&(t.isTaskExists(t._lightbox_id)?t.$click.buttons.delete(t._lightbox_id):t.hideLightbox())},t.lightbox_events.gantt_cancel_btn=function(e){t._cancel_lightbox()},t.lightbox_events.default=function(i,n){if(n.getAttribute("dhx_button"))t.callEvent("onLightboxButton",[n.className,n,i]);else{var r,a,s=e.getClassName(n);if(-1!=s.indexOf("gantt_custom_button"))if(-1!=s.indexOf("gantt_custom_button_"))for(r=n.parentNode.getAttribute("index"),a=n;a&&-1==e.getClassName(a).indexOf("gantt_cal_lsection");)a=a.parentNode;else r=n.getAttribute("index"),a=n.parentNode,n=n.firstChild;var o=t._get_typed_lightbox_config();r&&t.form_blocks[o[1*(r*=1)].type].button_click(r,n,a,a.nextSibling)}},this.event(t.getLightbox(),"click",function(i){var n=(i=i||window.event).target?i.target:i.srcElement,r=e.getClassName(n);return r||(r=e.getClassName(n=n.previousSibling)),n&&r&&0===r.indexOf("gantt_btn_set")&&(r=e.getClassName(n=n.firstChild)),!(!n||!r)&&(t.defined(t.lightbox_events[n.className])?t.lightbox_events[n.className]:t.lightbox_events.default)(i,n)}),t.getLightbox().onkeydown=function(i){var n=i||window.event,r=i.target||i.srcElement,a=!!(e.getClassName(r).indexOf("gantt_btn_set")>-1);switch((i||n).keyCode){case 32:if((i||n).shiftKey)return;a&&r.click&&r.click();break;case t.keys.edit_save:if((i||n).shiftKey)return;a&&r.click?r.click():t._save_lightbox();break;case t.keys.edit_cancel:t._cancel_lightbox()}}},t._cancel_lightbox=function(){var e=this.getLightboxValues();this.callEvent("onLightboxCancel",[this._lightbox_id,e.$new]),t.isTaskExists(e.id)&&e.$new&&this.silent(function(){t.$data.tasksStore.removeItem(e.id),t._update_flags(e.id,null)}),this.refreshData(),this.hideLightbox()},t._save_lightbox=function(){var t=this.getLightboxValues();this.callEvent("onLightboxSave",[this._lightbox_id,t,!!t.$new])&&(t.$new?(delete t.$new,this.addTask(t)):this.isTaskExists(t.id)&&(this.mixin(this.getTask(t.id),t,!0),this.refreshTask(t.id),this.updateTask(t.id)),this.refreshData(),this.hideLightbox())},t._resolve_default_mapping=function(t){var e=t.map_to;return{time:!0,time_optional:!0,duration:!0,duration_optional:!0}[t.type]&&("auto"==t.map_to?e={start_date:"start_date",end_date:"end_date",duration:"duration"}:"string"==typeof t.map_to&&(e={start_date:t.map_to})),e},t.getLightboxValues=function(){var e={};t.isTaskExists(this._lightbox_id)&&(e=this.mixin({},this.getTask(this._lightbox_id)));for(var i=this._get_typed_lightbox_config(),n=0;n<i.length;n++){var r=document.getElementById(i[n].id);r=r?r.nextSibling:r;var a=this.form_blocks[i[n].type];if(a){var s=a.get_value.call(this,r,e,i[n]),o=t._resolve_default_mapping(i[n]);if("string"==typeof o&&"auto"!=o)e[o]=s;else if("object"==typeof o)for(var l in o)o[l]&&(e[o[l]]=s[l])}}return e},t.hideLightbox=function(){var t=this.getLightbox();t&&(t.style.display="none"),this._waiAria.lightboxHiddenAttr(t),this._lightbox_id=null,this.hideCover(),this.callEvent("onAfterLightbox",[])},t.hideCover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},t.resetLightbox=function(){t._lightbox&&!t._custom_lightbox&&t._lightbox.parentNode.removeChild(t._lightbox),t._lightbox=null},t._set_lightbox_values=function(e,i){var n=e,r=i.getElementsByTagName("span"),a=[];t.templates.lightbox_header?(a.push(""),a.push(t.templates.lightbox_header(n.start_date,n.end_date,n)),r[1].innerHTML="",r[2].innerHTML=t.templates.lightbox_header(n.start_date,n.end_date,n)):(a.push(this.templates.task_time(n.start_date,n.end_date,n)),a.push((this.templates.task_text(n.start_date,n.end_date,n)||"").substr(0,70)),r[1].innerHTML=this.templates.task_time(n.start_date,n.end_date,n),r[2].innerHTML=(this.templates.task_text(n.start_date,n.end_date,n)||"").substr(0,70)),r[1].innerHTML=a[0],r[2].innerHTML=a[1],t._waiAria.lightboxHeader(i,a.join(" "));for(var s=this._get_typed_lightbox_config(this.getLightboxType()),o=0;o<s.length;o++){var l=s[o];if(this.form_blocks[l.type]){var d=document.getElementById(l.id).nextSibling,c=this.form_blocks[l.type],h=t._resolve_default_mapping(s[o]),u=this.defined(n[h])?n[h]:l.default_value;c.set_value.call(t,d,u,n,l),l.focus&&c.focus.call(t,d)}}e.id&&(t._lightbox_id=e.id)},t._fill_lightbox=function(t,e){var i=this.getTask(t);this._set_lightbox_values(i,e)},t.getLightboxSection=function(e){for(var i=this._get_typed_lightbox_config(),n=0;n<i.length&&i[n].name!=e;n++);var r=i[n];if(!r)return null;this._lightbox||this.getLightbox();var a=document.getElementById(r.id),s=a.nextSibling,o={section:r,header:a,node:s,getValue:function(e){return t.form_blocks[r.type].get_value.call(t,s,e||{},r)},setValue:function(e,i){return t.form_blocks[r.type].set_value.call(t,s,e,i||{},r)}},l=this._lightbox_methods["get_"+r.type+"_control"];return l?l(o):o},t._lightbox_methods.get_template_control=function(t){return t.control=t.node,t},t._lightbox_methods.get_select_control=function(t){return t.control=t.node.getElementsByTagName("select")[0],t},t._lightbox_methods.get_textarea_control=function(t){return t.control=t.node.getElementsByTagName("textarea")[0],t},t._lightbox_methods.get_time_control=function(t){return t.control=t.node.getElementsByTagName("select"),t},t._init_dnd_events=function(){this.event(document.body,"mousemove",t._move_while_dnd),this.event(document.body,"mouseup",t._finish_dnd),t._init_dnd_events=function(){}},t._move_while_dnd=function(e){if(t._dnd_start_lb){document.gantt_unselectable||(document.body.className+=" gantt_unselectable",document.gantt_unselectable=!0);var i=t.getLightbox(),n=e&&e.target?[e.pageX,e.pageY]:[event.clientX,event.clientY];i.style.top=t._lb_start[1]+n[1]-t._dnd_start_lb[1]+"px",i.style.left=t._lb_start[0]+n[0]-t._dnd_start_lb[0]+"px"}},t._ready_to_dnd=function(e){var i=t.getLightbox();t._lb_start=[parseInt(i.style.left,10),parseInt(i.style.top,10)],t._dnd_start_lb=e&&e.target?[e.pageX,e.pageY]:[event.clientX,event.clientY]},t._finish_dnd=function(){t._lb_start&&(t._lb_start=t._dnd_start_lb=!1,document.body.className=document.body.className.replace(" gantt_unselectable",""),document.gantt_unselectable=!1)},t._focus=function(e,i){if(e&&e.focus)if(t.config.touch);else try{i&&e.select&&e.select(),e.focus()}catch(t){}},t.form_blocks={getTimePicker:function(e,i){if(!(r=e.time_format)){var r=["%d","%m","%Y"];n.getSecondsInUnit(t.getScale().unit)<n.getSecondsInUnit("day")&&r.push("%H:%i")}e._time_format_order={size:0};var a=this.config,s=this.date.date_part(new Date(t._min_date.valueOf())),o=1440,l=0;t.config.limit_time_select&&(o=60*a.last_hour+1,l=60*a.first_hour,s.setHours(a.first_hour));for(var d="",c=0;c<r.length;c++){var h=r[c];c>0&&(d+=" ");var u="";switch(h){case"%Y":var _,f,g,p;e._time_format_order[2]=c,e._time_format_order.size++,e.year_range&&(isNaN(e.year_range)?e.year_range.push&&(g=e.year_range[0],p=e.year_range[1]):_=e.year_range),_=_||10,f=f||Math.floor(_/2),g=g||s.getFullYear()-f,p=p||g+_;for(var v=g;v<p;v++)u+="<option value='"+v+"'>"+v+"</option>";break;case"%m":for(e._time_format_order[1]=c,e._time_format_order.size++,v=0;v<12;v++)u+="<option value='"+v+"'>"+this.locale.date.month_full[v]+"</option>";break;case"%d":for(e._time_format_order[0]=c,e._time_format_order.size++,v=1;v<32;v++)u+="<option value='"+v+"'>"+v+"</option>";break;case"%H:%i":e._time_format_order[3]=c,e._time_format_order.size++,v=l;var m=s.getDate();for(e._time_values=[];v<o;)u+="<option value='"+v+"'>"+this.templates.time_picker(s)+"</option>",e._time_values.push(v),s.setTime(s.valueOf()+60*this._get_timepicker_step()*1e3),v=24*(s.getDate()!=m?1:0)*60+60*s.getHours()+s.getMinutes()}if(u){var y=t._waiAria.lightboxSelectAttrString(h);d+="<select "+(e.readonly?"disabled='disabled'":"")+(i?" style='display:none' ":"")+y+">"+u+"</select>"}}return d},_fill_lightbox_select:function(e,i,n,r,a){if(e[i+r[0]].value=n.getDate(),e[i+r[1]].value=n.getMonth(),e[i+r[2]].value=n.getFullYear(),t.defined(r[3])){var s=60*n.getHours()+n.getMinutes();s=Math.round(s/t._get_timepicker_step())*t._get_timepicker_step();var o=e[i+r[3]];o.value=s,o.setAttribute("data-value",s)}},template:{render:function(t){return"<div class='gantt_cal_ltext gantt_cal_template' style='height:"+(t.height||"30")+"px;'></div>"},set_value:function(t,e,i,n){t.innerHTML=e||""},get_value:function(t,e,i){return t.innerHTML||""},focus:function(t){}},textarea:{render:function(t){return"<div class='gantt_cal_ltext' style='height:"+(t.height||"130")+"px;'><textarea></textarea></div>"},set_value:function(t,e,i){this.form_blocks.textarea._get_input(t).value=e||""},get_value:function(t,e){return this.form_blocks.textarea._get_input(t).value},focus:function(e){var i=this.form_blocks.textarea._get_input(e);t._focus(i,!0)},_get_input:function(t){return t.querySelector("textarea")}},select:{render:function(t){for(var e="<div class='gantt_cal_ltext' style='height:"+(t.height||"23")+"px;'><select style='width:100%;'>",i=0;i<t.options.length;i++)e+="<option value='"+t.options[i].key+"'>"+t.options[i].label+"</option>";return e+"</select></div>"},set_value:function(t,e,i,n){var r=t.firstChild;!r._dhx_onchange&&n.onchange&&(r.onchange=n.onchange,r._dhx_onchange=!0),void 0===e&&(e=(r.options[0]||{}).value),r.value=e||""},get_value:function(t,e){return t.firstChild.value},focus:function(e){t._focus(e.firstChild,!0)}},time:{render:function(t){var e=this.form_blocks.getTimePicker.call(this,t),i=["<div style='height:"+(t.height||30)+"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>"];return i.push(e),t.single_date?(e=this.form_blocks.getTimePicker.call(this,t,!0),i.push("<span></span>")):i.push("<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"),i.push(e),i.push("</div>"),i.join("")},set_value:function(e,i,n,r){var a=r,s=e.getElementsByTagName("select"),o=r._time_format_order;if(a.auto_end_date)for(var l=function(){h=new Date(s[o[2]].value,s[o[1]].value,s[o[0]].value,0,0),u=t.calculateEndDate({start_date:h,duration:1,task:n}),this.form_blocks._fill_lightbox_select(s,o.size,u,o,a)},d=0;d<4;d++)s[d].onchange=l;var c=t._resolve_default_mapping(r);"string"==typeof c&&(c={start_date:c});var h=n[c.start_date]||new Date,u=n[c.end_date]||t.calculateEndDate({start_date:h,duration:1,task:n});this.form_blocks._fill_lightbox_select(s,0,h,o,a),this.form_blocks._fill_lightbox_select(s,o.size,u,o,a)},get_value:function(e,i,n){var r=e.getElementsByTagName("select"),a=n._time_format_order,s=0,o=0;if(t.defined(a[3])){var l=parseInt(r[a[3]].value,10);s=Math.floor(l/60),o=l%60}var d=new Date(r[a[2]].value,r[a[1]].value,r[a[0]].value,s,o);s=o=0,t.defined(a[3])&&(l=parseInt(r[a.size+a[3]].value,10),s=Math.floor(l/60),o=l%60);var c=new Date(r[a[2]+a.size].value,r[a[1]+a.size].value,r[a[0]+a.size].value,s,o);c<=d&&(c=t.date.add(d,t._get_timepicker_step(),"minute"));var h=t._resolve_default_mapping(n),u={start_date:new Date(d),end_date:new Date(c)};return"string"==typeof h?u.start_date:u},focus:function(e){t._focus(e.getElementsByTagName("select")[0])}},duration:{render:function(t){var e=this.form_blocks.getTimePicker.call(this,t);e="<div class='gantt_time_selects'>"+e+"</div>";var i=this.locale.labels[this.config.duration_unit+"s"],n=t.single_date?' style="display:none"':"",r=t.readonly?" disabled='disabled'":"",a=this._waiAria.lightboxDurationInputAttrString(t);return"<div style='height:"+(t.height||30)+"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>"+e+" <div class='gantt_duration' "+n+"><input type='button' class='gantt_duration_dec' value='\u2212'"+r+"><input type='text' value='5' class='gantt_duration_value'"+r+" "+a+"><input type='button' class='gantt_duration_inc' value='+'"+r+"> "+i+" <span></span></div></div>"},set_value:function(e,i,n,r){function a(){var i=t.form_blocks.duration._get_start_date.call(t,e,r),a=t.form_blocks.duration._get_duration.call(t,e,r),s=t.calculateEndDate({start_date:i,duration:a,task:n});u.innerHTML=t.templates.task_date(s)}function s(t){var e=c.value;e=parseInt(e,10),window.isNaN(e)&&(e=0),(e+=t)<1&&(e=1),c.value=e,a()}var o=r,l=e.getElementsByTagName("select"),d=e.getElementsByTagName("input"),c=d[1],h=[d[0],d[2]],u=e.getElementsByTagName("span")[0],_=r._time_format_order;h[0].onclick=t.bind(function(){s(-1*this.config.duration_step)},this),h[1].onclick=t.bind(function(){s(1*this.config.duration_step)},this),l[0].onchange=a,l[1].onchange=a,l[2].onchange=a,l[3]&&(l[3].onchange=a),c.onkeydown=t.bind(function(t){var e=(t=t||window.event).charCode||t.keyCode||t.which;return 40==e?(s(-1*this.config.duration_step),!1):38==e?(s(1*this.config.duration_step),!1):void window.setTimeout(function(t){a()},1)},this),c.onchange=t.bind(function(t){a()},this);var f=t._resolve_default_mapping(r);"string"==typeof f&&(f={start_date:f});var g=n[f.start_date]||new Date,p=n[f.end_date]||t.calculateEndDate({start_date:g,duration:1,task:n}),v=Math.round(n[f.duration])||t.calculateDuration({start_date:g,end_date:p,task:n});t.form_blocks._fill_lightbox_select(l,0,g,_,o),c.value=v,a()},_get_start_date:function(e,i){var n=e.getElementsByTagName("select"),r=i._time_format_order,a=0,s=0;if(t.defined(r[3])){var o=n[r[3]],l=parseInt(o.value,10);isNaN(l)&&o.hasAttribute("data-value")&&(l=parseInt(o.getAttribute("data-value"),10)),a=Math.floor(l/60),s=l%60}return new Date(n[r[2]].value,n[r[1]].value,n[r[0]].value,a,s)},_get_duration:function(t,e){var i=t.getElementsByTagName("input")[1];return(i=parseInt(i.value,10))&&!window.isNaN(i)||(i=1),i<0&&(i*=-1),i},get_value:function(e,i,n){var r=t.form_blocks.duration._get_start_date(e,n),a=t.form_blocks.duration._get_duration(e,n),s=t.calculateEndDate({start_date:r,duration:a,task:i}),o=t._resolve_default_mapping(n),l={start_date:new Date(r),end_date:new Date(s),duration:a};return"string"==typeof o?l.start_date:l},focus:function(e){t._focus(e.getElementsByTagName("select")[0])}},parent:{_filter:function(e,i,n){var r=i.filter||function(){return!0};e=e.slice(0);for(var a=0;a<e.length;a++){var s=e[a];(s.id==n||t.isChildOf(s.id,n)||!1===r(s.id,s))&&(e.splice(a,1),a--)}return e},_display:function(e,i){var n=[],r=[];i&&(n=t.getTaskByTime(),e.allow_root&&n.unshift({id:t.config.root_id,text:e.root_label||""}),n=this._filter(n,e,i),e.sort&&n.sort(e.sort));for(var a=e.template||t.templates.task_text,s=0;s<n.length;s++){var o=a.apply(t,[n[s].start_date,n[s].end_date,n[s]]);void 0===o&&(o=""),r.push({key:n[s].id,label:o})}return e.options=r,e.map_to=e.map_to||"parent",t.form_blocks.select.render.apply(this,arguments)},render:function(e){return t.form_blocks.parent._display(e,!1)},set_value:function(e,i,n,r){var a=document.createElement("div");a.innerHTML=t.form_blocks.parent._display(r,n.id);var s=a.removeChild(a.firstChild);return e.onselect=null,e.parentNode.replaceChild(s,e),t.form_blocks.select.set_value.apply(t,[s,i,n,r])},get_value:function(){return t.form_blocks.select.get_value.apply(t,arguments)},focus:function(){return t.form_blocks.select.focus.apply(t,arguments)}}},t._is_lightbox_timepicker=function(){for(var t=this._get_typed_lightbox_config(),e=0;e<t.length;e++)if("time"==t[e].name&&"time"==t[e].type)return!0;return!1},t._dhtmlx_confirm=function(e,i,n,r){if(!e)return n();var a={text:e};i&&(a.title=i),r&&(a.ok=r),n&&(a.callback=function(t){t&&n()}),t.confirm(a)},t._get_typed_lightbox_config=function(e){void 0===e&&(e=this.getLightboxType());var i=(function(t){for(var e in this.config.types)if(this.config.types[e]==t)return e;return"task"}).call(this,e);return t.config.lightbox[i+"_sections"]?t.config.lightbox[i+"_sections"]:t.config.lightbox.sections},t._silent_redraw_lightbox=function(t){var e=this.getLightboxType();if(this.getState().lightbox){var i=this.getState().lightbox,n=this.getLightboxValues(),r=this.copy(this.getTask(i));this.resetLightbox();var a=this.mixin(r,n,!0),s=this.getLightbox(t||void 0);this._center_lightbox(this.getLightbox()),this._set_lightbox_values(a,s)}else this.resetLightbox(),this.getLightbox(t||void 0);this.callEvent("onLightboxChange",[e,this.getLightboxType()])}}},function(t,e){t.exports=function(t){t._extend_to_optional=function(e){var i=e,n={render:i.render,focus:i.focus,set_value:function(e,r,a,s){var o=t._resolve_default_mapping(s);if(!a[o.start_date]||"start_date"==o.start_date&&this._isAllowedUnscheduledTask(a)){n.disable(e,s);var l={};for(var d in o)l[o[d]]=a[d];return i.set_value.call(t,e,r,l,s)}return n.enable(e,s),i.set_value.call(t,e,r,a,s)},get_value:function(e,n,r){return r.disabled?{start_date:null}:i.get_value.call(t,e,n,r)},update_block:function(e,i){if(t.callEvent("onSectionToggle",[t._lightbox_id,i]),e.style.display=i.disabled?"none":"block",i.button){var n=e.previousSibling.querySelector(".gantt_custom_button_label"),r=t.locale.labels;n.innerHTML=i.disabled?r[i.name+"_enable_button"]:r[i.name+"_disable_button"]}t.resizeLightbox()},disable:function(t,e){e.disabled=!0,n.update_block(t,e)},enable:function(t,e){e.disabled=!1,n.update_block(t,e)},button_click:function(e,i,r,a){if(!1!==t.callEvent("onSectionButton",[t._lightbox_id,r])){var s=t._get_typed_lightbox_config()[e];s.disabled?n.enable(a,s):n.disable(a,s)}}};return n},t.form_blocks.duration_optional=t._extend_to_optional(t.form_blocks.duration),t.form_blocks.time_optional=t._extend_to_optional(t.form_blocks.time)}},function(t,e){t.exports=function(t){t.getTaskType=function(t){return"task"}}},function(t,e){t.exports=function(t){function e(){return t._cached_functions.update_if_changed(t),t._cached_functions.active||t._cached_functions.activate(),!0}t._cached_functions={cache:{},mode:!1,critical_path_mode:!1,wrap_methods:function(t,e){if(e._prefetch_originals)for(var i in e._prefetch_originals)e[i]=e._prefetch_originals[i];for(e._prefetch_originals={},i=0;i<t.length;i++)this.prefetch(t[i],e)},prefetch:function(t,e){var i=e[t];if(i){var n=this;e._prefetch_originals[t]=i,e[t]=function(){for(var e=new Array(arguments.length),r=0,a=arguments.length;r<a;r++)e[r]=arguments[r];if(n.active){var s=n.get_arguments_hash(Array.prototype.slice.call(e));n.cache[t]||(n.cache[t]={});var o=n.cache[t];if(n.has_cached_value(o,s))return n.get_cached_value(o,s);var l=i.apply(this,e);return n.cache_value(o,s,l),l}return i.apply(this,e)}}return i},cache_value:function(t,e,i){this.is_date(i)&&(i=new Date(i)),t[e]=i},has_cached_value:function(t,e){return t.hasOwnProperty(e)},get_cached_value:function(t,e){var i=t[e];return this.is_date(i)&&(i=new Date(i)),i},is_date:function(t){return t&&t.getUTCDate},get_arguments_hash:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.stringify_argument(t[i]));return"("+e.join(";")+")"},stringify_argument:function(t){return(t.id?t.id:this.is_date(t)?t.valueOf():t)+""},activate:function(){this.clear(),this.active=!0},deactivate:function(){this.clear(),this.active=!1},clear:function(){this.cache={}},setup:function(t){var e=[],i=["_isCriticalTask","isCriticalLink","_isProjectEnd","_getProjectEnd","_getSlack"];"auto"==this.mode?t.config.highlight_critical_path&&(e=i):!0===this.mode&&(e=i),this.wrap_methods(e,t)},update_if_changed:function(t){(this.critical_path_mode!=t.config.highlight_critical_path||this.mode!==t.config.optimize_render)&&(this.critical_path_mode=t.config.highlight_critical_path,this.mode=t.config.optimize_render,this.setup(t))}},t.attachEvent("onBeforeGanttRender",e),t.attachEvent("onBeforeDataRender",e),t.attachEvent("onBeforeSmartRender",function(){e()}),t.attachEvent("onBeforeParse",e),t.attachEvent("onDataRender",function(){t._cached_functions.deactivate()});var i=null;t.attachEvent("onSmartRender",function(){i&&clearTimeout(i),i=setTimeout(function(){t._cached_functions.deactivate()},1e3)}),t.attachEvent("onBeforeGanttReady",function(){return t._cached_functions.update_if_changed(t),!0})}},function(t,e){function i(t,e){var i=e.skin;if(!i||t)for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var a=n[r].href.match("dhtmlxgantt_([a-z_]+).css");if(a&&(e.skins[a[1]]||!i)){i=a[1];break}}e.skin=i||"terrace";var s=e.skins[e.skin]||e.skins.terrace;!function(t,e,i){for(var n in e)(void 0===t[n]||i)&&(t[n]=e[n])}(e.config,s.config,t);var o=e.getGridColumns();for(o[1]&&!e.defined(o[1].width)&&(o[1].width=s._second_column_width),o[2]&&!e.defined(o[2].width)&&(o[2].width=s._third_column_width),r=0;r<o.length;r++){var l=o[r];"add"==l.name&&(l.width||(l.width=44),e.defined(l.min_width)&&e.defined(l.max_width)||(l.min_width=l.min_width||l.width,l.max_width=l.max_width||l.width),l.min_width&&(l.min_width=+l.min_width),l.max_width&&(l.max_width=+l.max_width),l.width&&(l.width=+l.width,l.width=l.min_width&&l.min_width>l.width?l.min_width:l.width,l.width=l.max_width&&l.max_width<l.width?l.max_width:l.width))}s.config.task_height&&(e.config.task_height=s.config.task_height||"full"),s._lightbox_template&&(e._lightbox_template=s._lightbox_template),s._redefine_lightbox_buttons&&(e.config.buttons_right=s._redefine_lightbox_buttons.buttons_right,e.config.buttons_left=s._redefine_lightbox_buttons.buttons_left),e.resetLightbox()}t.exports=function(t){t.resetSkin||(t.resetSkin=function(){this.skin="",i(!0,this)},t.skins={},t.attachEvent("onGanttLayoutReady",function(){i(!1,this)}))}},function(t,e){t.exports=function(t){t.skins.skyblue={config:{grid_width:350,row_height:27,scale_height:27,link_line_width:1,link_arrow_size:8,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80}}},function(t,e){t.exports=function(t){t.skins.meadow={config:{grid_width:350,row_height:27,scale_height:30,link_line_width:2,link_arrow_size:6,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80}}},function(t,e){t.exports=function(t){t.skins.terrace={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:90,_third_column_width:70}}},function(t,e){t.exports=function(t){t.skins.broadway={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:1,link_arrow_size:7,lightbox_additional_height:86},_second_column_width:90,_third_column_width:80,_lightbox_template:"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:"icon_delete",gantt_save_btn:"icon_save"}}}},function(t,e){t.exports=function(t){t.skins.material={config:{grid_width:411,row_height:34,task_height_offset:6,scale_height:36,link_line_width:2,link_arrow_size:6,lightbox_additional_height:80},_second_column_width:110,_third_column_width:75,_redefine_lightbox_buttons:{buttons_left:["dhx_delete_btn"],buttons_right:["dhx_save_btn","dhx_cancel_btn"]}},t.attachEvent("onAfterTaskDrag",function(e){var i=t.getTaskNode(e);i&&(i.className+=" gantt_drag_animation",setTimeout(function(){var t=i.className.indexOf(" gantt_drag_animation");t>-1&&(i.className=i.className.slice(0,t))},200))})}},function(t,e){t.exports=function(t){t.skins.contrast_black={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}},function(t,e){t.exports=function(t){t.skins.contrast_white={config:{grid_width:360,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:6,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}},function(t,e){t.exports=function(t){function e(){var e;return t.$ui.getView("timeline")&&(e=t.$ui.getView("timeline")._tasks_dnd),e}t.config.touch_drag=500,t.config.touch=!0,t.config.touch_feedback=!0,t.config.touch_feedback_duration=1,t._prevent_touch_scroll=!1,t._touch_feedback=function(){t.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(t.config.touch_feedback_duration)},t.attachEvent("onGanttReady",t.bind(function(){if("force"!=this.config.touch&&(this.config.touch=this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))),this.config.touch){var t=!0;try{document.createEvent("TouchEvent")}catch(e){t=!1}t?this._touch_events(["touchmove","touchstart","touchend"],function(t){return t.touches&&t.touches.length>1?null:t.touches[0]?{target:t.target,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t},function(){return!1}):window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(t){return"mouse"==t.pointerType?null:t},function(t){return!t||"mouse"==t.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t},function(t){return!t||t.pointerType==t.MSPOINTER_TYPE_MOUSE})}},t));var i=[];t._touch_events=function(n,r,a){function s(t){return t&&t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!1}for(var o,l=0,d=!1,c=!1,h=null,u=null,_=null,f=0;f<i.length;f++)t.eventRemove(i[f][0],i[f][1],i[f][2]);for((i=[]).push([t.$container,n[0],function(i){var n=e();if(!a(i)&&d){u&&clearTimeout(u);var _=r(i);if(n&&(n.drag.id||n.drag.start_drag))return n.on_mouse_move(_),i.preventDefault&&i.preventDefault(),i.cancelBubble=!0,!1;if(!t._prevent_touch_scroll){if(_&&h){var f=h.pageX-_.pageX,g=h.pageY-_.pageY;if(!c&&(Math.abs(f)>5||Math.abs(g)>5)&&(t._touch_scroll_active=c=!0,l=0,o=t.getScrollState()),c){t.scrollTo(o.x+f,o.y+g);var p=t.getScrollState();if(o.x!=p.x&&g>2*f||o.y!=p.y&&f>2*g)return s(i)}}return s(i)}return!0}}]),i.push([this.$container,"contextmenu",function(t){if(d)return s(t)}]),i.push([this.$container,n[1],function(i){if(!a(i)){if(i.touches&&i.touches.length>1)return void(d=!1);h=r(i),t._locate_css(h,"gantt_hor_scroll")||t._locate_css(h,"gantt_ver_scroll")||(d=!0);var n=e();u=setTimeout(function(){var e=t.locate(h);n&&e&&!t._locate_css(h,"gantt_link_control")&&!t._locate_css(h,"gantt_grid_data")&&(n.on_mouse_down(h),n.drag&&n.drag.start_drag&&(function(e){var i=t._getTaskLayers(),n=t.getTask(e);if(n&&t.isTaskVisible(e))for(var r=0;r<i.length;r++)if((n=i[r].rendered[e])&&n.getAttribute("task_id")&&n.getAttribute("task_id")==e){var a=n.cloneNode(!0);_=n,i[r].rendered[e]=a,n.style.display="none",a.className+=" gantt_drag_move ",n.parentNode.appendChild(a)}}(e),n._start_dnd(h),t._touch_drag=!0,t.refreshTask(e),t._touch_feedback())),u=null},t.config.touch_drag)}}]),i.push([this.$container,n[2],function(i){if(!a(i)){u&&clearTimeout(u),t._touch_drag=!1,d=!1;var n=r(i),o=e();if(o&&o.on_mouse_up(n),_&&(t.refreshTask(t.locate(_)),_.parentNode&&(_.parentNode.removeChild(_),t._touch_feedback())),t._touch_scroll_active=d=c=!1,_=null,h&&l){var f=new Date;f-l<500?(t.$services.getService("mouseEvents").onDoubleClick(h),s(i)):l=f}else l=new Date}}]),f=0;f<i.length;f++)t.event(i[f][0],i[f][1],i[f][2])}}},function(t,e){t.exports=function(t){t.locale={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{new_task:"New task",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Task will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",section_type:"Type",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel"}}}},function(t,e,i){var n=i(1),r=i(6);t.exports=function(t){var e=i(17);t.assert=i(101)(t),t.init=function(e,i,r){var a;i&&r&&(this.config.start_date=this._min_date=new Date(i),this.config.end_date=this._max_date=new Date(r)),this.date.init(),this.config.scroll_size||(this.config.scroll_size=n.getScrollSize()||1),t.event(window,"resize",function(){clearTimeout(a),a=setTimeout(function(){t.render()},300)}),this.init=function(t){this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this.$layout&&this.$layout.clear(),this._reinit(t)},this._reinit(e)},t._reinit=function(i){this.callEvent("onBeforeGanttReady",[]),this.resetLightbox(),this._update_flags(),this.$services.getService("templateLoader").initTemplates(this),this._clearTaskLayers(),this._clearLinkLayers(),this.$layout&&(this.$layout.destructor(),this.$ui.reset()),this.$root=n.toNode(i),this.$root&&(this.$root.innerHTML=""),this.$root.gantt=this,e(this),this.config.layout.id="main",this.$layout=this.$ui.createView("layout",i,this.config.layout),this.$layout.attachEvent("onBeforeResize",function(){for(var e=t.$services.getService("datastores"),i=0;i<e.length;i++)t.getDatastore(e[i]).filter()}),this.$layout.attachEvent("onResize",function(){t.refreshData()}),this.callEvent("onGanttLayoutReady",[]),this.$layout.render(),t.$container=this.$layout.$container.firstChild,this.callEvent("onTemplatesReady",[]),this.$mouseEvents.reset(this.$root),this.callEvent("onGanttReady",[]),this.render()},t.$click={buttons:{edit:function(e){t.showLightbox(e)},delete:function(e){t._dhtmlx_confirm(t.locale.labels.confirm_deleting,t.locale.labels.confirm_deleting_title,function(){t.isTaskExists(e)?(t.getTask(e).$new?(t.silent(function(){t.deleteTask(e,!0)}),t.refreshData()):t.deleteTask(e),t.hideLightbox()):t.hideLightbox()})}}},t.getScrollState=function(){var t=this._scroll_state();return{x:t.x_pos,y:t.y_pos,inner_width:t.x,inner_height:t.y,width:t.x_inner,height:t.y_inner}},t.scrollTo=function(t,e){var i=this._getVerticalScrollbar(),n=this._getHorizontalScrollbar(),r=i.getScrollState(),a=n.getScrollState();1*t==t&&n.scroll(t),1*e==e&&i.scroll(e);var s=i.getScrollState(),o=n.getScrollState();this.callEvent("onGanttScroll",[a.position,r.position,o.position,s.position])},t.showDate=function(t){var e=this.posFromDate(t),i=Math.max(e-this.config.task_scroll_offset,0);this.scrollTo(i)},t.showTask=function(t){var e=this.getTaskPosition(this.getTask(t)),i=Math.max(e.left-this.config.task_scroll_offset,0),n=this._scroll_state().y;this.scrollTo(i,n?e.top-(n-this.config.row_height)/2:e.top)},t.render=function(){this.callEvent("onBeforeGanttRender",[]);var i=this.getScrollState(),n=i?i.x:0;this._getHorizontalScrollbar()&&(n=this._getHorizontalScrollbar().$config.codeScrollLeft||n||0);var r=null;if(n&&(r=t.dateFromPos(n+this.config.task_scroll_offset)),e(this),this.$layout.$config.autosize=this.config.autosize,this.$layout.resize(),this.config.preserve_scroll&&i&&n){var a=t.getScrollState();+r==+t.dateFromPos(a.x)&&a.y==i.y||(r&&this.showDate(r),i.y&&t.scrollTo(void 0,i.y))}this.callEvent("onGanttRender",[])},t.setSizes=t.render,t._scroll_state=function(){var e={x:!1,y:!1,x_pos:0,y_pos:0,scroll_size:this.config.scroll_size+1,x_inner:0,y_inner:0},i=t._getVerticalScrollbar(),n=t._getHorizontalScrollbar();if(n){var r=n.getScrollState();r.visible&&(e.x=r.size,e.x_inner=r.scrollSize),e.x_pos=r.position||0}if(i){var a=i.getScrollState();a.visible&&(e.y=a.size,e.y_inner=a.scrollSize),e.y_pos=a.position||0}return e},t.locate=function(t){var e=n.getTargetNode(t);if((n.getClassName(e)||"").indexOf("gantt_task_cell")>=0)return null;var i=arguments[1]||this.config.task_attribute,r=n.locateAttribute(e,i);return r?r.getAttribute(i):null},t._locate_css=function(t,e,i){return n.locateClassName(t,e,i)},t._locateHTML=function(t,e){return n.locateAttribute(t,e||this.config.task_attribute)},t.getTaskRowNode=function(t){for(var e=this.$grid_data.childNodes,i=this.config.task_attribute,n=0;n<e.length;n++)if(e[n].getAttribute&&e[n].getAttribute(i)==t)return e[n];return null},t.changeLightboxType=function(e){if(this.getLightboxType()==e)return!0;t._silent_redraw_lightbox(e)},t._get_link_type=function(e,i){var n=null;return e&&i?n=t.config.links.start_to_start:!e&&i?n=t.config.links.finish_to_start:e||i?e&&!i&&(n=t.config.links.start_to_finish):n=t.config.links.finish_to_finish,n},t.isLinkAllowed=function(t,e,i,n){var r;if(!(r="object"==typeof t?t:{source:t,target:e,type:this._get_link_type(i,n)}))return!1;if(!(r.source&&r.target&&r.type))return!1;if(r.source==r.target)return!1;var a=!0;return this.checkEvent("onLinkValidation")&&(a=this.callEvent("onLinkValidation",[r])),a},t._correct_dst_change=function(e,i,n,a){var s=r.getSecondsInUnit(a)*n;if(s>3600&&s<86400){var o=e.getTimezoneOffset()-i;o&&(e=t.date.add(e,o,"minute"))}return e},t.getGridColumns=function(){return t.config.columns.slice()},t._is_icon_open_click=function(t){if(!t)return!1;var e=t.target||t.srcElement;if(!e||!e.className)return!1;var i=n.getClassName(e);return-1!==i.indexOf("gantt_tree_icon")&&(-1!==i.indexOf("gantt_close")||-1!==i.indexOf("gantt_open"))}}},function(t,e){t.exports=function(t){return function(e,i){e||t.config.show_errors&&!1!==t.callEvent("onError",[i])&&t.message({type:"error",text:i,expire:-1})}}},function(t,e){t.exports=function(t){t.destructor=function(){for(var e in t.callEvent("onDestroy",[]),this.clearAll(),this.detachAllEvents(),this.$root&&delete this.$root.gantt,this._eventRemoveAll(),this.$layout&&this.$layout.destructor(),this.resetLightbox(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.$services.destructor(),this)0===e.indexOf("$")&&delete this[e]}}},function(t,e){t.exports=function(t){function e(e,i){var n=t.env.isIE?"":"%c",r=[n,'"',e,'"',n," has been deprecated in dhtmlxGantt v4.0 and will stop working in v6.0. Use ",n,'"',i,'"',n," instead. \nSee more details at http://docs.dhtmlx.com/gantt/migrating.html "].join(""),a=window.console.warn||window.console.log,s=[r];t.env.isIE||(s=s.concat(["font-weight:bold","font-weight:normal","font-weight:bold","font-weight:normal"])),a.apply(window.console,s)}window.dhtmlx||(window.dhtmlx={});for(var i=["message","alert","confirm","modalbox","uid","copy","mixin","defined","bind","assert"],n=[],r=0;r<i.length;r++)window.dhtmlx[i[r]]||(n.push(i[r]),dhtmlx[i[r]]=function(i){return function(){return e("dhtmlx."+i,"gantt."+i),t[i].apply(t,arguments)}}(i[r]));t.attachEvent("onDestroy",function(){for(var t=0;t<n.length;t++)delete window.dhtmlx[n[t]];n=null}),window.dataProcessor||(window.dataProcessor=function(i){return e("new dataProcessor(url)","new gantt.dataProcessor(url)"),new t.dataProcessor(i)},t.attachEvent("onDestroy",function(){window.dataProcessor=null}))}}]),Scheduler.plugin(function(t){t._temp_matrix_scope=function(){t.matrix={},t._merge=function(t,e){for(var i in e)void 0===t[i]&&(t[i]=e[i])},t.createTimelineView=function(e){t._skin_init(),t._merge(e,{section_autoheight:!0,name:"matrix",x:"time",y:"time",x_step:1,x_unit:"hour",y_unit:"day",y_step:1,x_start:0,x_size:24,y_start:0,y_size:7,render:"cell",dx:200,dy:50,event_dy:t.xy.bar_height-5,event_min_dy:t.xy.bar_height-5,resize_events:!0,fit_events:!0,show_unassigned:!1,second_scale:!1,round_position:!1,_logic:function(e,i,n){var r={};return t.checkEvent("onBeforeSectionRender")&&(r=t.callEvent("onBeforeSectionRender",[e,i,n])),r}}),e._original_x_start=e.x_start,"day"!=e.x_unit&&(e.first_hour=e.last_hour=0),e._start_correction=e.first_hour?60*e.first_hour*60*1e3:0,e._end_correction=e.last_hour?60*(24-e.last_hour)*60*1e3:0,t.checkEvent("onTimelineCreated")&&t.callEvent("onTimelineCreated",[e]);var i=t.render_data;t.render_data=function(n,r){if(this._mode!=e.name)return i.apply(this,arguments);if(r&&!e.show_unassigned&&"cell"!=e.render)for(var a=0;a<n.length;a++)this.clear_event(n[a]),this.render_timeline_event.call(this.matrix[this._mode],n[a],!0);else t._renderMatrix.call(e,!0,!0)},t.matrix[e.name]=e,t.templates[e.name+"_cell_value"]=function(t){return t?t.length:""},t.templates[e.name+"_cell_class"]=function(t){return""},t.templates[e.name+"_scalex_class"]=function(t){return""},t.templates[e.name+"_second_scalex_class"]=function(t){return""},t.templates[e.name+"_scaley_class"]=function(t,e,i){return""},t.templates[e.name+"_scale_label"]=function(t,e,i){return e},t.templates[e.name+"_tooltip"]=function(t,e,i){return i.text},t.templates[e.name+"_date"]=function(e,i){return e.getDay()==i.getDay()&&864e5>i-e||+e==+t.date.date_part(new Date(i))||+t.date.add(e,1,"day")==+i&&0===i.getHours()&&0===i.getMinutes()?t.templates.day_date(e):e.getDay()!=i.getDay()&&864e5>i-e?t.templates.day_date(e)+" &ndash; "+t.templates.day_date(i):t.templates.week_date(e,i)},t.templates[e.name+"_scale_date"]=t.date.date_to_str(e.x_date||t.config.hour_date),t.templates[e.name+"_second_scale_date"]=t.date.date_to_str(e.second_scale&&e.second_scale.x_date?e.second_scale.x_date:t.config.hour_date),t.date["add_"+e.name+"_private"]=function(i,n){var r=n,a=e.x_unit;if("minute"==e.x_unit||"hour"==e.x_unit){var s=r;"hour"==e.x_unit&&(s*=60),s%1440||(r=s/1440,a="day")}return t.date.add(i,r,a)},t.date["add_"+e.name]=function(i,n,r){var a=t.date["add_"+e.name+"_private"](i,(e.x_length||e.x_size)*e.x_step*n);if("minute"==e.x_unit||"hour"==e.x_unit){var s=e.x_length||e.x_size,o="hour"==e.x_unit?60*e.x_step:e.x_step;if(o*s%1440)if(+t.date.date_part(new Date(i))==+t.date.date_part(new Date(a)))e.x_start+=n*s;else{var l=Math.round((1440/(s*o)-1)*s);e.x_start=n>0?e.x_start-l:l+e.x_start}}return a},t.date[e.name+"_start"]=function(i){var n=(t.date[e.x_unit+"_start"]||t.date.day_start).call(t.date,i),r=n.getTimezoneOffset(),a=(n=t.date.add(n,e.x_step*e.x_start,e.x_unit)).getTimezoneOffset();return r!=a&&n.setTime(n.getTime()+6e4*(a-r)),n},t.callEvent("onOptionsLoad",[e]),t[e.name+"_view"]=function(i){i?t._set_timeline_dates(e):t._renderMatrix.apply(e,arguments)};var n=new Date;t.date.add(n,e.x_step,e.x_unit).valueOf(),n.valueOf(),t["mouse_"+e.name]=function(i){var n=this._drag_event;this._drag_id&&(n=this.getEvent(this._drag_id)),i.x-=e.dx;var r=t._timeline_drag_date(e,i.x);if(i.x=0,i.force_redraw=!0,i.custom=!0,"move"==this._drag_mode&&this._drag_id&&this._drag_event){n=this.getEvent(this._drag_id);var a=this._drag_event;if(i._ignores=this._ignores_detected||e._start_correction||e._end_correction,void 0===a._move_delta&&(a._move_delta=(n.start_date-r)/6e4,this.config.preserve_length&&i._ignores&&(a._move_delta=this._get_real_event_length(n.start_date,r,e),a._event_length=this._get_real_event_length(n.start_date,n.end_date,e))),this.config.preserve_length&&i._ignores){var s=this._get_fictional_event_length(r,a._move_delta,e,!0);r=new Date(r-s)}else r=t.date.add(r,a._move_delta,"minute")}if("resize"==this._drag_mode&&n&&(this.config.timeline_swap_resize&&this._drag_id&&(this._drag_from_start&&+r>+n.end_date?this._drag_from_start=!1:!this._drag_from_start&&+r<+n.start_date&&(this._drag_from_start=!0)),i.resize_from_start=this._drag_from_start,!this.config.timeline_swap_resize&&this._drag_id&&this._drag_from_start&&+r>=+t.date.add(n.end_date,-t.config.time_step,"minute")&&(r=t.date.add(n.end_date,-t.config.time_step,"minute"))),e.round_position)switch(this._drag_mode){case"move":this.config.preserve_length||(r=t._timeline_get_rounded_date.call(e,r,!1),"day"==e.x_unit&&(i.custom=!1));break;case"resize":this._drag_event&&((null===this._drag_event._resize_from_start||void 0===this._drag_event._resize_from_start)&&(this._drag_event._resize_from_start=i.resize_from_start),i.resize_from_start=this._drag_event._resize_from_start,r=t._timeline_get_rounded_date.call(e,r,!this._drag_event._resize_from_start))}this._resolve_timeline_section(e,i),i.section&&this._update_timeline_section({pos:i,event:this.getEvent(this._drag_id),view:e}),i.y=Math.round((this._correct_shift(r,1)-this._min_date)/(6e4*this.config.time_step)),i.shift=this.config.time_step,e.round_position&&"new-size"==this._drag_mode&&r<=this._drag_start&&(i.shift=t.date.add(this._drag_start,e.x_step,e.x_unit)-this._drag_start);var o=this._is_pos_changed(this._drag_pos,i);return this._drag_pos&&o&&(this._drag_event._dhx_changed=!0),o||this._drag_pos.has_moved||(i.force_redraw=!1),i}},t._prepare_timeline_events=function(e){var i=[];if("cell"==e.render)i=t._timeline_trace_events.call(e);else for(var n=t.get_visible_events(),r=e.order,a=0;a<n.length;a++){var s=n[a],o=s[e.y_property],l=e.order[o];if(e.show_unassigned&&!o){for(var d in r)if(r.hasOwnProperty(d)){i[l=r[d]]||(i[l]=[]);var c=t._lame_copy({},s);c[e.y_property]=d,i[l].push(c)}}else i[l]||(i[l]=[]),i[l].push(s)}return i},t._populate_timeline_rendered=function(e){t._rendered=[];for(var i=e.getElementsByTagName("DIV"),n=0;n<i.length;n++)i[n].getAttribute("event_id")&&t._rendered.push(i[n])},t._get_timeline_event_height=function(t,e){var i=e.event_dy;return"full"==e.event_dy&&(i=e.section_autoheight?e._section_height[t[e.y_property]]-6:e.dy-3),e.resize_events&&(i=Math.max(Math.floor(i/t._count),e.event_min_dy)),i},t._get_timeline_event_y=function(e,i){var n=2+e*i+(e?2*e:0);return t.config.cascade_event_display&&(n=2+e*t.config.cascade_event_margin+(e?2*e:0)),n},t.render_timeline_event=function(e,i){var n=e[this.y_property];if(!n)return"";var r=e._sorder,a=t._timeline_getX(e,!1,this),s=t._timeline_getX(e,!0,this),o=t._get_timeline_event_height(e,this),l=o-2;e._inner||"full"!=this.event_dy||(l=(l+2)*(e._count-r)-2),t._border_box_bvents()&&(l+=3);var d=t._get_timeline_event_y(e._sorder,o),c=o+d+2;(!this._events_height[n]||this._events_height[n]<c)&&(this._events_height[n]=c);var h=t.templates.event_class(e.start_date,e.end_date,e);h="dhx_cal_event_line "+(h||""),t.getState().select_id==e.id&&(h+=" dhx_cal_event_selected"),e._no_drag_move&&(h+=" no_drag_move");var u=e.color?"background:"+e.color+";":"",_=e.textColor?"color:"+e.textColor+";":"",f=t.templates.event_bar_text(e.start_date,e.end_date,e),g="<div "+t._waiAria.eventBarAttrString(e)+" event_id='"+e.id+"' class='"+h+"' style='"+u+_+"position:absolute; top:"+d+"px; height: "+l+"px; left:"+a+"px; width:"+Math.max(0,s-a)+"px;"+(e._text_style||"")+"'>";if(t.config.drag_resize&&!t.config.readonly){var p="dhx_event_resize";g+=(e._no_resize_start?"":"<div class='"+p+" "+p+"_start' style='height: "+l+"px;'></div>")+(e._no_resize_end?"":"<div class='"+p+" "+p+"_end' style='height: "+l+"px;'></div>")}if(g+=f+"</div>",!i)return g;var v=document.createElement("div");v.innerHTML=g;var m=t._els.dhx_cal_data[0].firstChild.rows[this.order[n]];if(m){var y=m.cells[1].firstChild;t._rendered.push(v.firstChild),y.appendChild(v.firstChild)}},t._timeline_trace_events=function(){for(var e=t.get_visible_events(),i=[],n=0;n<this.y_unit.length;n++)i[n]=[];var r;for(i[r]||(i[r]=[]),n=0;n<e.length;n++){r=this.order[e[n][this.y_property]];for(var a=0;this._trace_x[a+1]&&e[n].start_date>=this._trace_x[a+1];)a++;for(;this._trace_x[a]&&e[n].end_date>this._trace_x[a];)i[r][a]||(i[r][a]=[]),i[r][a].push(e[n]),a++}return i},t._timeline_getX=function(e,i,n){var r=0,a=n._step,s=n.round_position,o=0,l=i?e.end_date:e.start_date;l.valueOf()>t._max_date.valueOf()&&(l=t._max_date);var d=l-t._min_date_timeline;if(d>0){var c=t._get_date_index(n,l);t._ignores[c]&&(s=!0);for(var h=0;c>h;h++)r+=t._cols[h];var u=t._timeline_get_rounded_date.apply(n,[l,!1]);s?+l>+u&&i&&(o=t._cols[c]):(d=l-u,n.first_hour||n.last_hour?(0>(d-=n._start_correction)&&(d=0),(o=Math.round(d/a))>t._cols[c]&&(o=t._cols[c])):o=Math.round(d/a))}var _=t._border_box_bvents();return r+(i?0===d||s?o-(_?2:14):o-(_?0:12):o+1)},t._timeline_get_rounded_date=function(e,i){var n=t._get_date_index(this,e),r=this._trace_x[n];return i&&+e!=+this._trace_x[n]&&(r=this._trace_x[n+1]?this._trace_x[n+1]:t.date.add(this._trace_x[n],this.x_step,this.x_unit)),new Date(r)},t._timeline_skip_ignored=function(e){if(t._ignores_detected)for(var i,n,r,a,s=0;s<e.length;s++){for(r=!1,i=t._get_date_index(this,(a=e[s]).start_date),n=t._get_date_index(this,a.end_date);n>i;){if(!t._ignores[i]){r=!0;break}i++}r||i!=n||t._ignores[n]||+a.end_date>+this._trace_x[n]&&(r=!0),r||(e.splice(s,1),s--)}},t._timeline_get_events_html=function(e){var i="";if(e&&"cell"!=this.render){t._timeline_skip_ignored.call(this,e),e.sort(this.sort||function(t,e){return t.start_date.valueOf()==e.start_date.valueOf()?t.id>e.id?1:-1:t.start_date>e.start_date?1:-1});for(var n=[],r=e.length,a=0;r>a;a++){var s=e[a];s._inner=!1;var o=this.round_position?t._timeline_get_rounded_date.apply(this,[s.start_date,!1]):s.start_date;for(this.round_position&&t._timeline_get_rounded_date.apply(this,[s.end_date,!0]);n.length&&n[n.length-1].end_date.valueOf()<=o.valueOf();)n.splice(n.length-1,1);for(var l=!1,d=0;d<n.length;d++){var c=n[d];if(c.end_date.valueOf()<=o.valueOf()){l=!0,s._sorder=c._sorder,n.splice(d,1),s._inner=!0;break}}if(n.length&&(n[n.length-1]._inner=!0),!l)if(n.length)if(n.length<=n[n.length-1]._sorder){if(n[n.length-1]._sorder)for(var h=0;h<n.length;h++){for(var u=!1,_=0;_<n.length;_++)if(n[_]._sorder==h){u=!0;break}if(!u){s._sorder=h;break}}else s._sorder=0;s._inner=!0}else{for(var f=n[0]._sorder,g=1;g<n.length;g++)n[g]._sorder>f&&(f=n[g]._sorder);s._sorder=f+1,s._inner=!1}else s._sorder=0;n.push(s),n.length>(n.max_count||0)?(n.max_count=n.length,s._count=n.length):s._count=s._count?s._count:1}for(var p=0;p<e.length;p++)e[p]._count=n.max_count;for(var v=0;r>v;v++)i+=t.render_timeline_event.call(this,e[v],!1)}return i},t._timeline_y_scale=function(e){var i="<table style='table-layout:fixed;' cellspacing='0' cellpadding='0'>";t._load_mode&&t._load();for(var n=t._prepare_timeline_events(this),r=0,a=0;a<t._cols.length;a++)r+=t._cols[a];var s=new Date,o=t._cols.length-t._ignores_detected;s=(t.date.add(s,this.x_step*o,this.x_unit)-s-(this._start_correction+this._end_correction)*o)/r,this._step=s,this._summ=r;var l=t._colsS.heights=[],d=[];for(this._events_height={},this._section_height={},a=0;a<this.y_unit.length;a++){var c=this._logic(this.render,this.y_unit[a],this);t._merge(c,{height:this.dy}),this.section_autoheight&&(this.y_unit.length*c.height<e.offsetHeight&&(c.height=Math.max(c.height,Math.floor((e.offsetHeight-1)/this.y_unit.length))),this._section_height[this.y_unit[a].key]=c.height),c.td_className||(c.td_className="dhx_matrix_scell"+(t.templates[this.name+"_scaley_class"](this.y_unit[a].key,this.y_unit[a].label,this.y_unit[a])?" "+t.templates[this.name+"_scaley_class"](this.y_unit[a].key,this.y_unit[a].label,this.y_unit[a]):"")),c.td_content||(c.td_content=t.templates[this.name+"_scale_label"](this.y_unit[a].key,this.y_unit[a].label,this.y_unit[a])),t._merge(c,{tr_className:"",style_height:"height:"+c.height+"px;",style_width:"width:"+this.dx+"px;",summ_width:"width:"+r+"px;",table_className:""});var h=t._timeline_get_events_html.call(this,n[a]);if(this.fit_events){var u=this._events_height[this.y_unit[a].key]||0;c.height=u>c.height?u:c.height,c.style_height="height:"+c.height+"px;",this._section_height[this.y_unit[a].key]=c.height}if(i+="<tr class='"+c.tr_className+"' style='"+c.style_height+"'><td class='"+c.td_className+"' style='"+c.style_width+" height:"+(c.height-1)+"px;' "+t._waiAria.label(c.td_content)+">"+c.td_content+"</td>","cell"==this.render)for(var _=0;_<t._cols.length;_++)i+=t._ignores[_]?"<td></td>":"<td class='dhx_matrix_cell "+t.templates[this.name+"_cell_class"](n[a][_],this._trace_x[_],this.y_unit[a])+"' style='width:"+t._cols[_]+"px'><div style='width:auto'>"+t.templates[this.name+"_cell_value"](n[a][_],this._trace_x[_],this.y_unit[a])+"</div></td>";else{for(i+="<td><div style='"+c.summ_width+" "+c.style_height+" position:relative;' class='dhx_matrix_line'>",i+=h,i+="<table class='"+c.table_className+"' cellpadding='0' cellspacing='0' style='"+c.summ_width+" "+c.style_height+"' >",_=0;_<t._cols.length;_++)i+=t._ignores[_]?"<td></td>":"<td class='dhx_matrix_cell "+t.templates[this.name+"_cell_class"](n[a],this._trace_x[_],this.y_unit[a])+"' style='width:"+t._cols[_]+"px'></td>";i+="</table>",i+="</div></td>"}i+="</tr>",d.push(c)}i+="</table>",this._matrix=n,e.innerHTML=i,t._populate_timeline_rendered(e),this._scales={};for(var f=e.firstChild.rows,g=null,p=(a=0,d.length);p>a;a++){g=this.y_unit[a],l.push(d[a].height);var v=g.key,m=this._scales[v]=t._isRender("cell")?f[a]:f[a].childNodes[1].getElementsByTagName("div")[0];t.callEvent("onScaleAdd",[m,v])}},t._timeline_x_dates=function(e){var i=t._min_date,n=t._max_date;t._process_ignores(i,this.x_size,this.x_unit,this.x_step,e);for(var r=0,a=0;+n>+i;)if(this._trace_x[a]=new Date(i),"month"==this.x_unit&&t.date[this.x_unit+"_start"]&&(i=t.date[this.x_unit+"_start"](new Date(i))),i=t.date.add(i,this.x_step,this.x_unit),t.date[this.x_unit+"_start"]&&(i=t.date[this.x_unit+"_start"](i)),t._ignores[a]||r++,a++,e)if(r<this.x_size&&!(+n>+i))n=t.date["add_"+this.name+"_private"](n,(this.x_length||this.x_size)*this.x_step);else if(r>=this.x_size){t._max_date=i;break}return{total:a,displayed:r}},t._timeline_x_scale=function(e){var i=t.xy.scale_height,n=this._header_resized||t.xy.scale_height;t._cols=[],t._colsS={height:0},this._trace_x=[];var r=t._x-this.dx-t.xy.scroll_width,a=[this.dx];t._els.dhx_cal_header[0].style.width=a[0]+r+"px";for(var s=t._min_date_timeline=t._min_date,o=t._timeline_x_dates.call(this,t.config.preserve_scale_length),l=o.displayed,d=o.total,c=0;d>c;c++)t._ignores[c]?(t._cols[c]=0,l++):t._cols[c]=Math.floor(r/(l-c)),r-=t._cols[c],a[c+1]=a[c]+t._cols[c];if(e.innerHTML="<div></div>",this.second_scale){for(var h=this.second_scale.x_unit,u=[this._trace_x[0]],_=[],f=[this.dx,this.dx],g=0,p=0;p<this._trace_x.length;p++){var v=this._trace_x[p];t._timeline_is_new_interval(h,v,u[g])&&(u[++g]=v,f[g+1]=f[g]);var m=g+1;_[g]=t._cols[p]+(_[g]||0),f[m]+=t._cols[p]}e.innerHTML="<div></div><div></div>";var y=e.firstChild;y.style.height=n+"px";var x=e.lastChild;x.style.position="relative",x.className="dhx_bottom_scale_container";for(var b=0;b<u.length;b++){var w=u[b],k=t.templates[this.name+"_second_scalex_class"](w),$=document.createElement("div");$.className="dhx_scale_bar dhx_second_scale_bar"+(k?" "+k:""),t.set_xy($,_[b]-1,n-3,f[b],0),$.innerHTML=t.templates[this.name+"_second_scale_date"](w),y.appendChild($)}}t.xy.scale_height=n,e=e.lastChild;for(var S=0;S<this._trace_x.length;S++)if(!t._ignores[S]){t._render_x_header(S,a[S],s=this._trace_x[S],e);var E=t.templates[this.name+"_scalex_class"](s);E&&(e.lastChild.className+=" "+E)}t.xy.scale_height=i;var D=this._trace_x;e.onclick=function(e){var i=t._timeline_locate_hcell(e);i&&t.callEvent("onXScaleClick",[i.x,D[i.x],e||event])},e.ondblclick=function(e){var i=t._timeline_locate_hcell(e);i&&t.callEvent("onXScaleDblClick",[i.x,D[i.x],e||event])}},t._timeline_is_new_interval=function(e,i,n){switch(e){case"hour":return i.getHours()!=n.getHours()||t._timeline_is_new_interval("day",i,n);case"day":return!(i.getDate()==n.getDate()&&i.getMonth()==n.getMonth()&&i.getFullYear()==n.getFullYear());case"week":return!(t.date.week_start(new Date(i)).valueOf()==t.date.week_start(new Date(n)).valueOf());case"month":return!(i.getMonth()==n.getMonth()&&i.getFullYear()==n.getFullYear());case"year":return!(i.getFullYear()==n.getFullYear());default:return!1}},t._timeline_reset_scale_height=function(e){if(this._header_resized&&(!e||!this.second_scale)){t.xy.scale_height/=2,this._header_resized=!1;var i=t._els.dhx_cal_header[0];i.className=i.className.replace(/ dhx_second_cal_header/gi,"")}},t._timeline_set_full_view=function(e){if(t._timeline_reset_scale_height.call(this,e),e){this.second_scale&&!this._header_resized&&(this._header_resized=t.xy.scale_height,t.xy.scale_height*=2,t._els.dhx_cal_header[0].className+=" dhx_second_cal_header"),t.set_sizes(),t._init_matrix_tooltip();var i=t._min_date;t._timeline_x_scale.call(this,t._els.dhx_cal_header[0]),t._timeline_y_scale.call(this,t._els.dhx_cal_data[0]),t._min_date=i,t._els.dhx_cal_date[0].innerHTML=t.templates[this.name+"_date"](t._min_date,t._max_date),t._mark_now&&t._mark_now(),t._timeline_reset_scale_height.call(this,e)}t._timeline_hideToolTip()},t._timeline_hideToolTip=function(){t._tooltip&&(t._tooltip.style.display="none",t._tooltip.date="")},t._timeline_showToolTip=function(e,i,n){if("cell"==e.render){var r=i.x+"_"+i.y,a=e._matrix[i.y][i.x];if(!a)return t._timeline_hideToolTip();if(a.sort(function(t,e){return t.start_date>e.start_date?1:-1}),t._tooltip){if(t._tooltip.date==r)return;t._tooltip.innerHTML=""}else{var s=t._tooltip=document.createElement("div");s.className="dhx_year_tooltip",document.body.appendChild(s),s.onclick=t._click.dhx_cal_data}for(var o="",l=0;l<a.length;l++)o+="<div class='dhx_tooltip_line' event_id='"+a[l].id+"' style='"+(a[l].color?"background-color:"+a[l].color+";":"")+(a[l].textColor?"color:"+a[l].textColor+";":"")+"'>",o+="<div class='dhx_tooltip_date'>"+(a[l]._timed?t.templates.event_date(a[l].start_date):"")+"</div>",o+="<div class='dhx_event_icon icon_details'>&nbsp;</div>",o+=t.templates[e.name+"_tooltip"](a[l].start_date,a[l].end_date,a[l])+"</div>";t._tooltip.style.display="",t._tooltip.style.top="0px",t._tooltip.style.left=document.body.offsetWidth-n.left-t._tooltip.offsetWidth<0?n.left-t._tooltip.offsetWidth+"px":n.left+i.src.offsetWidth+"px",t._tooltip.date=r,t._tooltip.innerHTML=o,t._tooltip.style.top=document.body.offsetHeight-n.top-t._tooltip.offsetHeight<0?n.top-t._tooltip.offsetHeight+i.src.offsetHeight+"px":n.top+"px"}},t._matrix_tooltip_handler=function(e){var i=t.matrix[t._mode];if(i&&"cell"==i.render){if(i){var n=t._locate_cell_timeline(e);if(e=e||event,n)return t._timeline_showToolTip(i,n,t.$domHelpers.getOffset(n.src))}t._timeline_hideToolTip()}},t._init_matrix_tooltip=function(){t._detachDomEvent(t._els.dhx_cal_data[0],"mouseover",t._matrix_tooltip_handler),dhtmlxEvent(t._els.dhx_cal_data[0],"mouseover",t._matrix_tooltip_handler)},t._set_timeline_dates=function(e){t._min_date=t.date[e.name+"_start"](new Date(t._date)),t._max_date=t.date["add_"+e.name+"_private"](t._min_date,e.x_size*e.x_step),t.date[e.x_unit+"_start"]&&(t._max_date=t.date[e.x_unit+"_start"](t._max_date)),t._table_view=!0},t._renderMatrix=function(e,i){i||(t._els.dhx_cal_data[0].scrollTop=0),t._set_timeline_dates(this),t._timeline_set_full_view.call(this,e)},t._timeline_html_index=function(e){for(var i=e.parentNode.childNodes,n=-1,r=0;r<i.length;r++)if(i[r]==e){n=r;break}var a=n;if(t._ignores_detected)for(var s in t._ignores)t._ignores[s]&&a>=1*s&&a++;return a},t._timeline_locate_hcell=function(e){for(var i=(e=e||event).target?e.target:e.srcElement;i&&"DIV"!=i.tagName;)i=i.parentNode;if(i&&"DIV"==i.tagName&&"dhx_scale_bar"==t._getClassName(i).split(" ")[0])return{x:t._timeline_html_index(i),y:-1,src:i,scale:!0}},t._locate_cell_timeline=function(e){for(var i=(e=e||event).target?e.target:e.srcElement,n={},r=t.matrix[t._mode],a=t.getActionData(e),s=t._ignores,o=0,l=0;l<r._trace_x.length-1&&!(+a.date<r._trace_x[l+1]);l++)s[l]||o++;n.x=0===o?0:l,n.y=r.order[a.section];var d=t._isRender("cell")?1:0;n.src=r._scales[a.section]?r._scales[a.section].getElementsByTagName("td")[l+d]:null;for(var c=!1;0===n.x&&"dhx_cal_data"!=t._getClassName(i)&&i.parentNode;){if("dhx_matrix_scell"==t._getClassName(i).split(" ")[0]){c=!0;break}i=i.parentNode}return c?(n.x=-1,n.src=i,n.scale=!0):n.x=l,n};var e=t._click.dhx_cal_data;t._click.dhx_marked_timespan=t._click.dhx_cal_data=function(i){var n=e.apply(this,arguments),r=t.matrix[t._mode];if(r){var a=t._locate_cell_timeline(i);a&&(a.scale?t.callEvent("onYScaleClick",[a.y,r.y_unit[a.y],i||event]):t.callEvent("onCellClick",[a.x,a.y,r._trace_x[a.x],(r._matrix[a.y]||{})[a.x]||[],i||event]))}return n},t.dblclick_dhx_matrix_cell=function(e){var i=t.matrix[t._mode];if(i){var n=t._locate_cell_timeline(e);n&&(n.scale?t.callEvent("onYScaleDblClick",[n.y,i.y_unit[n.y],e||event]):t.callEvent("onCellDblClick",[n.x,n.y,i._trace_x[n.x],(i._matrix[n.y]||{})[n.x]||[],e||event]))}};var i=t.dblclick_dhx_marked_timespan||function(){};t.dblclick_dhx_marked_timespan=function(e){return t.matrix[t._mode]?t.dblclick_dhx_matrix_cell(e):i.apply(this,arguments)},t.dblclick_dhx_matrix_scell=function(e){return t.dblclick_dhx_matrix_cell(e)},t._isRender=function(e){return t.matrix[t._mode]&&t.matrix[t._mode].render==e},t.attachEvent("onCellDblClick",function(e,i,n,r,a){if(!this.config.readonly&&("dblclick"!=a.type||this.config.dblclick_create)){var s=t.matrix[t._mode],o={};o.start_date=s._trace_x[e],o.end_date=s._trace_x[e+1]?s._trace_x[e+1]:t.date.add(s._trace_x[e],s.x_step,s.x_unit),s._start_correction&&(o.start_date=new Date(1*o.start_date+s._start_correction)),s._end_correction&&(o.end_date=new Date(o.end_date-s._end_correction)),o[s.y_property]=s.y_unit[i].key,t.addEventNow(o,null,a)}}),t.attachEvent("onBeforeDrag",function(e,i,n){return!t._isRender("cell")}),t.attachEvent("onEventChanged",function(t,e){e._timed=this.isOneDayEvent(e)}),t.attachEvent("onBeforeEventChanged",function(t,e,i,n){return t&&(t._move_delta=void 0),n&&(n._move_delta=void 0),!0}),t._is_column_visible=function(e){var i=t._get_date_index(t.matrix[t._mode],e);return!t._ignores[i]};var n=t._render_marked_timespan;t._render_marked_timespan=function(e,i,r,a,s){if(!t.config.display_marked_timespans)return[];if(t.matrix&&t.matrix[t._mode]){if(t._isRender("cell"))return;var o=t._lame_copy({},t.matrix[t._mode]);o.round_position=!1;var l=[],d=[],c=[],h=e.sections?e.sections.units||e.sections.timeline:null;if(r)c=[i],d=[r];else{var u=o.order;if(h)u.hasOwnProperty(h)&&(d.push(h),c.push(o._scales[h]));else if(o._scales)for(var _ in u)u.hasOwnProperty(_)&&(d.push(_),c.push(o._scales[_]))}if(a=a?new Date(a):t._min_date,s=s?new Date(s):t._max_date,a.valueOf()<t._min_date.valueOf()&&(a=new Date(t._min_date)),s.valueOf()>t._max_date.valueOf()&&(s=new Date(t._max_date)),!o._trace_x)return;for(var f=0;f<o._trace_x.length&&!t._is_column_visible(o._trace_x[f]);f++);if(f==o._trace_x.length)return;var g=[];if(e.days>6){var p=new Date(e.days);t.date.date_part(new Date(a))<=+p&&+s>=+p&&g.push(p)}else g.push.apply(g,t._get_dates_by_index(e.days));for(var v=e.zones,m=t._get_css_classes_by_config(e),y=0;y<d.length;y++)for(i=c[y],r=d[y],f=0;f<g.length;f++)for(var x=g[f],b=0;b<v.length;b+=2){var w=v[b+1],k=new Date(+x+60*v[b]*1e3),$=new Date(+x+60*w*1e3);if(k=new Date(k.valueOf()+1e3*(k.getTimezoneOffset()-x.getTimezoneOffset())*60),($=new Date($.valueOf()+1e3*($.getTimezoneOffset()-x.getTimezoneOffset())*60))>a&&s>k){var S=t._get_block_by_config(e);S.className=m;var E=t._timeline_getX({start_date:k},!1,o)-1,D=t._timeline_getX({start_date:$},!1,o)-1,T=Math.max(1,D-E-1);S.style.cssText="height: "+(o._section_height[r]-1||o.dy-1)+"px; left: "+E+"px; width: "+T+"px; top: 0;",i.insertBefore(S,i.firstChild),l.push(S)}}return l}return n.apply(t,[e,i,r])};var r=t._append_mark_now;t._append_mark_now=function(e,i){if(t.matrix&&t.matrix[t._mode]){var n=t._currentDate(),a=t._get_zone_minutes(n),s={days:+t.date.date_part(n),zones:[a,a+1],css:"dhx_matrix_now_time",type:"dhx_now_time"};return t._render_marked_timespan(s)}return r.apply(t,[e,i])};var a=t._mark_timespans;t._mark_timespans=function(){if(t.matrix&&t.matrix[t.getState().mode]){for(var e=[],i=t.matrix[t.getState().mode],n=i.y_unit,r=0;r<n.length;r++){var s=n[r].key,o=t._on_scale_add_marker(i._scales[s],s);e.push.apply(e,o)}return e}return a.apply(this,arguments)};var s=t._on_scale_add_marker;t._on_scale_add_marker=function(e,i){if(t.matrix&&t.matrix[t._mode]){var n=[],r=t._marked_timespans;if(r&&t.matrix&&t.matrix[t._mode])for(var a=t._mode,o=t._max_date,l=r.global,d=t.date.date_part(new Date(t._min_date));o>d;d=t.date.add(d,1,"day")){var c=+d,h=d.getDay(),u=[];if(u.push.apply(u,t._get_configs_to_render(l[c]||l[h])),r[a]&&r[a][i]){var _=[],f=t._get_types_to_render(r[a][i][h],r[a][i][c]);_.push.apply(_,t._get_configs_to_render(f)),_.length&&(u=_)}for(var g=0;g<u.length;g++){var p=u[g],v=p.days;7>v?(v=c,n.push.apply(n,t._render_marked_timespan(p,e,i,d,t.date.add(d,1,"day"))),v=h):n.push.apply(n,t._render_marked_timespan(p,e,i,d,t.date.add(d,1,"day")))}}return n}return s.apply(this,arguments)},t._resolve_timeline_section=function(t,e){for(var i=0,n=0;i<this._colsS.heights.length&&!((n+=this._colsS.heights[i])>e.y);i++);t.y_unit[i]||(i=t.y_unit.length-1),this._drag_event&&!this._drag_event._orig_section&&(this._drag_event._orig_section=t.y_unit[i].key),e.fields={},i>=0&&t.y_unit[i]&&(e.section=e.fields[t.y_property]=t.y_unit[i].key)},t._update_timeline_section=function(t){var e=t.view,i=t.event,n=t.pos;if(i){if(i[e.y_property]!=n.section){var r=this._get_timeline_event_height(i,e);i._sorder=this._get_dnd_order(i._sorder,r,e._section_height[n.section])}i[e.y_property]=n.section}},t._get_date_index=function(t,e){for(var i=0,n=t._trace_x;i<n.length-1&&+e>=+n[i+1];)i++;return i},t._timeline_drag_date=function(e,i){for(var n,r,a,s=e,o=i,l=0,d=0;d<=this._cols.length-1;d++)if((l+=r=this._cols[d])>o){n=0>(n=(o-(l-r))/r)?0:n;break}if(s.round_position){var c=1,h=t.getState().drag_mode;h&&"move"!=h&&"create"!=h&&(c=.5),n>=c&&d++,n=0}if(0===d&&this._ignores[0])for(d=1,n=0;this._ignores[d];)d++;else if(d==this._cols.length&&this._ignores[d-1]){for(d=this._cols.length-1,n=0;this._ignores[d];)d--;d++}return d>=s._trace_x.length?(a=t.date.add(s._trace_x[s._trace_x.length-1],s.x_step,s.x_unit),s._end_correction&&(a=new Date(a-s._end_correction))):a=new Date(+s._trace_x[d]+(n*r*s._step+s._start_correction)),a},t.attachEvent("onBeforeTodayDisplayed",function(){for(var e in t.matrix){var i=t.matrix[e];i.x_start=i._original_x_start}return!0}),t.attachEvent("onOptionsLoad",function(){for(var e in t.matrix){var i=t.matrix[e];for(i.order={},t.callEvent("onOptionsLoadStart",[]),e=0;e<i.y_unit.length;e++)i.order[i.y_unit[e].key]=e;t.callEvent("onOptionsLoadFinal",[]),t._date&&i.name==t._mode&&t.setCurrentView(t._date,t._mode)}}),t.attachEvent("onSchedulerResize",function(){return!t.matrix[this._mode]||(t._renderMatrix.call(t.matrix[this._mode],!0,!0),!1)}),t.attachEvent("onBeforeDrag",function(e,i,n){if("resize"==i){var r=t._getClassName(n.target||n.srcElement);t._drag_from_start=r.indexOf("dhx_event_resize_end")<0}return!0})},t._temp_matrix_scope()}),Scheduler.plugin(function(t){var e;t.attachEvent("onTimelineCreated",function(e){"tree"==e.render&&(e.y_unit_original=e.y_unit,e.y_unit=t._getArrayToDisplay(e.y_unit_original),t.attachEvent("onOptionsLoadStart",function(){e.y_unit=t._getArrayToDisplay(e.y_unit_original)}),t.form_blocks[e.name]={render:function(t){return"<div class='dhx_section_timeline' style='overflow: hidden; height: "+t.height+"px'></div>"},set_value:function(e,i,n,r){var a=t._getArrayForSelect(t.matrix[r.type].y_unit_original,r.type);e.innerHTML="";var s=document.createElement("select");e.appendChild(s);var o=e.getElementsByTagName("select")[0];!o._dhx_onchange&&r.onchange&&(o.onchange=r.onchange,o._dhx_onchange=!0);for(var l=0;l<a.length;l++){var d=document.createElement("option");d.value=a[l].key,d.value==n[t.matrix[r.type].y_property]&&(d.selected=!0),d.innerHTML=a[l].label,o.appendChild(d)}},get_value:function(t,e,i){return t.firstChild.value},focus:function(t){}})}),t.attachEvent("onBeforeSectionRender",function(e,i,n){var r,a,s,o,l,d,c={};return"tree"==e&&(o="dhx_matrix_scell",i.children?(r=n.folder_dy||n.dy,n.folder_dy&&!n.section_autoheight&&(s="height:"+n.folder_dy+"px;"),a="dhx_row_folder",o+=" folder",o+=i.open?" opened":" closed",l="<div class='dhx_scell_expand'>"+(i.open?"-":"+")+"</div>",d=n.folder_events_available?"dhx_data_table folder_events":"dhx_data_table folder"):(r=n.dy,a="dhx_row_item",o+=" item",l="",d="dhx_data_table"),c={height:r,style_height:s,tr_className:a,td_className:o+=t.templates[n.name+"_scaley_class"](i.key,i.label,i)?" "+t.templates[n.name+"_scaley_class"](i.key,i.label,i):"",td_content:"<div class='dhx_scell_level"+i.level+"'>"+l+"<div class='dhx_scell_name'>"+(t.templates[n.name+"_scale_label"](i.key,i.label,i)||i.label)+"</div></div>",table_className:d}),c}),t.attachEvent("onBeforeEventChanged",function(i,n,r){if(t._isRender("tree"))for(var a=t._get_event_sections?t._get_event_sections(i):[i[t.matrix[t._mode].y_property]],s=0;s<a.length;s++){var o=t.getSection(a[s]);if(o&&o.children&&!t.matrix[t._mode].folder_events_available)return r||(i[t.matrix[t._mode].y_property]=e),!1}return!0}),t.attachEvent("onBeforeDrag",function(i,n,r){if(t._isRender("tree")){var a,s=t._locate_cell_timeline(r);if(s&&(a=t.matrix[t._mode].y_unit[s.y].key,t.matrix[t._mode].y_unit[s.y].children&&!t.matrix[t._mode].folder_events_available))return!1;var o=t.getEvent(i),l=t.matrix[t._mode].y_property;e=o&&o[l]?o[l]:a}return!0}),t._getArrayToDisplay=function(e){var i=[],n=function(e,r){for(var a=r||0,s=0;s<e.length;s++)e[s].level=a,e[s].children&&void 0===e[s].key&&(e[s].key=t.uid()),i.push(e[s]),e[s].open&&e[s].children&&n(e[s].children,a+1)};return n(e),i},t._getArrayForSelect=function(e,i){var n=[],r=function(e){for(var a=0;a<e.length;a++)t.matrix[i].folder_events_available?n.push(e[a]):e[a].children||n.push(e[a]),e[a].children&&r(e[a].children,i)};return r(e),n},t._toggleFolderDisplay=function(e,i,n){var r=function(t,e,i,n){for(var a=0;a<e.length&&(e[a].key!=t&&!n||!e[a].children||(e[a].open=void 0!==i?i:!e[a].open,n));a++)e[a].children&&r(t,e[a].children,i,n)},a=t.getSection(e);void 0!==i||n||(i=!a.open),t.callEvent("onBeforeFolderToggle",[a,i,n])&&(r(e,t.matrix[t._mode].y_unit_original,i,n),t.matrix[t._mode].y_unit=t._getArrayToDisplay(t.matrix[t._mode].y_unit_original),t.callEvent("onOptionsLoad",[]),t.callEvent("onAfterFolderToggle",[a,i,n]))},t.attachEvent("onCellClick",function(e,i,n,r,a){t._isRender("tree")&&(t.matrix[t._mode].folder_events_available||void 0!==t.matrix[t._mode].y_unit[i]&&t.matrix[t._mode].y_unit[i].children&&t._toggleFolderDisplay(t.matrix[t._mode].y_unit[i].key))}),t.attachEvent("onYScaleClick",function(e,i,n){t._isRender("tree")&&i.children&&t._toggleFolderDisplay(i.key)}),t.getSection=function(e){if(t._isRender("tree")){var i,n=function(t,e){for(var r=0;r<e.length;r++)e[r].key==t&&(i=e[r]),e[r].children&&n(t,e[r].children)};return n(e,t.matrix[t._mode].y_unit_original),i||null}},t.deleteSection=function(e){if(t._isRender("tree")){var i=!1,n=function(t,e){for(var r=0;r<e.length&&(e[r].key==t&&(e.splice(r,1),i=!0),!i);r++)e[r].children&&n(t,e[r].children)};return n(e,t.matrix[t._mode].y_unit_original),t.matrix[t._mode].y_unit=t._getArrayToDisplay(t.matrix[t._mode].y_unit_original),t.callEvent("onOptionsLoad",[]),i}},t.deleteAllSections=function(){t._isRender("tree")&&(t.matrix[t._mode].y_unit_original=[],t.matrix[t._mode].y_unit=t._getArrayToDisplay(t.matrix[t._mode].y_unit_original),t.callEvent("onOptionsLoad",[]))},t.addSection=function(e,i){if(t._isRender("tree")){var n=!1,r=function(t,e,a){if(i)for(var s=0;s<a.length&&(a[s].key==e&&a[s].children&&(a[s].children.push(t),n=!0),!n);s++)a[s].children&&r(t,e,a[s].children);else a.push(t),n=!0};return r(e,i,t.matrix[t._mode].y_unit_original),t.matrix[t._mode].y_unit=t._getArrayToDisplay(t.matrix[t._mode].y_unit_original),t.callEvent("onOptionsLoad",[]),n}},t.openAllSections=function(){t._isRender("tree")&&t._toggleFolderDisplay(1,!0,!0)},t.closeAllSections=function(){t._isRender("tree")&&t._toggleFolderDisplay(1,!1,!0)},t.openSection=function(e){t._isRender("tree")&&t._toggleFolderDisplay(e,!0)},t.closeSection=function(e){t._isRender("tree")&&t._toggleFolderDisplay(e,!1)}}),Scheduler.plugin(function(t){!function(){function e(e){t._get_section_view()&&e&&(i=t.getEvent(e)[t._get_section_property()])}var i,n;t.config.collision_limit=1,t.attachEvent("onBeforeDrag",function(t){return e(t),!0}),t.attachEvent("onBeforeLightbox",function(i){var r=t.getEvent(i);return n=[r.start_date,r.end_date],e(i),!0}),t.attachEvent("onEventChanged",function(e){if(!e||!t.getEvent(e))return!0;var i=t.getEvent(e);if(!t.checkCollision(i)){if(!n)return!1;i.start_date=n[0],i.end_date=n[1],i._timed=this.isOneDayEvent(i)}return!0}),t.attachEvent("onBeforeEventChanged",function(e,i,n){return t.checkCollision(e)}),t.attachEvent("onEventAdded",function(e,i){t.checkCollision(i)||t.deleteEvent(e)}),t.attachEvent("onEventSave",function(e,i,n){if((i=t._lame_clone(i)).id=e,!i.start_date||!i.end_date){var r=t.getEvent(e);i.start_date=new Date(r.start_date),i.end_date=new Date(r.end_date)}return i.rec_type&&t._roll_back_dates(i),t.checkCollision(i)}),t._check_sections_collision=function(e,i){var n=t._get_section_property();return e[n]==i[n]&&e.id!=i.id},t.checkCollision=function(e){var n=[],r=t.config.collision_limit;if(e.rec_type)for(var a=t.getRecDates(e),s=0;s<a.length;s++)for(var o=t.getEvents(a[s].start_date,a[s].end_date),l=0;l<o.length;l++)(o[l].event_pid||o[l].id)!=e.id&&n.push(o[l]);else{n=t.getEvents(e.start_date,e.end_date);for(var d=0;d<n.length;d++)if(n[d].id==e.id){n.splice(d,1);break}}var c=t._get_section_view(),h=t._get_section_property(),u=!0;if(c){var _=0;for(d=0;d<n.length;d++)n[d].id!=e.id&&this._check_sections_collision(n[d],e)&&_++;_>=r&&(u=!1)}else n.length>=r&&(u=!1);if(!u){var f=!t.callEvent("onEventCollision",[e,n]);return f||(e[h]=i||e[h]),f}return u}}()}),function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var i=[],n=t.document,r=Object.getPrototypeOf,a=i.slice,s=i.concat,o=i.push,l=i.indexOf,d={},c=d.toString,h=d.hasOwnProperty,u=h.toString,_=u.call(Object),f={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},p=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(t,e,i){var r,a=(e=e||n).createElement("script");if(a.text=t,i)for(r in v)i[r]&&(a[r]=i[r]);e.head.appendChild(a).parentNode.removeChild(a)}function y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[c.call(t)]||"object":typeof t}var x=function(t,e){return new x.fn.init(t,e)},b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(t){var e=!!t&&"length"in t&&t.length,i=y(t);return!g(t)&&!p(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}x.fn=x.prototype={jquery:"3.3.1",constructor:x,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice},x.extend=x.fn.extend=function(){var t,e,i,n,r,a,s=arguments[0]||{},o=1,l=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[o]||{},o++),"object"==typeof s||g(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(t=arguments[o]))for(e in t)i=s[e],s!==(n=t[e])&&(d&&n&&(x.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,a=i&&Array.isArray(i)?i:[]):a=i&&x.isPlainObject(i)?i:{},s[e]=x.extend(d,a,n)):void 0!==n&&(s[e]=n));return s},x.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==c.call(t)||(e=r(t))&&("function"!=typeof(i=h.call(e,"constructor")&&e.constructor)||u.call(i)!==_))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){m(t)},each:function(t,e){var i,n=0;if(w(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(b,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(w(Object(t))?x.merge(i,"string"==typeof t?[t]:t):o.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:l.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;n<i;n++)t[r++]=e[n];return t.length=r,t},grep:function(t,e,i){for(var n=[],r=0,a=t.length,s=!i;r<a;r++)!e(t[r],r)!==s&&n.push(t[r]);return n},map:function(t,e,i){var n,r,a=0,o=[];if(w(t))for(n=t.length;a<n;a++)null!=(r=e(t[a],a,i))&&o.push(r);else for(a in t)null!=(r=e(t[a],a,i))&&o.push(r);return s.apply([],o)},guid:1,support:f}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=i[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});var k=function(t){var e,i,n,r,a,s,o,l,d,c,h,u,_,f,g,p,v,m,y,x="sizzle"+1*new Date,b=t.document,w=0,k=0,$=st(),S=st(),E=st(),D=function(t,e){return t===e&&(h=!0),0},T={}.hasOwnProperty,C=[],A=C.pop,L=C.push,M=C.push,N=C.slice,O=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",z="\\["+I+"*("+j+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+I+"*\\]",P=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",R=new RegExp(I+"+","g"),B=new RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),W=new RegExp("^"+I+"*,"+I+"*"),U=new RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),F=new RegExp("="+I+"*([^\\]'\"]*?)"+I+"*\\]","g"),V=new RegExp(P),X=new RegExp("^"+j+"$"),q={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),tt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},nt=function(){u()},rt=mt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{M.apply(C=N.call(b.childNodes),b.childNodes)}catch(t){M={apply:C.length?function(t,e){L.apply(t,N.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function at(t,e,n,r){var a,o,d,c,h,f,v,m=e&&e.ownerDocument,w=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return n;if(!r&&((e?e.ownerDocument||e:b)!==_&&u(e),e=e||_,g)){if(11!==w&&(h=K.exec(t)))if(a=h[1]){if(9===w){if(!(d=e.getElementById(a)))return n;if(d.id===a)return n.push(d),n}else if(m&&(d=m.getElementById(a))&&y(e,d)&&d.id===a)return n.push(d),n}else{if(h[2])return M.apply(n,e.getElementsByTagName(t)),n;if((a=h[3])&&i.getElementsByClassName&&e.getElementsByClassName)return M.apply(n,e.getElementsByClassName(a)),n}if(i.qsa&&!E[t+" "]&&(!p||!p.test(t))){if(1!==w)m=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((c=e.getAttribute("id"))?c=c.replace(et,it):e.setAttribute("id",c=x),o=(f=s(t)).length;o--;)f[o]="#"+c+" "+vt(f[o]);v=f.join(","),m=Q.test(t)&&gt(e.parentNode)||e}if(v)try{return M.apply(n,m.querySelectorAll(v)),n}catch(t){}finally{c===x&&e.removeAttribute("id")}}}return l(t.replace(B,"$1"),e,n,r)}function st(){var t=[];return function e(i,r){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function ot(t){return t[x]=!0,t}function lt(t){var e=_.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var i=t.split("|"),r=i.length;r--;)n.attrHandle[i[r]]=e}function ct(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ut(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function _t(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ft(t){return ot(function(e){return e=+e,ot(function(i,n){for(var r,a=t([],i.length,e),s=a.length;s--;)i[r=a[s]]&&(i[r]=!(n[r]=i[r]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=at.support={},a=at.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},u=at.setDocument=function(t){var e,r,s=t?t.ownerDocument||t:b;return s!==_&&9===s.nodeType&&s.documentElement?(f=(_=s).documentElement,g=!a(_),b!==_&&(r=_.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",nt,!1):r.attachEvent&&r.attachEvent("onunload",nt)),i.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),i.getElementsByTagName=lt(function(t){return t.appendChild(_.createComment("")),!t.getElementsByTagName("*").length}),i.getElementsByClassName=J.test(_.getElementsByClassName),i.getById=lt(function(t){return f.appendChild(t).id=x,!_.getElementsByName||!_.getElementsByName(x).length}),i.getById?(n.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var i,n,r,a=e.getElementById(t);if(a){if((i=a.getAttributeNode("id"))&&i.value===t)return[a];for(r=e.getElementsByName(t),n=0;a=r[n++];)if((i=a.getAttributeNode("id"))&&i.value===t)return[a]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,a=e.getElementsByTagName(t);if("*"===t){for(;i=a[r++];)1===i.nodeType&&n.push(i);return n}return a},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],p=[],(i.qsa=J.test(_.querySelectorAll))&&(lt(function(t){f.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&p.push("[*^$]="+I+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||p.push("\\["+I+"*(?:value|"+H+")"),t.querySelectorAll("[id~="+x+"-]").length||p.push("~="),t.querySelectorAll(":checked").length||p.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||p.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=_.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&p.push("name"+I+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&p.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),p.push(",.*:")})),(i.matchesSelector=J.test(m=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&lt(function(t){i.disconnectedMatch=m.call(t,"*"),m.call(t,"[s!='']:x"),v.push("!=",P)}),p=p.length&&new RegExp(p.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(f.compareDocumentPosition),y=e||J.test(f.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},D=e?function(t,e){if(t===e)return h=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===_||t.ownerDocument===b&&y(b,t)?-1:e===_||e.ownerDocument===b&&y(b,e)?1:c?O(c,t)-O(c,e):0:4&n?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,r=t.parentNode,a=e.parentNode,s=[t],o=[e];if(!r||!a)return t===_?-1:e===_?1:r?-1:a?1:c?O(c,t)-O(c,e):0;if(r===a)return ct(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)o.unshift(i);for(;s[n]===o[n];)n++;return n?ct(s[n],o[n]):s[n]===b?-1:o[n]===b?1:0},_):_},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==_&&u(t),e=e.replace(F,"='$1']"),i.matchesSelector&&g&&!E[e+" "]&&(!v||!v.test(e))&&(!p||!p.test(e)))try{var n=m.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return at(e,_,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!==_&&u(t),y(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==_&&u(t);var r=n.attrHandle[e.toLowerCase()],a=r&&T.call(n.attrHandle,e.toLowerCase())?r(t,e,!g):void 0;return void 0!==a?a:i.attributes||!g?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},at.escape=function(t){return(t+"").replace(et,it)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],r=0,a=0;if(h=!i.detectDuplicates,c=!i.sortStable&&t.slice(0),t.sort(D),h){for(;e=t[a++];)e===t[a]&&(r=n.push(a));for(;r--;)t.splice(n[r],1)}return c=null,t},r=at.getText=function(t){var e,i="",n=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=r(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[n++];)i+=r(e);return i},(n=at.selectors={cacheLength:50,createPseudo:ot,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Z,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Z,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&V.test(i)&&(e=s(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Z,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=$[t+" "];return e||(e=new RegExp("(^|"+I+")"+t+"("+I+"|$)"))&&$(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(n){var r=at.attr(n,t);return null==r?"!="===e:!e||(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r.replace(R," ")+" ").indexOf(i)>-1:"|="===e&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,r){var a="nth"!==t.slice(0,3),s="last"!==t.slice(-4),o="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var d,c,h,u,_,f,g=a!==s?"nextSibling":"previousSibling",p=e.parentNode,v=o&&e.nodeName.toLowerCase(),m=!l&&!o,y=!1;if(p){if(a){for(;g;){for(u=e;u=u[g];)if(o?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?p.firstChild:p.lastChild],s&&m){for(y=(_=(d=(c=(h=(u=p)[x]||(u[x]={}))[u.uniqueID]||(h[u.uniqueID]={}))[t]||[])[0]===w&&d[1])&&d[2],u=_&&p.childNodes[_];u=++_&&u&&u[g]||(y=_=0)||f.pop();)if(1===u.nodeType&&++y&&u===e){c[t]=[w,_,y];break}}else if(m&&(y=_=(d=(c=(h=(u=e)[x]||(u[x]={}))[u.uniqueID]||(h[u.uniqueID]={}))[t]||[])[0]===w&&d[1]),!1===y)for(;(u=++_&&u&&u[g]||(y=_=0)||f.pop())&&((o?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++y||(m&&((c=(h=u[x]||(u[x]={}))[u.uniqueID]||(h[u.uniqueID]={}))[t]=[w,y]),u!==e)););return(y-=r)===n||y%n==0&&y/n>=0}}},PSEUDO:function(t,e){var i,r=n.pseudos[t]||n.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return r[x]?r(e):r.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?ot(function(t,i){for(var n,a=r(t,e),s=a.length;s--;)t[n=O(t,a[s])]=!(i[n]=a[s])}):function(t){return r(t,0,i)}):r}},pseudos:{not:ot(function(t){var e=[],i=[],n=o(t.replace(B,"$1"));return n[x]?ot(function(t,e,i,r){for(var a,s=n(t,null,r,[]),o=t.length;o--;)(a=s[o])&&(t[o]=!(e[o]=a))}):function(t,r,a){return e[0]=t,n(e,null,a,i),e[0]=null,!i.pop()}}),has:ot(function(t){return function(e){return at(t,e).length>0}}),contains:ot(function(t){return t=t.replace(Z,tt),function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}}),lang:ot(function(t){return X.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(Z,tt).toLowerCase(),function(e){var i;do{if(i=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:_t(!1),disabled:_t(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return G.test(t.nodeName)},input:function(t){return Y.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft(function(){return[0]}),last:ft(function(t,e){return[e-1]}),eq:ft(function(t,e,i){return[i<0?i+e:i]}),even:ft(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:ft(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:ft(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:ft(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ut(e);function pt(){}function vt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function mt(t,e,i){var n=e.dir,r=e.next,a=r||n,s=i&&"parentNode"===a,o=k++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r);return!1}:function(e,i,l){var d,c,h,u=[w,o];if(l){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||s)if(c=(h=e[x]||(e[x]={}))[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[n]||e;else{if((d=c[a])&&d[0]===w&&d[1]===o)return u[2]=d[2];if(c[a]=u,u[2]=t(e,i,l))return!0}return!1}}function yt(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function xt(t,e,i,n,r){for(var a,s=[],o=0,l=t.length,d=null!=e;o<l;o++)(a=t[o])&&(i&&!i(a,n,r)||(s.push(a),d&&e.push(o)));return s}function bt(t,e,i,n,r,a){return n&&!n[x]&&(n=bt(n)),r&&!r[x]&&(r=bt(r,a)),ot(function(a,s,o,l){var d,c,h,u=[],_=[],f=s.length,g=a||function(t,e,i){for(var n=0,r=e.length;n<r;n++)at(t,e[n],i);return i}(e||"*",o.nodeType?[o]:o,[]),p=!t||!a&&e?g:xt(g,u,t,o,l),v=i?r||(a?t:f||n)?[]:s:p;if(i&&i(p,v,o,l),n)for(d=xt(v,_),n(d,[],o,l),c=d.length;c--;)(h=d[c])&&(v[_[c]]=!(p[_[c]]=h));if(a){if(r||t){if(r){for(d=[],c=v.length;c--;)(h=v[c])&&d.push(p[c]=h);r(null,v=[],d,l)}for(c=v.length;c--;)(h=v[c])&&(d=r?O(a,h):u[c])>-1&&(a[d]=!(s[d]=h))}}else v=xt(v===s?v.splice(f,v.length):v),r?r(null,s,v,l):M.apply(s,v)})}function wt(t){for(var e,i,r,a=t.length,s=n.relative[t[0].type],o=s||n.relative[" "],l=s?1:0,c=mt(function(t){return t===e},o,!0),h=mt(function(t){return O(e,t)>-1},o,!0),u=[function(t,i,n){var r=!s&&(n||i!==d)||((e=i).nodeType?c(t,i,n):h(t,i,n));return e=null,r}];l<a;l++)if(i=n.relative[t[l].type])u=[mt(yt(u),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[x]){for(r=++l;r<a&&!n.relative[t[r].type];r++);return bt(l>1&&yt(u),l>1&&vt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(B,"$1"),i,l<r&&wt(t.slice(l,r)),r<a&&wt(t=t.slice(r)),r<a&&vt(t))}u.push(i)}return yt(u)}function kt(t,e){var i=e.length>0,r=t.length>0,a=function(a,s,o,l,c){var h,f,p,v=0,m="0",y=a&&[],x=[],b=d,k=a||r&&n.find.TAG("*",c),$=w+=null==b?1:Math.random()||.1,S=k.length;for(c&&(d=s===_||s||c);m!==S&&null!=(h=k[m]);m++){if(r&&h){for(f=0,s||h.ownerDocument===_||(u(h),o=!g);p=t[f++];)if(p(h,s||_,o)){l.push(h);break}c&&(w=$)}i&&((h=!p&&h)&&v--,a&&y.push(h))}if(v+=m,i&&m!==v){for(f=0;p=e[f++];)p(y,x,s,o);if(a){if(v>0)for(;m--;)y[m]||x[m]||(x[m]=A.call(l));x=xt(x)}M.apply(l,x),c&&!a&&x.length>0&&v+e.length>1&&at.uniqueSort(l)}return c&&(w=$,d=b),y};return i?ot(a):a}return pt.prototype=n.filters=n.pseudos,n.setFilters=new pt,s=at.tokenize=function(t,e){var i,r,a,s,o,l,d,c=S[t+" "];if(c)return e?0:c.slice(0);for(o=t,l=[],d=n.preFilter;o;){for(s in i&&!(r=W.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),i=!1,(r=U.exec(o))&&(i=r.shift(),a.push({value:i,type:r[0].replace(B," ")}),o=o.slice(i.length)),n.filter)!(r=q[s].exec(o))||d[s]&&!(r=d[s](r))||(i=r.shift(),a.push({value:i,type:s,matches:r}),o=o.slice(i.length));if(!i)break}return e?o.length:o?at.error(t):S(t,l).slice(0)},o=at.compile=function(t,e){var i,n=[],r=[],a=E[t+" "];if(!a){for(e||(e=s(t)),i=e.length;i--;)(a=wt(e[i]))[x]?n.push(a):r.push(a);(a=E(t,kt(r,n))).selector=t}return a},l=at.select=function(t,e,i,r){var a,l,d,c,h,u="function"==typeof t&&t,_=!r&&s(t=u.selector||t);if(i=i||[],1===_.length){if((l=_[0]=_[0].slice(0)).length>2&&"ID"===(d=l[0]).type&&9===e.nodeType&&g&&n.relative[l[1].type]){if(!(e=(n.find.ID(d.matches[0].replace(Z,tt),e)||[])[0]))return i;u&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(a=q.needsContext.test(t)?0:l.length;a--&&!n.relative[c=(d=l[a]).type];)if((h=n.find[c])&&(r=h(d.matches[0].replace(Z,tt),Q.test(l[0].type)&&gt(e.parentNode)||e))){if(l.splice(a,1),!(t=r.length&&vt(l)))return M.apply(i,r),i;break}}return(u||o(t,_))(r,e,!g,i,!e||Q.test(t)&&gt(e.parentNode)||e),i},i.sortStable=x.split("").sort(D).join("")===x,i.detectDuplicates=!!h,u(),i.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(_.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||dt("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),i.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||dt("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||dt(H,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),at}(t);x.find=k,x.expr=k.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=k.uniqueSort,x.text=k.getText,x.isXMLDoc=k.isXML,x.contains=k.contains,x.escapeSelector=k.escape;var $=function(t,e,i){for(var n=[],r=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&x(t).is(i))break;n.push(t)}return n},S=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},E=x.expr.match.needsContext;function D(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function C(t,e,i){return g(e)?x.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?x.grep(t,function(t){return t===e!==i}):"string"!=typeof e?x.grep(t,function(t){return l.call(e,t)>-1!==i}):x.filter(e,t,i)}x.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?x.find.matchesSelector(n,t)?[n]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,i,n=this.length,r=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<n;e++)if(x.contains(r[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)x.find(t,r[e],i);return n>1?x.uniqueSort(i):i},filter:function(t){return this.pushStack(C(this,t||[],!1))},not:function(t){return this.pushStack(C(this,t||[],!0))},is:function(t){return!!C(this,"string"==typeof t&&E.test(t)?x(t):t||[],!1).length}});var A,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,i){var r,a;if(!t)return this;if(i=i||A,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!r[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(r[1]){if(x.merge(this,x.parseHTML(r[1],(e=e instanceof x?e[0]:e)&&e.nodeType?e.ownerDocument||e:n,!0)),T.test(r[1])&&x.isPlainObject(e))for(r in e)g(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(a=n.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==i.ready?i.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,A=x(n);var M=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function O(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,r=this.length,a=[],s="string"!=typeof t&&x(t);if(!E.test(t))for(;n<r;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&x.find.matchesSelector(i,t))){a.push(i);break}return this.pushStack(a.length>1?x.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?l.call(x(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return $(t,"parentNode")},parentsUntil:function(t,e,i){return $(t,"parentNode",i)},next:function(t){return O(t,"nextSibling")},prev:function(t){return O(t,"previousSibling")},nextAll:function(t){return $(t,"nextSibling")},prevAll:function(t){return $(t,"previousSibling")},nextUntil:function(t,e,i){return $(t,"nextSibling",i)},prevUntil:function(t,e,i){return $(t,"previousSibling",i)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){return D(t,"iframe")?t.contentDocument:(D(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(i,n){var r=x.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=x.filter(n,r)),this.length>1&&(N[t]||x.uniqueSort(r),M.test(t)&&r.reverse()),this.pushStack(r)}});var H=/[^\x20\t\r\n\f]+/g;function I(t){return t}function j(t){throw t}function z(t,e,i,n){var r;try{t&&g(r=t.promise)?r.call(t).done(e).fail(i):t&&g(r=t.then)?r.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}x.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return x.each(t.match(H)||[],function(t,i){e[i]=!0}),e}(t):x.extend({},t);var e,i,n,r,a=[],s=[],o=-1,l=function(){for(r=r||t.once,n=e=!0;s.length;o=-1)for(i=s.shift();++o<a.length;)!1===a[o].apply(i[0],i[1])&&t.stopOnFalse&&(o=a.length,i=!1);t.memory||(i=!1),e=!1,r&&(a=i?[]:"")},d={add:function(){return a&&(i&&!e&&(o=a.length-1,s.push(i)),function e(i){x.each(i,function(i,n){g(n)?t.unique&&d.has(n)||a.push(n):n&&n.length&&"string"!==y(n)&&e(n)})}(arguments),i&&!e&&l()),this},remove:function(){return x.each(arguments,function(t,e){for(var i;(i=x.inArray(e,a,i))>-1;)a.splice(i,1),i<=o&&o--}),this},has:function(t){return t?x.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=i="",this},disabled:function(){return!a},lock:function(){return r=s=[],i||e||(a=i=""),this},locked:function(){return!!r},fireWith:function(t,i){return r||(i=[t,(i=i||[]).slice?i.slice():i],s.push(i),e||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},x.extend({Deferred:function(e){var i=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(e){x.each(i,function(i,n){var r=g(t[n[4]])&&t[n[4]];a[n[1]](function(){var t=r&&r.apply(this,arguments);t&&g(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[n[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,n,r){var a=0;function s(e,i,n,r){return function(){var o=this,l=arguments,d=function(){var t,d;if(!(e<a)){if((t=n.apply(o,l))===i.promise())throw new TypeError("Thenable self-resolution");g(d=t&&("object"==typeof t||"function"==typeof t)&&t.then)?r?d.call(t,s(a,i,I,r),s(a,i,j,r)):d.call(t,s(++a,i,I,r),s(a,i,j,r),s(a,i,I,i.notifyWith)):(n!==I&&(o=void 0,l=[t]),(r||i.resolveWith)(o,l))}},c=r?d:function(){try{d()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,c.stackTrace),e+1>=a&&(n!==j&&(o=void 0,l=[t]),i.rejectWith(o,l))}};e?c():(x.Deferred.getStackHook&&(c.stackTrace=x.Deferred.getStackHook()),t.setTimeout(c))}}return x.Deferred(function(t){i[0][3].add(s(0,t,g(r)?r:I,t.notifyWith)),i[1][3].add(s(0,t,g(e)?e:I)),i[2][3].add(s(0,t,g(n)?n:j))}).promise()},promise:function(t){return null!=t?x.extend(t,r):r}},a={};return x.each(i,function(t,e){var s=e[2],o=e[5];r[e[1]]=s.add,o&&s.add(function(){n=o},i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),s.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=s.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(t){var e=arguments.length,i=e,n=Array(i),r=a.call(arguments),s=x.Deferred(),o=function(t){return function(i){n[t]=this,r[t]=arguments.length>1?a.call(arguments):i,--e||s.resolveWith(n,r)}};if(e<=1&&(z(t,s.done(o(i)).resolve,s.reject,!e),"pending"===s.state()||g(r[i]&&r[i].then)))return s.then();for(;i--;)z(r[i],o(i),s.reject);return s.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&P.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},x.readyException=function(e){t.setTimeout(function(){throw e})};var R=x.Deferred();function B(){n.removeEventListener("DOMContentLoaded",B),t.removeEventListener("load",B),x.ready()}x.fn.ready=function(t){return R.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==t&&--x.readyWait>0||R.resolveWith(n,[x]))}}),x.ready.then=R.then,"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?t.setTimeout(x.ready):(n.addEventListener("DOMContentLoaded",B),t.addEventListener("load",B));var W=function(t,e,i,n,r,a,s){var o=0,l=t.length,d=null==i;if("object"===y(i))for(o in r=!0,i)W(t,e,o,i[o],!0,a,s);else if(void 0!==n&&(r=!0,g(n)||(s=!0),d&&(s?(e.call(t,n),e=null):(d=e,e=function(t,e,i){return d.call(x(t),i)})),e))for(;o<l;o++)e(t[o],i,s?n:n.call(t[o],o,e(t[o],i)));return r?t:d?e.call(t):l?e(t[0],i):a},U=/^-ms-/,F=/-([a-z])/g;function V(t,e){return e.toUpperCase()}function X(t){return t.replace(U,"ms-").replace(F,V)}var q=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Y(){this.expando=x.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,r=this.cache(t);if("string"==typeof e)r[X(e)]=i;else for(n in e)r[X(n)]=e[n];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(X):(e=X(e))in n?[e]:e.match(H)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||x.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var G=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function Z(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(Q,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:K.test(t)?JSON.parse(t):t)}(i)}catch(t){}J.set(t,e,i)}else i=void 0;return i}x.extend({hasData:function(t){return J.hasData(t)||G.hasData(t)},data:function(t,e,i){return J.access(t,e,i)},removeData:function(t,e){J.remove(t,e)},_data:function(t,e,i){return G.access(t,e,i)},_removeData:function(t,e){G.remove(t,e)}}),x.fn.extend({data:function(t,e){var i,n,r,a=this[0],s=a&&a.attributes;if(void 0===t){if(this.length&&(r=J.get(a),1===a.nodeType&&!G.get(a,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(n=s[i].name).indexOf("data-")&&(n=X(n.slice(5)),Z(a,n,r[n]));G.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){J.set(this,t)}):W(this,function(e){var i;if(a&&void 0===e){if(void 0!==(i=J.get(a,t)))return i;if(void 0!==(i=Z(a,t)))return i}else this.each(function(){J.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){J.remove(this,t)})}}),x.extend({queue:function(t,e,i){var n;if(t)return n=G.get(t,e=(e||"fx")+"queue"),i&&(!n||Array.isArray(i)?n=G.access(t,e,x.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){var i=x.queue(t,e=e||"fx"),n=i.length,r=i.shift(),a=x._queueHooks(t,e);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete a.stop,r.call(t,function(){x.dequeue(t,e)},a)),!n&&a&&a.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return G.get(t,i)||G.access(t,i,{empty:x.Callbacks("once memory").add(function(){G.remove(t,[e+"queue",i])})})}}),x.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?x.queue(this[0],t):void 0===e?this:this.each(function(){var i=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=x.Deferred(),a=this,s=this.length,o=function(){--n||r.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=G.get(a[s],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(o));return o(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),it=["Top","Right","Bottom","Left"],nt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&x.contains(t.ownerDocument,t)&&"none"===x.css(t,"display")},rt=function(t,e,i,n){var r,a,s={};for(a in e)s[a]=t.style[a],t.style[a]=e[a];for(a in r=i.apply(t,n||[]),e)t.style[a]=s[a];return r};function at(t,e,i,n){var r,a,s=20,o=n?function(){return n.cur()}:function(){return x.css(t,e,"")},l=o(),d=i&&i[3]||(x.cssNumber[e]?"":"px"),c=(x.cssNumber[e]||"px"!==d&&+l)&&et.exec(x.css(t,e));if(c&&c[3]!==d){for(l/=2,d=d||c[3],c=+l||1;s--;)x.style(t,e,c+d),(1-a)*(1-(a=o()/l||.5))<=0&&(s=0),c/=a;x.style(t,e,(c*=2)+d),i=i||[]}return i&&(c=+c||+l||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=r)),r}var st={};function ot(t){var e,i=t.ownerDocument,n=t.nodeName,r=st[n];return r||(e=i.body.appendChild(i.createElement(n)),r=x.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),st[n]=r,r)}function lt(t,e){for(var i,n,r=[],a=0,s=t.length;a<s;a++)(n=t[a]).style&&(i=n.style.display,e?("none"===i&&(r[a]=G.get(n,"display")||null,r[a]||(n.style.display="")),""===n.style.display&&nt(n)&&(r[a]=ot(n))):"none"!==i&&(r[a]="none",G.set(n,"display",i)));for(a=0;a<s;a++)null!=r[a]&&(t[a].style.display=r[a]);return t}x.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){nt(this)?x(this).show():x(this).hide()})}});var dt=/^(?:checkbox|radio)$/i,ct=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ht=/^$|^module$|\/(?:java|ecma)script/i,ut={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&D(t,e)?x.merge([t],i):i}function ft(t,e){for(var i=0,n=t.length;i<n;i++)G.set(t[i],"globalEval",!e||G.get(e[i],"globalEval"))}ut.optgroup=ut.option,ut.tbody=ut.tfoot=ut.colgroup=ut.caption=ut.thead,ut.th=ut.td;var gt=/<|&#?\w+;/;function pt(t,e,i,n,r){for(var a,s,o,l,d,c,h=e.createDocumentFragment(),u=[],_=0,f=t.length;_<f;_++)if((a=t[_])||0===a)if("object"===y(a))x.merge(u,a.nodeType?[a]:a);else if(gt.test(a)){for(s=s||h.appendChild(e.createElement("div")),o=(ct.exec(a)||["",""])[1].toLowerCase(),s.innerHTML=(l=ut[o]||ut._default)[1]+x.htmlPrefilter(a)+l[2],c=l[0];c--;)s=s.lastChild;x.merge(u,s.childNodes),(s=h.firstChild).textContent=""}else u.push(e.createTextNode(a));for(h.textContent="",_=0;a=u[_++];)if(n&&x.inArray(a,n)>-1)r&&r.push(a);else if(d=x.contains(a.ownerDocument,a),s=_t(h.appendChild(a),"script"),d&&ft(s),i)for(c=0;a=s[c++];)ht.test(a.type||"")&&i.push(a);return h}!function(){var t=n.createDocumentFragment().appendChild(n.createElement("div")),e=n.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),f.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var vt=n.documentElement,mt=/^key/,yt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xt=/^([^.]*)(?:\.(.+)|)/;function bt(){return!0}function wt(){return!1}function kt(){try{return n.activeElement}catch(t){}}function $t(t,e,i,n,r,a){var s,o;if("object"==typeof e){for(o in"string"!=typeof i&&(n=n||i,i=void 0),e)$t(t,o,i,n,e[o],a);return t}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=wt;else if(!r)return t;return 1===a&&(s=r,(r=function(t){return x().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=x.guid++)),t.each(function(){x.event.add(this,e,r,n,i)})}x.event={global:{},add:function(t,e,i,n,r){var a,s,o,l,d,c,h,u,_,f,g,p=G.get(t);if(p)for(i.handler&&(i=(a=i).handler,r=a.selector),r&&x.find.matchesSelector(vt,r),i.guid||(i.guid=x.guid++),(l=p.events)||(l=p.events={}),(s=p.handle)||(s=p.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),d=(e=(e||"").match(H)||[""]).length;d--;)_=g=(o=xt.exec(e[d])||[])[1],f=(o[2]||"").split(".").sort(),_&&(h=x.event.special[_]||{},h=x.event.special[_=(r?h.delegateType:h.bindType)||_]||{},c=x.extend({type:_,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:f.join(".")},a),(u=l[_])||((u=l[_]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,f,s)||t.addEventListener&&t.addEventListener(_,s)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,c):u.push(c),x.event.global[_]=!0)},remove:function(t,e,i,n,r){var a,s,o,l,d,c,h,u,_,f,g,p=G.hasData(t)&&G.get(t);if(p&&(l=p.events)){for(d=(e=(e||"").match(H)||[""]).length;d--;)if(_=g=(o=xt.exec(e[d])||[])[1],f=(o[2]||"").split(".").sort(),_){for(h=x.event.special[_]||{},u=l[_=(n?h.delegateType:h.bindType)||_]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=u.length;a--;)c=u[a],!r&&g!==c.origType||i&&i.guid!==c.guid||o&&!o.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(u.splice(a,1),c.selector&&u.delegateCount--,h.remove&&h.remove.call(t,c));s&&!u.length&&(h.teardown&&!1!==h.teardown.call(t,f,p.handle)||x.removeEvent(t,_,p.handle),delete l[_])}else for(_ in l)x.event.remove(t,_+e[d],i,n,!0);x.isEmptyObject(l)&&G.remove(t,"handle events")}},dispatch:function(t){var e,i,n,r,a,s,o=x.event.fix(t),l=new Array(arguments.length),d=(G.get(this,"events")||{})[o.type]||[],c=x.event.special[o.type]||{};for(l[0]=o,e=1;e<arguments.length;e++)l[e]=arguments[e];if(o.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,o)){for(s=x.event.handlers.call(this,o,d),e=0;(r=s[e++])&&!o.isPropagationStopped();)for(o.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(a.namespace)||(o.handleObj=a,o.data=a.data,void 0!==(n=((x.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,l))&&!1===(o.result=n)&&(o.preventDefault(),o.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,o),o.result}},handlers:function(t,e){var i,n,r,a,s,o=[],l=e.delegateCount,d=t.target;if(l&&d.nodeType&&!("click"===t.type&&t.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==t.type||!0!==d.disabled)){for(a=[],s={},i=0;i<l;i++)void 0===s[r=(n=e[i]).selector+" "]&&(s[r]=n.needsContext?x(r,this).index(d)>-1:x.find(r,this,null,[d]).length),s[r]&&a.push(n);a.length&&o.push({elem:d,handlers:a})}return d=this,l<e.length&&o.push({elem:d,handlers:e.slice(l)}),o},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==kt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===kt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&D(this,"input"))return this.click(),!1},_default:function(t){return D(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?bt:wt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:wt,isPropagationStopped:wt,isImmediatePropagationStopped:wt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=bt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=bt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=bt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&mt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&yt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||x.contains(this,n))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),x.fn.extend({on:function(t,e,i,n){return $t(this,t,e,i,n)},one:function(t,e,i,n){return $t(this,t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,x(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=wt),this.each(function(){x.event.remove(this,t,i,e)})}});var St=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Et=/<script|<style|<link/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ct(t,e){return D(t,"table")&&D(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function At(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Mt(t,e){var i,n,r,a,s,o,l,d;if(1===e.nodeType){if(G.hasData(t)&&(a=G.access(t),s=G.set(e,a),d=a.events))for(r in delete s.handle,s.events={},d)for(i=0,n=d[r].length;i<n;i++)x.event.add(e,r,d[r][i]);J.hasData(t)&&(o=J.access(t),l=x.extend({},o),J.set(e,l))}}function Nt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&dt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Ot(t,e,i,n){e=s.apply([],e);var r,a,o,l,d,c,h=0,u=t.length,_=u-1,p=e[0],v=g(p);if(v||u>1&&"string"==typeof p&&!f.checkClone&&Dt.test(p))return t.each(function(r){var a=t.eq(r);v&&(e[0]=p.call(this,r,a.html())),Ot(a,e,i,n)});if(u&&(a=(r=pt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===r.childNodes.length&&(r=a),a||n)){for(l=(o=x.map(_t(r,"script"),At)).length;h<u;h++)d=r,h!==_&&(d=x.clone(d,!0,!0),l&&x.merge(o,_t(d,"script"))),i.call(t[h],d,h);if(l)for(c=o[o.length-1].ownerDocument,x.map(o,Lt),h=0;h<l;h++)ht.test((d=o[h]).type||"")&&!G.access(d,"globalEval")&&x.contains(c,d)&&(d.src&&"module"!==(d.type||"").toLowerCase()?x._evalUrl&&x._evalUrl(d.src):m(d.textContent.replace(Tt,""),c,d))}return t}function Ht(t,e,i){for(var n,r=e?x.filter(e,t):t,a=0;null!=(n=r[a]);a++)i||1!==n.nodeType||x.cleanData(_t(n)),n.parentNode&&(i&&x.contains(n.ownerDocument,n)&&ft(_t(n,"script")),n.parentNode.removeChild(n));return t}x.extend({htmlPrefilter:function(t){return t.replace(St,"<$1></$2>")},clone:function(t,e,i){var n,r,a,s,o=t.cloneNode(!0),l=x.contains(t.ownerDocument,t);if(!(f.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(s=_t(o),n=0,r=(a=_t(t)).length;n<r;n++)Nt(a[n],s[n]);if(e)if(i)for(a=a||_t(t),s=s||_t(o),n=0,r=a.length;n<r;n++)Mt(a[n],s[n]);else Mt(t,o);return(s=_t(o,"script")).length>0&&ft(s,!l&&_t(t,"script")),o},cleanData:function(t){for(var e,i,n,r=x.event.special,a=0;void 0!==(i=t[a]);a++)if(q(i)){if(e=i[G.expando]){if(e.events)for(n in e.events)r[n]?x.event.remove(i,n):x.removeEvent(i,n,e.handle);i[G.expando]=void 0}i[J.expando]&&(i[J.expando]=void 0)}}}),x.fn.extend({detach:function(t){return Ht(this,t,!0)},remove:function(t){return Ht(this,t)},text:function(t){return W(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ot(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ct(this,t).appendChild(t)})},prepend:function(){return Ot(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Ct(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ot(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ot(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Et.test(t)&&!ut[(ct.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(x.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ot(this,arguments,function(e){var i=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(_t(this)),i&&i.replaceChild(e,this))},t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){x.fn[t]=function(t){for(var i,n=[],r=x(t),a=r.length-1,s=0;s<=a;s++)i=s===a?this:this.clone(!0),x(r[s])[e](i),o.apply(n,i.get());return this.pushStack(n)}});var It=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),jt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},zt=new RegExp(it.join("|"),"i");function Pt(t,e,i){var n,r,a,s,o=t.style;return(i=i||jt(t))&&(""!==(s=i.getPropertyValue(e)||i[e])||x.contains(t.ownerDocument,t)||(s=x.style(t,e)),!f.pixelBoxStyles()&&It.test(s)&&zt.test(e)&&(n=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=i.width,o.width=n,o.minWidth=r,o.maxWidth=a)),void 0!==s?s+"":s}function Rt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){d.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",vt.appendChild(d).appendChild(c);var e=t.getComputedStyle(c);r="1%"!==e.top,l=12===i(e.marginLeft),c.style.right="60%",o=36===i(e.right),a=36===i(e.width),c.style.position="absolute",s=36===c.offsetWidth||"absolute",vt.removeChild(d),c=null}}function i(t){return Math.round(parseFloat(t))}var r,a,s,o,l,d=n.createElement("div"),c=n.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===c.style.backgroundClip,x.extend(f,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s}}))}();var Bt=/^(none|table(?!-c[ea]).+)/,Wt=/^--/,Ut={position:"absolute",visibility:"hidden",display:"block"},Ft={letterSpacing:"0",fontWeight:"400"},Vt=["Webkit","Moz","ms"],Xt=n.createElement("div").style;function qt(t){var e=x.cssProps[t];return e||(e=x.cssProps[t]=function(t){if(t in Xt)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=Vt.length;i--;)if((t=Vt[i]+e)in Xt)return t}(t)||t),e}function Yt(t,e,i){var n=et.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function Gt(t,e,i,n,r,a){var s="width"===e?1:0,o=0,l=0;if(i===(n?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(l+=x.css(t,i+it[s],!0,r)),n?("content"===i&&(l-=x.css(t,"padding"+it[s],!0,r)),"margin"!==i&&(l-=x.css(t,"border"+it[s]+"Width",!0,r))):(l+=x.css(t,"padding"+it[s],!0,r),"padding"!==i?l+=x.css(t,"border"+it[s]+"Width",!0,r):o+=x.css(t,"border"+it[s]+"Width",!0,r));return!n&&a>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-l-o-.5))),l}function Jt(t,e,i){var n=jt(t),r=Pt(t,e,n),a="border-box"===x.css(t,"boxSizing",!1,n),s=a;if(It.test(r)){if(!i)return r;r="auto"}return s=s&&(f.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===x.css(t,"display",!1,n))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(r=parseFloat(r)||0)+Gt(t,e,i||(a?"border":"content"),s,n,r)+"px"}function Kt(t,e,i,n,r){return new Kt.prototype.init(t,e,i,n,r)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Pt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,a,s,o=X(e),l=Wt.test(e),d=t.style;if(l||(e=qt(o)),s=x.cssHooks[e]||x.cssHooks[o],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:d[e];"string"==(a=typeof i)&&(r=et.exec(i))&&r[1]&&(i=at(t,e,r),a="number"),null!=i&&i==i&&("number"===a&&(i+=r&&r[3]||(x.cssNumber[o]?"":"px")),f.clearCloneStyle||""!==i||0!==e.indexOf("background")||(d[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,n))||(l?d.setProperty(e,i):d[e]=i))}},css:function(t,e,i,n){var r,a,s,o=X(e);return Wt.test(e)||(e=qt(o)),(s=x.cssHooks[e]||x.cssHooks[o])&&"get"in s&&(r=s.get(t,!0,i)),void 0===r&&(r=Pt(t,e,n)),"normal"===r&&e in Ft&&(r=Ft[e]),""===i||i?(a=parseFloat(r),!0===i||isFinite(a)?a||0:r):r}}),x.each(["height","width"],function(t,e){x.cssHooks[e]={get:function(t,i,n){if(i)return!Bt.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Jt(t,e,n):rt(t,Ut,function(){return Jt(t,e,n)})},set:function(t,i,n){var r,a=jt(t),s="border-box"===x.css(t,"boxSizing",!1,a),o=n&&Gt(t,e,n,s,a);return s&&f.scrollboxSize()===a.position&&(o-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-Gt(t,e,"border",!1,a)-.5)),o&&(r=et.exec(i))&&"px"!==(r[3]||"px")&&(t.style[e]=i,i=x.css(t,e)),Yt(0,i,o)}}}),x.cssHooks.marginLeft=Rt(f.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Pt(t,"marginLeft"))||t.getBoundingClientRect().left-rt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(t,e){x.cssHooks[t+e]={expand:function(i){for(var n=0,r={},a="string"==typeof i?i.split(" "):[i];n<4;n++)r[t+it[n]+e]=a[n]||a[n-2]||a[0];return r}},"margin"!==t&&(x.cssHooks[t+e].set=Yt)}),x.fn.extend({css:function(t,e){return W(this,function(t,e,i){var n,r,a={},s=0;if(Array.isArray(e)){for(n=jt(t),r=e.length;s<r;s++)a[e[s]]=x.css(t,e[s],!1,n);return a}return void 0!==i?x.style(t,e,i):x.css(t,e)},t,e,arguments.length>1)}}),x.Tween=Kt,(Kt.prototype={constructor:Kt,init:function(t,e,i,n,r,a){this.elem=t,this.prop=i,this.easing=r||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=a||(x.cssNumber[i]?"":"px")},cur:function(){var t=Kt.propHooks[this.prop];return t&&t.get?t.get(this):Kt.propHooks._default.get(this)},run:function(t){var e,i=Kt.propHooks[this.prop];return this.pos=e=this.options.duration?x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Kt.propHooks._default.set(this),this}}).init.prototype=Kt.prototype,(Kt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[x.cssProps[t.prop]]&&!x.cssHooks[t.prop]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Kt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=Kt.prototype.init,x.fx.step={};var Qt,Zt,te=/^(?:toggle|show|hide)$/,ee=/queueHooks$/;function ie(){Zt&&(!1===n.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ie):t.setTimeout(ie,x.fx.interval),x.fx.tick())}function ne(){return t.setTimeout(function(){Qt=void 0}),Qt=Date.now()}function re(t,e){var i,n=0,r={height:t};for(e=e?1:0;n<4;n+=2-e)r["margin"+(i=it[n])]=r["padding"+i]=t;return e&&(r.opacity=r.width=t),r}function ae(t,e,i){for(var n,r=(se.tweeners[e]||[]).concat(se.tweeners["*"]),a=0,s=r.length;a<s;a++)if(n=r[a].call(i,e,t))return n}function se(t,e,i){var n,r,a=0,s=se.prefilters.length,o=x.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Qt||ne(),i=Math.max(0,d.startTime+d.duration-e),n=1-(i/d.duration||0),a=0,s=d.tweens.length;a<s;a++)d.tweens[a].run(n);return o.notifyWith(t,[d,n,i]),n<1&&s?i:(s||o.notifyWith(t,[d,1,0]),o.resolveWith(t,[d]),!1)},d=o.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},i),originalProperties:e,originalOptions:i,startTime:Qt||ne(),duration:i.duration,tweens:[],createTween:function(e,i){var n=x.Tween(t,d.opts,e,i,d.opts.specialEasing[e]||d.opts.easing);return d.tweens.push(n),n},stop:function(e){var i=0,n=e?d.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)d.tweens[i].run(1);return e?(o.notifyWith(t,[d,1,0]),o.resolveWith(t,[d,e])):o.rejectWith(t,[d,e]),this}}),c=d.props;for(function(t,e){var i,n,r,a,s;for(i in t)if(r=e[n=X(i)],a=t[i],Array.isArray(a)&&(r=a[1],a=t[i]=a[0]),i!==n&&(t[n]=a,delete t[i]),(s=x.cssHooks[n])&&"expand"in s)for(i in a=s.expand(a),delete t[n],a)i in t||(t[i]=a[i],e[i]=r);else e[n]=r}(c,d.opts.specialEasing);a<s;a++)if(n=se.prefilters[a].call(d,t,c,d.opts))return g(n.stop)&&(x._queueHooks(d.elem,d.opts.queue).stop=n.stop.bind(n)),n;return x.map(c,ae,d),g(d.opts.start)&&d.opts.start.call(t,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),x.fx.timer(x.extend(l,{elem:t,anim:d,queue:d.opts.queue})),d}x.Animation=x.extend(se,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return at(i.elem,t,et.exec(e),i),i}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(H);for(var i,n=0,r=t.length;n<r;n++)(se.tweeners[i=t[n]]=se.tweeners[i]||[]).unshift(e)},prefilters:[function(t,e,i){var n,r,a,s,o,l,d,c,h="width"in e||"height"in e,u=this,_={},f=t.style,g=t.nodeType&&nt(t),p=G.get(t,"fxshow");for(n in i.queue||(null==(s=x._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,x.queue(t,"fx").length||s.empty.fire()})})),e)if(te.test(r=e[n])){if(delete e[n],a=a||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!p||void 0===p[n])continue;g=!0}_[n]=p&&p[n]||x.style(t,n)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(_))for(n in h&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(d=p&&p.display)&&(d=G.get(t,"display")),"none"===(c=x.css(t,"display"))&&(d?c=d:(lt([t],!0),d=t.style.display||d,c=x.css(t,"display"),lt([t]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===x.css(t,"float")&&(l||(u.done(function(){f.display=d}),null==d&&(d="none"===(c=f.display)?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",u.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,_)l||(p?"hidden"in p&&(g=p.hidden):p=G.access(t,"fxshow",{display:d}),a&&(p.hidden=!g),g&&lt([t],!0),u.done(function(){for(n in g||lt([t]),G.remove(t,"fxshow"),_)x.style(t,n,_[n])})),l=ae(g?p[n]:0,n,u),n in p||(p[n]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?se.prefilters.unshift(t):se.prefilters.push(t)}}),x.speed=function(t,e,i){var n=t&&"object"==typeof t?x.extend({},t):{complete:i||!i&&e||g(t)&&t,duration:t,easing:i&&e||e&&!g(e)&&e};return x.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration=n.duration in x.fx.speeds?x.fx.speeds[n.duration]:x.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){g(n.old)&&n.old.call(this),n.queue&&x.dequeue(this,n.queue)},n},x.fn.extend({fadeTo:function(t,e,i,n){return this.filter(nt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=x.isEmptyObject(t),a=x.speed(e,i,n),s=function(){var e=se(this,x.extend({},t),a);(r||G.get(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",a=x.timers,s=G.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&ee.test(r)&&n(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=t&&a[r].queue!==t||(a[r].anim.stop(i),e=!1,a.splice(r,1));!e&&i||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=G.get(this),n=i[t+"queue"],r=i[t+"queueHooks"],a=x.timers,s=n?n.length:0;for(i.finish=!0,x.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),x.each(["toggle","show","hide"],function(t,e){var i=x.fn[e];x.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(re(e,!0),t,n,r)}}),x.each({slideDown:re("show"),slideUp:re("hide"),slideToggle:re("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){x.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),x.timers=[],x.fx.tick=function(){var t,e=0,i=x.timers;for(Qt=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||x.fx.stop(),Qt=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Zt||(Zt=!0,ie())},x.fx.stop=function(){Zt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,i){return e=x.fx&&x.fx.speeds[e]||e,this.queue(i=i||"fx",function(i,n){var r=t.setTimeout(i,e);n.stop=function(){t.clearTimeout(r)}})},function(){var t=n.createElement("input"),e=n.createElement("select").appendChild(n.createElement("option"));t.type="checkbox",f.checkOn=""!==t.value,f.optSelected=e.selected,(t=n.createElement("input")).value="t",t.type="radio",f.radioValue="t"===t.value}();var oe,le=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return W(this,x.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,i){var n,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?x.prop(t,e,i):(1===a&&x.isXMLDoc(t)||(r=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?oe:void 0)),void 0!==i?null===i?void x.removeAttr(t,e):r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:(t.setAttribute(e,i+""),i):r&&"get"in r&&null!==(n=r.get(t,e))?n:null==(n=x.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!f.radioValue&&"radio"===e&&D(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,r=e&&e.match(H);if(r&&1===t.nodeType)for(;i=r[n++];)t.removeAttribute(i)}}),oe={set:function(t,e,i){return!1===e?x.removeAttr(t,i):t.setAttribute(i,i),i}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var i=le[e]||x.find.attr;le[e]=function(t,e,n){var r,a,s=e.toLowerCase();return n||(a=le[s],le[s]=r,r=null!=i(t,e,n)?s:null,le[s]=a),r}});var de=/^(?:input|select|textarea|button)$/i,ce=/^(?:a|area)$/i;function he(t){return(t.match(H)||[]).join(" ")}function ue(t){return t.getAttribute&&t.getAttribute("class")||""}function _e(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(H)||[]}x.fn.extend({prop:function(t,e){return W(this,x.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,i){var n,r,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&x.isXMLDoc(t)||(r=x.propHooks[e=x.propFix[e]||e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(x.propHooks.selected={get:function(t){return null},set:function(t){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,i,n,r,a,s,o,l=0;if(g(t))return this.each(function(e){x(this).addClass(t.call(this,e,ue(this)))});if((e=_e(t)).length)for(;i=this[l++];)if(r=ue(i),n=1===i.nodeType&&" "+he(r)+" "){for(s=0;a=e[s++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");r!==(o=he(n))&&i.setAttribute("class",o)}return this},removeClass:function(t){var e,i,n,r,a,s,o,l=0;if(g(t))return this.each(function(e){x(this).removeClass(t.call(this,e,ue(this)))});if(!arguments.length)return this.attr("class","");if((e=_e(t)).length)for(;i=this[l++];)if(r=ue(i),n=1===i.nodeType&&" "+he(r)+" "){for(s=0;a=e[s++];)for(;n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");r!==(o=he(n))&&i.setAttribute("class",o)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):g(t)?this.each(function(i){x(this).toggleClass(t.call(this,i,ue(this),e),e)}):this.each(function(){var e,r,a,s;if(n)for(r=0,a=x(this),s=_e(t);e=s[r++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==i||((e=ue(this))&&G.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":G.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+he(ue(i))+" ").indexOf(e)>-1)return!0;return!1}});var fe=/\r/g;x.fn.extend({val:function(t){var e,i,n,r=this[0];return arguments.length?(n=g(t),this.each(function(i){var r;1===this.nodeType&&(null==(r=n?t.call(this,i,x(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=x.map(r,function(t){return null==t?"":t+""})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(fe,""):null==i?"":i:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:he(x.text(t))}},select:{get:function(t){var e,i,n,r=t.options,a=t.selectedIndex,s="select-one"===t.type,o=s?null:[],l=s?a+1:r.length;for(n=a<0?l:s?a:0;n<l;n++)if(((i=r[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!D(i.parentNode,"optgroup"))){if(e=x(i).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var i,n,r=t.options,a=x.makeArray(e),s=r.length;s--;)((n=r[s]).selected=x.inArray(x.valHooks.option.get(n),a)>-1)&&(i=!0);return i||(t.selectedIndex=-1),a}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=x.inArray(x(t).val(),e)>-1}},f.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),f.focusin="onfocusin"in t;var ge=/^(?:focusinfocus|focusoutblur)$/,pe=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,i,r,a){var s,o,l,d,c,u,_,f,v=[r||n],m=h.call(e,"type")?e.type:e,y=h.call(e,"namespace")?e.namespace.split("."):[];if(o=f=l=r=r||n,3!==r.nodeType&&8!==r.nodeType&&!ge.test(m+x.event.triggered)&&(m.indexOf(".")>-1&&(m=(y=m.split(".")).shift(),y.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[x.expando]?e:new x.Event(m,"object"==typeof e&&e)).isTrigger=a?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),i=null==i?[e]:x.makeArray(i,[e]),_=x.event.special[m]||{},a||!_.trigger||!1!==_.trigger.apply(r,i))){if(!a&&!_.noBubble&&!p(r)){for(ge.test((d=_.delegateType||m)+m)||(o=o.parentNode);o;o=o.parentNode)v.push(o),l=o;l===(r.ownerDocument||n)&&v.push(l.defaultView||l.parentWindow||t)}for(s=0;(o=v[s++])&&!e.isPropagationStopped();)f=o,e.type=s>1?d:_.bindType||m,(u=(G.get(o,"events")||{})[e.type]&&G.get(o,"handle"))&&u.apply(o,i),(u=c&&o[c])&&u.apply&&q(o)&&(e.result=u.apply(o,i),!1===e.result&&e.preventDefault());return e.type=m,a||e.isDefaultPrevented()||_._default&&!1!==_._default.apply(v.pop(),i)||!q(r)||c&&g(r[m])&&!p(r)&&((l=r[c])&&(r[c]=null),x.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,pe),r[m](),e.isPropagationStopped()&&f.removeEventListener(m,pe),x.event.triggered=void 0,l&&(r[c]=l)),e.result}},simulate:function(t,e,i){var n=x.extend(new x.Event,i,{type:t,isSimulated:!0});x.event.trigger(n,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return x.event.trigger(t,e,i,!0)}}),f.focusin||x.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=G.access(n,e);r||n.addEventListener(t,i,!0),G.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=G.access(n,e)-1;r?G.access(n,e,r):(n.removeEventListener(t,i,!0),G.remove(n,e))}}});var ve=t.location,me=Date.now(),ye=/\?/;x.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),i};var xe=/\[\]$/,be=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,ke=/^(?:input|select|textarea|keygen)/i;function $e(t,e,i,n){var r;if(Array.isArray(e))x.each(e,function(e,r){i||xe.test(t)?n(t,r):$e(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,n)});else if(i||"object"!==y(e))n(t,e);else for(r in e)$e(t+"["+r+"]",e[r],i,n)}x.param=function(t,e){var i,n=[],r=function(t,e){var i=g(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){r(this.name,this.value)});else for(i in t)$e(i,t[i],e,r);return n.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&ke.test(this.nodeName)&&!we.test(t)&&(this.checked||!dt.test(t))}).map(function(t,e){var i=x(this).val();return null==i?null:Array.isArray(i)?x.map(i,function(t){return{name:e.name,value:t.replace(be,"\r\n")}}):{name:e.name,value:i.replace(be,"\r\n")}}).get()}});var Se=/%20/g,Ee=/#.*$/,De=/([?&])_=[^&]*/,Te=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ce=/^(?:GET|HEAD)$/,Ae=/^\/\//,Le={},Me={},Ne="*/".concat("*"),Oe=n.createElement("a");function He(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,a=e.toLowerCase().match(H)||[];if(g(i))for(;n=a[r++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Ie(t,e,i,n){var r={},a=t===Me;function s(o){var l;return r[o]=!0,x.each(t[o]||[],function(t,o){var d=o(e,i,n);return"string"!=typeof d||a||r[d]?a?!(l=d):void 0:(e.dataTypes.unshift(d),s(d),!1)}),l}return s(e.dataTypes[0])||!r["*"]&&s("*")}function je(t,e){var i,n,r=x.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&x.extend(!0,t,n),t}Oe.href=ve.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ve.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ve.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ne,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?je(je(t,x.ajaxSettings),e):je(x.ajaxSettings,t)},ajaxPrefilter:He(Le),ajaxTransport:He(Me),ajax:function(e,i){"object"==typeof e&&(i=e,e=void 0);var r,a,s,o,l,d,c,h,u,_,f=x.ajaxSetup({},i=i||{}),g=f.context||f,p=f.context&&(g.nodeType||g.jquery)?x(g):x.event,v=x.Deferred(),m=x.Callbacks("once memory"),y=f.statusCode||{},b={},w={},k="canceled",$={readyState:0,getResponseHeader:function(t){var e;if(c){if(!o)for(o={};e=Te.exec(s);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==c&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)$.always(t[$.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||k;return r&&r.abort(e),S(0,e),this}};if(v.promise($),f.url=((e||f.url||ve.href)+"").replace(Ae,ve.protocol+"//"),f.type=i.method||i.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(H)||[""],null==f.crossDomain){d=n.createElement("a");try{d.href=f.url,d.href=d.href,f.crossDomain=Oe.protocol+"//"+Oe.host!=d.protocol+"//"+d.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=x.param(f.data,f.traditional)),Ie(Le,f,i,$),c)return $;for(u in(h=x.event&&f.global)&&0==x.active++&&x.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ce.test(f.type),a=f.url.replace(Ee,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Se,"+")):(_=f.url.slice(a.length),f.data&&(f.processData||"string"==typeof f.data)&&(a+=(ye.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(a=a.replace(De,"$1"),_=(ye.test(a)?"&":"?")+"_="+me+++_),f.url=a+_),f.ifModified&&(x.lastModified[a]&&$.setRequestHeader("If-Modified-Since",x.lastModified[a]),x.etag[a]&&$.setRequestHeader("If-None-Match",x.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||i.contentType)&&$.setRequestHeader("Content-Type",f.contentType),$.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ne+"; q=0.01":""):f.accepts["*"]),f.headers)$.setRequestHeader(u,f.headers[u]);if(f.beforeSend&&(!1===f.beforeSend.call(g,$,f)||c))return $.abort();if(k="abort",m.add(f.complete),$.done(f.success),$.fail(f.error),r=Ie(Me,f,i,$)){if($.readyState=1,h&&p.trigger("ajaxSend",[$,f]),c)return $;f.async&&f.timeout>0&&(l=t.setTimeout(function(){$.abort("timeout")},f.timeout));try{c=!1,r.send(b,S)}catch(t){if(c)throw t;S(-1,t)}}else S(-1,"No Transport");function S(e,i,n,o){var d,u,_,b,w,k=i;c||(c=!0,l&&t.clearTimeout(l),r=void 0,s=o||"",$.readyState=e>0?4:0,d=e>=200&&e<300||304===e,n&&(b=function(t,e,i){for(var n,r,a,s,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(r in o)if(o[r]&&o[r].test(n)){l.unshift(r);break}if(l[0]in i)a=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),i[a]}(f,$,n)),b=function(t,e,i,n){var r,a,s,o,l,d={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)d[s.toLowerCase()]=t.converters[s];for(a=c.shift();a;)if(t.responseFields[a]&&(i[t.responseFields[a]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=d[l+" "+a]||d["* "+a]))for(r in d)if((o=r.split(" "))[1]===a&&(s=d[l+" "+o[0]]||d["* "+o[0]])){!0===s?s=d[r]:!0!==d[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+a}}}return{state:"success",data:e}}(f,b,$,d),d?(f.ifModified&&((w=$.getResponseHeader("Last-Modified"))&&(x.lastModified[a]=w),(w=$.getResponseHeader("etag"))&&(x.etag[a]=w)),204===e||"HEAD"===f.type?k="nocontent":304===e?k="notmodified":(k=b.state,u=b.data,d=!(_=b.error))):(_=k,!e&&k||(k="error",e<0&&(e=0))),$.status=e,$.statusText=(i||k)+"",d?v.resolveWith(g,[u,k,$]):v.rejectWith(g,[$,k,_]),$.statusCode(y),y=void 0,h&&p.trigger(d?"ajaxSuccess":"ajaxError",[$,f,d?u:_]),m.fireWith(g,[$,k]),h&&(p.trigger("ajaxComplete",[$,f]),--x.active||x.event.trigger("ajaxStop")))}return $},getJSON:function(t,e,i){return x.get(t,e,i,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,e){x[e]=function(t,i,n,r){return g(i)&&(r=r||n,n=i,i=void 0),x.ajax(x.extend({url:t,type:e,dataType:r,data:i,success:n},x.isPlainObject(t)&&t))}}),x._evalUrl=function(t){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return g(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=g(t);return this.each(function(i){x(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var ze={0:200,1223:204},Pe=x.ajaxSettings.xhr();f.cors=!!Pe&&"withCredentials"in Pe,f.ajax=Pe=!!Pe,x.ajaxTransport(function(e){var i,n;if(f.cors||Pe&&!e.crossDomain)return{send:function(r,a){var s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];for(s in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(s,r[s]);i=function(t){return function(){i&&(i=n=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(ze[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=i(),n=o.onerror=o.ontimeout=i("error"),void 0!==o.onabort?o.onabort=n:o.onreadystatechange=function(){4===o.readyState&&t.setTimeout(function(){i&&n()})},i=i("abort");try{o.send(e.hasContent&&e.data||null)}catch(t){if(i)throw t}},abort:function(){i&&i()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(t){var e,i;if(t.crossDomain)return{send:function(r,a){e=x("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&a("error"===t.type?404:200,t.type)}),n.head.appendChild(e[0])},abort:function(){i&&i()}}});var Re=[],Be=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Re.pop()||x.expando+"_"+me++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(e,i,n){var r,a,s,o=!1!==e.jsonp&&(Be.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Be.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Be,"$1"+r):!1!==e.jsonp&&(e.url+=(ye.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||x.error(r+" was not called"),s[0]},e.dataTypes[0]="json",a=t[r],t[r]=function(){s=arguments},n.always(function(){void 0===a?x(t).removeProp(r):t[r]=a,e[r]&&(e.jsonpCallback=i.jsonpCallback,Re.push(r)),s&&g(a)&&a(s[0]),s=a=void 0}),"script"}),f.createHTMLDocument=function(){var t=n.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),x.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(f.createHTMLDocument?((r=(e=n.implementation.createHTMLDocument("")).createElement("base")).href=n.location.href,e.head.appendChild(r)):e=n),a=T.exec(t),s=!i&&[],a?[e.createElement(a[1])]:(a=pt([t],e,s),s&&s.length&&x(s).remove(),x.merge([],a.childNodes)));var r,a,s},x.fn.load=function(t,e,i){var n,r,a,s=this,o=t.indexOf(" ");return o>-1&&(n=he(t.slice(o)),t=t.slice(0,o)),g(e)?(i=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&x.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){a=arguments,s.html(n?x("<div>").append(x.parseHTML(t)).find(n):t)}).always(i&&function(t,e){s.each(function(){i.apply(this,a||[t.responseText,e,t])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,i){var n,r,a,s,o,l,d=x.css(t,"position"),c=x(t),h={};"static"===d&&(t.style.position="relative"),o=c.offset(),a=x.css(t,"top"),l=x.css(t,"left"),("absolute"===d||"fixed"===d)&&(a+l).indexOf("auto")>-1?(s=(n=c.position()).top,r=n.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),g(e)&&(e=e.call(t,i,x.extend({},o))),null!=e.top&&(h.top=e.top-o.top+s),null!=e.left&&(h.left=e.left-o.left+r),"using"in e?e.using.call(t,h):c.css(h)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,i,n=this[0];return n?n.getClientRects().length?{top:(e=n.getBoundingClientRect()).top+(i=n.ownerDocument.defaultView).pageYOffset,left:e.left+i.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],r={top:0,left:0};if("fixed"===x.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((r=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),r.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-x.css(n,"marginTop",!0),left:e.left-r.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||vt})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;x.fn[t]=function(n){return W(this,function(t,n,r){var a;if(p(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===r)return a?a[e]:t[n];a?a.scrollTo(i?a.pageXOffset:r,i?r:a.pageYOffset):t[n]=r},t,n,arguments.length)}}),x.each(["top","left"],function(t,e){x.cssHooks[e]=Rt(f.pixelPosition,function(t,i){if(i)return i=Pt(t,e),It.test(i)?x(t).position()[e]+"px":i})}),x.each({Height:"height",Width:"width"},function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){x.fn[n]=function(r,a){var s=arguments.length&&(i||"boolean"!=typeof r),o=i||(!0===r||!0===a?"margin":"border");return W(this,function(e,i,r){var a;return p(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===r?x.css(e,i,o):x.style(e,i,r,o)},e,s?r:void 0,s)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){x.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),x.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),x.proxy=function(t,e){var i,n,r;if("string"==typeof e&&(i=t[e],e=t,t=i),g(t))return n=a.call(arguments,2),(r=function(){return t.apply(e||this,n.concat(a.call(arguments)))}).guid=t.guid=t.guid||x.guid++,r},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=D,x.isFunction=g,x.isWindow=p,x.camelCase=X,x.type=y,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var We=t.jQuery,Ue=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=Ue),e&&t.jQuery===x&&(t.jQuery=We),x},e||(t.jQuery=t.$=x),x});